(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MapView~about"],{"04d1":function(t,e,i){var n=i("342f"),r=n.match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},"0748":function(t,e,i){"use strict";var n=i("7a23"),r={class:"table"},s=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",{scope:"col"},"Libell√© de d'action"),Object(n["g"])("th",{scope:"col"},"Structure")])],-1),a={key:0};function o(t,e,i,o,c,h){return Object(n["r"])(),Object(n["f"])("div",null,[Object(n["g"])("table",r,[s,c.actionsList?(Object(n["r"])(),Object(n["f"])("tbody",a,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(c.actionsList,(function(t){return Object(n["r"])(),Object(n["f"])("tr",{key:t.id_action},[Object(n["g"])("td",null,Object(n["A"])(t.lib_action),1),Object(n["g"])("td",null,Object(n["A"])(t.raison_sociale),1)])})),128))])):Object(n["e"])("",!0)])])}i("4e82"),i("4de4"),i("d3b7");var c={name:"Table",data:function(){return{actionsList:""}},computed:{actions:function(){return this.$store.state.data},filterCode:function(){return this.$store.state.filterCode},filterKey:function(){return this.$store.state.filterKey}},watch:{filterCode:function(){this.filterOnCode()},filterKey:function(){this.filterOnTheme()}},methods:{filterOnCode:function(){var t=this;this.actionsList=this.actions.filter((function(e){return e.code_cv==t.filterCode})).sort((function(t,e){return t.lib_cv<e.lib_cv?-1:t.lib_cv>e.lib_cv?1:0}))},filterOnTheme:function(){var t=this;this.actionsList=this.actions.filter((function(e){return e.theme==t.filterKey})).sort((function(t,e){return t.lib_cv<e.lib_cv?-1:t.lib_cv>e.lib_cv?1:0}))}}},h=(i("910a"),i("6b0d")),l=i.n(h);const u=l()(c,[["render",o]]);e["a"]=u},"0f36":function(t){t.exports=JSON.parse("{}")},"146e":function(t,e,i){"use strict";i("c862")},"159b":function(t,e,i){var n=i("da84"),r=i("fdbc"),s=i("785a"),a=i("17c2"),o=i("9112"),c=function(t){if(t&&t.forEach!==a)try{o(t,"forEach",a)}catch(e){t.forEach=a}};for(var h in r)r[h]&&c(n[h]&&n[h].prototype);c(s)},"17c2":function(t,e,i){"use strict";var n=i("b727").forEach,r=i("a640"),s=r("forEach");t.exports=s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1fb5":function(t,e,i){"use strict";e.byteLength=l,e.toByteArray=d,e.fromByteArray=g;for(var n=[],r=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=a.length;o<c;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");-1===i&&(i=e);var n=i===e?0:4-i%4;return[i,n]}function l(t){var e=h(t),i=e[0],n=e[1];return 3*(i+n)/4-n}function u(t,e,i){return 3*(e+i)/4-i}function d(t){var e,i,n=h(t),a=n[0],o=n[1],c=new s(u(t,a,o)),l=0,d=o>0?a-4:a;for(i=0;i<d;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===o&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,c[l++]=255&e),1===o&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c}function p(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function f(t,e,i){for(var n,r=[],s=e;s<i;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),r.push(p(n));return r.join("")}function g(t){for(var e,i=t.length,r=i%3,s=[],a=16383,o=0,c=i-r;o<c;o+=a)s.push(f(t,o,o+a>c?c:o+a));return 1===r?(e=t[i-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},"3eea":function(t,e,i){"use strict";i.r(e),i.d(e,"memcpy",(function(){return h})),i.d(e,"joinUint8Arrays",(function(){return l})),i.d(e,"toArrayBufferView",(function(){return u})),i.d(e,"toInt8Array",(function(){return d})),i.d(e,"toInt16Array",(function(){return p})),i.d(e,"toInt32Array",(function(){return f})),i.d(e,"toBigInt64Array",(function(){return g})),i.d(e,"toUint8Array",(function(){return m})),i.d(e,"toUint16Array",(function(){return y})),i.d(e,"toUint32Array",(function(){return b})),i.d(e,"toBigUint64Array",(function(){return _})),i.d(e,"toFloat32Array",(function(){return v})),i.d(e,"toFloat64Array",(function(){return x})),i.d(e,"toUint8ClampedArray",(function(){return w})),i.d(e,"toArrayBufferViewIterator",(function(){return I})),i.d(e,"toInt8ArrayIterator",(function(){return A})),i.d(e,"toInt16ArrayIterator",(function(){return k})),i.d(e,"toInt32ArrayIterator",(function(){return T})),i.d(e,"toUint8ArrayIterator",(function(){return M})),i.d(e,"toUint16ArrayIterator",(function(){return O})),i.d(e,"toUint32ArrayIterator",(function(){return E})),i.d(e,"toFloat32ArrayIterator",(function(){return C})),i.d(e,"toFloat64ArrayIterator",(function(){return D})),i.d(e,"toUint8ClampedArrayIterator",(function(){return B})),i.d(e,"toArrayBufferViewAsyncIterator",(function(){return L})),i.d(e,"toInt8ArrayAsyncIterator",(function(){return P})),i.d(e,"toInt16ArrayAsyncIterator",(function(){return F})),i.d(e,"toInt32ArrayAsyncIterator",(function(){return N})),i.d(e,"toUint8ArrayAsyncIterator",(function(){return R})),i.d(e,"toUint16ArrayAsyncIterator",(function(){return U})),i.d(e,"toUint32ArrayAsyncIterator",(function(){return V})),i.d(e,"toFloat32ArrayAsyncIterator",(function(){return j})),i.d(e,"toFloat64ArrayAsyncIterator",(function(){return z})),i.d(e,"toUint8ClampedArrayAsyncIterator",(function(){return W})),i.d(e,"rebaseValueOffsets",(function(){return $})),i.d(e,"compareArrayLike",(function(){return H}));var n=i("a6b2"),r=i("5217"),s=i("841f"),a=n["a"].ByteBuffer;const o="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function c(t){let e,i,n,r,s=t[0]?[t[0]]:[];for(let a,o,c=0,h=0,l=t.length;++c<l;)a=s[h],o=t[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(s[++h]=o):(({byteOffset:e,byteLength:n}=a),({byteOffset:i,byteLength:r}=o),e+n<i||i+r<e?o&&(s[++h]=o):s[h]=new Uint8Array(a.buffer,e,i-e+r));return s}function h(t,e,i=0,n=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,r));return s.set(a,i),t}function l(t,e){let i,n,r,s=c(t),a=s.reduce((t,e)=>t+e.byteLength,0),o=0,l=-1,u=Math.min(e||1/0,a);for(let c=s.length;++l<c;){if(i=s[l],n=i.subarray(0,Math.min(i.length,u-o)),u<=o+n.length){n.length<i.length?s[l]=i.subarray(n.length):n.length===i.length&&l++,r?h(r,n,o):r=n;break}h(r||(r=new Uint8Array(u)),n,o),o+=n.length}return[r||new Uint8Array(0),s.slice(l),a-(r?r.byteLength:0)]}function u(t,e){let i=Object(s["j"])(e)?e.value:e;return i instanceof t?t===Uint8Array?new t(i.buffer,i.byteOffset,i.byteLength):i:i?("string"===typeof i&&(i=Object(r["b"])(i)),i instanceof ArrayBuffer||i instanceof o?new t(i):i instanceof a?u(t,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new t(0):new t(i.buffer,i.byteOffset,i.byteLength/t.BYTES_PER_ELEMENT):t.from(i)):new t(0)}const d=t=>u(Int8Array,t),p=t=>u(Int16Array,t),f=t=>u(Int32Array,t),g=t=>u(s["b"],t),m=t=>u(Uint8Array,t),y=t=>u(Uint16Array,t),b=t=>u(Uint32Array,t),_=t=>u(s["d"],t),v=t=>u(Float32Array,t),x=t=>u(Float64Array,t),w=t=>u(Uint8ClampedArray,t),S=t=>(t.next(),t);function*I(t,e){const i=function*(t){yield t},n="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof o?i(e):Object(s["i"])(e)?e:i(e);return yield*S(function*(e){let i=null;do{i=e.next(yield u(t,i))}while(!i.done)}(n[Symbol.iterator]())),new t}const A=t=>I(Int8Array,t),k=t=>I(Int16Array,t),T=t=>I(Int32Array,t),M=t=>I(Uint8Array,t),O=t=>I(Uint16Array,t),E=t=>I(Uint32Array,t),C=t=>I(Float32Array,t),D=t=>I(Float64Array,t),B=t=>I(Uint8ClampedArray,t);async function*L(t,e){if(Object(s["l"])(e))return yield*L(t,await e);const i=async function*(t){yield await t},n=async function*(t){yield*S(function*(t){let e=null;do{e=t.next(yield e&&e.value)}while(!e.done)}(t[Symbol.iterator]()))},r="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof o?i(e):Object(s["i"])(e)?n(e):Object(s["f"])(e)?e:i(e);return yield*S(async function*(e){let i=null;do{i=await e.next(yield u(t,i))}while(!i.done)}(r[Symbol.asyncIterator]())),new t}const P=t=>L(Int8Array,t),F=t=>L(Int16Array,t),N=t=>L(Int32Array,t),R=t=>L(Uint8Array,t),U=t=>L(Uint16Array,t),V=t=>L(Uint32Array,t),j=t=>L(Float32Array,t),z=t=>L(Float64Array,t),W=t=>L(Uint8ClampedArray,t);function $(t,e,i){if(0!==t){i=i.slice(0,e+1);for(let n=-1;++n<=e;)i[n]+=t}return i}function H(t,e){let i=0,n=t.length;if(n!==e.length)return!1;if(n>0)do{if(t[i]!==e[i])return!1}while(++i<n);return!0}},"4e82":function(t,e,i){"use strict";var n=i("23e7"),r=i("e330"),s=i("59ed"),a=i("7b0b"),o=i("07fa"),c=i("577e"),h=i("d039"),l=i("addb"),u=i("a640"),d=i("04d1"),p=i("d998"),f=i("2d00"),g=i("512c"),m=[],y=r(m.sort),b=r(m.push),_=h((function(){m.sort(void 0)})),v=h((function(){m.sort(null)})),x=u("sort"),w=!h((function(){if(f)return f<70;if(!(d&&d>3)){if(p)return!0;if(g)return g<603;var t,e,i,n,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)m.push({k:e+n,v:i})}for(m.sort((function(t,e){return e.v-t.v})),n=0;n<m.length;n++)e=m[n].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}})),S=_||!v||!x||!w,I=function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:c(e)>c(i)?1:-1}};n({target:"Array",proto:!0,forced:S},{sort:function(t){void 0!==t&&s(t);var e=a(this);if(w)return void 0===t?y(e):y(e,t);var i,n,r=[],c=o(e);for(n=0;n<c;n++)n in e&&b(r,e[n]);l(r,I(t)),i=r.length,n=0;while(n<i)e[n]=r[n++];while(n<c)delete e[n++];return e}})},"512c":function(t,e,i){var n=i("342f"),r=n.match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},5217:function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return c}));var n=i("3eea"),r=i("b4b6");const s="function"===typeof t?t:null,a="function"===typeof TextDecoder&&"function"===typeof TextEncoder,o=(t=>{if(a||!s){const e=new t("utf-8");return t=>e.decode(t)}return t=>{const{buffer:e,byteOffset:i,length:r}=Object(n["toUint8Array"])(t);return s.from(e,i,r).toString()}})("undefined"!==typeof TextDecoder?TextDecoder:r["a"]),c=(t=>{if(a||!s){const e=new t;return t=>e.encode(t)}return(t="")=>Object(n["toUint8Array"])(s.from(t,"utf8"))})("undefined"!==typeof TextEncoder?TextEncoder:r["b"])}).call(this,i("b639").Buffer)},"5d5d":function(t,e,i){"use strict";i.d(e,"a",(function(){return nv}));var n={};i.r(n),i.d(n,"getBool",(function(){return Je})),i.d(n,"getBit",(function(){return Qe})),i.d(n,"setBool",(function(){return Ze})),i.d(n,"truncateBitmap",(function(){return ti})),i.d(n,"packBools",(function(){return ei})),i.d(n,"iterateBits",(function(){return ii})),i.d(n,"popcnt_bit_range",(function(){return ni})),i.d(n,"popcnt_array",(function(){return ri})),i.d(n,"popcnt_uint32",(function(){return si}));var r={};i.r(r),i.d(r,"uint16ToFloat64",(function(){return Wn})),i.d(r,"float64ToUint16",(function(){return $n}));var s={};i.r(s),i.d(s,"isArrowBigNumSymbol",(function(){return Kn})),i.d(s,"bignumToString",(function(){return er})),i.d(s,"bignumToBigInt",(function(){return ir})),i.d(s,"BN",(function(){return rr}));var a={};i.r(a),i.d(a,"clampIndex",(function(){return zr})),i.d(a,"clampRange",(function(){return $r})),i.d(a,"createElementComparator",(function(){return qr}));var o={};i.r(o),i.d(o,"BaseInt64",(function(){return Ya})),i.d(o,"Uint64",(function(){return qa})),i.d(o,"Int64",(function(){return Ga})),i.d(o,"Int128",(function(){return Ka}));var c=Array.isArray,h=function(t){return null!=t?c(t)?t:[t]:[]},l=function(t=0,e=1/0){return`${u(t)} < row_number() && row_number() <= ${u(e)}`};function u(t){return t<0?"count() + "+t:t}class d{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,e){return this.__derive(this,t,e)}filter(t){return this.__filter(this,t)}slice(t,e){return this.filter(l(t,e)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,e){return this.__relocate(this,h(t),e)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,e){return this.__sample(this,t,e)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,e){return this.__impute(this,t,e)}fold(t,e){return this.__fold(this,t,e)}pivot(t,e,i){return this.__pivot(this,t,e,i)}spread(t,e){return this.__spread(this,t,e)}unroll(t,e){return this.__unroll(this,t,e)}lookup(t,e,...i){return this.__lookup(this,t,e,i.flat())}join(t,e,i,n){return this.__join(this,t,e,i,n)}join_left(t,e,i,n){const r={...n,left:!0,right:!1};return this.__join(this,t,e,i,r)}join_right(t,e,i,n){const r={...n,left:!1,right:!0};return this.__join(this,t,e,i,r)}join_full(t,e,i,n){const r={...n,left:!0,right:!0};return this.__join(this,t,e,i,r)}cross(t,e,i){return this.__cross(this,t,e,i)}semijoin(t,e){return this.__semijoin(this,t,e)}antijoin(t,e){return this.__antijoin(this,t,e)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}var p=function(t){throw Error(t)},f=function(t){return"number"===typeof t},g=function(t){return"function"===typeof t},m=function(t,e){const i=Array(t);if(g(e))for(let n=0;n<t;++n)i[n]=e(n);else i.fill(e);return i};class y extends d{constructor(t,e,i,n,r,s,a){super(a),this._names=Object.freeze(t),this._data=i,this._total=e,this._nrows=n?n.count():e,this._mask=e!==this._nrows&&n||null,this._group=r||null,this._order=s||null}create(t){p("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(1!==this.numRows()?"s":""),e=this.numCols()+" col"+(1!==this.numCols()?"s":"");return`Table: ${e} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,e){return this.array(t,e)}array(t,e){p("Not implemented")}*values(t){const e=this.getter(t),i=this.numRows();for(let n=0;n<i;++n)yield e(n)}get(t,e=0){p("Not implemented")}getter(t){p("Not implemented")}objects(t){p("Not implemented")}object(t){p("Not implemented")}[Symbol.iterator](){p("Not implemented")}print(t={}){f(t)?t={limit:t}:null==t.limit&&(t.limit=10);const e=this.objects({...t,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${e.length} rows.`;console.log(i),console.table(e)}indices(t=!0){if(this._index)return this._index;const e=this.numRows(),i=new Uint32Array(e),n=this.isOrdered(),r=this.mask();let s=-1;if(r)for(let a=r.next(0);a>=0;a=r.next(a+1))i[++s]=a;else for(let a=0;a<e;++a)i[++s]=a;if(t&&n){const t=this._order,e=this._data;i.sort((i,n)=>t(i,n,e))}return!t&&n||(this._index=i),i}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:e,size:i}=this._group,n=m(i,()=>[]),r=this._index,s=this.mask(),a=this.numRows();if(r&&this.isOrdered())for(let o,c=0;c<a;++c)o=r[c],n[e[o]].push(o);else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))n[e[o]].push(o);else for(let o=0;o<a;++o)n[e[o]].push(o);if(t&&!r&&this.isOrdered()){const t=this._order,e=this._data;for(let r=0;r<i;++r)n[r].sort((i,n)=>t(i,n,e))}return!t&&this.isOrdered()||(this._partitions=n),n}scan(t,e,i=1/0,n=0){const r=this._mask,s=this._nrows,a=this._data;let o=n||0;if(o>s)return;const c=Math.min(s,o+i),h=()=>o=this._total;if(e&&this.isOrdered()||r&&this._index){const e=this.indices(),i=this._data;for(;o<c;++o)t(e[o],i,h)}else if(r){let e=c-o+1;for(o=r.nth(o);--e&&o>-1;o=r.next(o+1))t(o,a,h)}else for(;o<c;++o)t(o,a,h)}slice(t=0,e=1/0){if(this.isGrouped())return super.slice(t,e);const i=[],n=this.numRows();return t=Math.max(0,t+(t<0?n:0)),e=Math.min(n,Math.max(0,e+(e<0?n:0))),this.scan(t=>i.push(t),!0,e-t,t),this.reify(i)}reduce(t){return this.__reduce(this,t)}}class b{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}}let _=function(t){return t&&g(t.get)?t:new b(t)};var v=function(t){return t instanceof Date},x=function(t){return t===Object(t)},w=function(t){return t instanceof RegExp},S=function(t){return"string"===typeof t},I=function(t,e){const i=e=>p("Illegal argument type: "+(e||typeof t));return t instanceof Map?A(t.entries(),e):v(t)?i("Date"):w(t)?i("RegExp"):S(t)?i():c(t)?k(t,e):g(t[Symbol.iterator])?T(t,e):x(t)?A(Object.entries(t),e):i()};function A(t,e=["key","value"]){const i=[],n=[];for(const[s,a]of t)i.push(s),n.push(a);const r={};return e[0]&&(r[e[0]]=i),e[1]&&(r[e[1]]=n),r}function k(t,e){const i=t.length,n={},r=t=>n[t]=Array(i);if(i){e=e||Object.keys(t[0]);const n=e.map(r),s=n.length;for(let r=0;r<i;++r){const i=t[r];for(let t=0;t<s;++t)n[t][r]=i[e[t]]}}else e&&e.forEach(r);return n}function T(t,e){const i={},n=t=>i[t]=[];let r,s;for(const a of t){r||(e=e||Object.keys(a),r=e.map(n),s=r.length);for(let t=0;t<s;++t)r[t].push(a[e[t]])}return!r&&e&&e.forEach(n),i}const{hasOwnProperty:M}=Object.prototype;var O=function(t,e){return M.call(t,e)},E=function(t){return t?new C({...t.data()},t.columnNames()):new C};class C{constructor(t,e){this.data=t||{},this.names=e||[]}add(t,e){return this.has(t)||this.names.push(t+""),this.data[t]=e}has(t){return O(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}var D=void 0;const B=Object.getPrototypeOf(Int8Array);var L=function(t){return t instanceof B};function P(t){return c(t)||L(t)}var F=function(t){return null!=t&&t===t};const N=t=>P(t)||S(t);var R={compact:t=>P(t)?t.filter(t=>F(t)):t,concat:(...t)=>[].concat(...t),includes:(t,e,i)=>!!N(t)&&t.includes(e,i),indexof:(t,e)=>N(t)?t.indexOf(e):-1,join:(t,e)=>P(t)?t.join(e):D,lastindexof:(t,e)=>N(t)?t.lastIndexOf(e):-1,length:t=>N(t)?t.length:0,pluck:(t,e)=>P(t)?t.map(t=>F(t)?t[e]:D):D,reverse:t=>P(t)?t.slice().reverse():S(t)?t.split("").reverse().join(""):D,slice:(t,e,i)=>N(t)?t.slice(e,i):D},U=function(t,e,i,n,r){return null==t?null:t<e?-1/0:t>i?1/0:(t=Math.max(e,Math.min(t,i)),e+n*Math.floor(1e-14+(t-e)/n+(r||0)))},V=function(t,e,i="0"){const n=t+"",r=n.length;return r<e?Array(e-r+1).join(i)+n:n};const j=t=>(t<10?"0":"")+t,z=t=>t<0?"-"+V(-t,6):t>9999?"+"+V(t,6):V(t,4);function W(t,e,i,n,r,s,a,o,c){const h=o?"Z":"";return z(t)+"-"+j(e+1)+"-"+j(i)+(!c||a?"T"+j(n)+":"+j(r)+":"+j(s)+"."+V(a,3)+h:s?"T"+j(n)+":"+j(r)+":"+j(s)+h:r||n||!o?"T"+j(n)+":"+j(r)+h:"")}function $(t,e){return isNaN(t)?"Invalid Date":W(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function H(t,e){return isNaN(t)?"Invalid Date":W(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}const Y=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;var q=function(t){return t.match(Y)},G=function(t,e=Date.parse){return q(t)?e(t):t};const K=6e4,X=864e5,J=6048e5,Q=new Date,Z=new Date,tt=t=>(Q.setTime("string"===typeof t?G(t):t),Q);function et(t,e,i,n,r,s,a){return arguments.length?new Date(t,e||0,null==i?1:i,n||0,r||0,s||0,a||0):new Date(Date.now())}function it(t,e,i,n,r,s,a){return arguments.length?new Date(Date.UTC(t,e||0,null==i?1:i,n||0,r||0,s||0,a||0)):new Date(Date.now())}function nt(t){Z.setTime(+t),Z.setHours(0,0,0,0),Q.setTime(+Z),Q.setMonth(0),Q.setDate(1);const e=(Z.getTimezoneOffset()-Q.getTimezoneOffset())*K;return Math.floor(1+(Z-Q-e)/X)}function rt(t){Z.setTime(+t),Z.setUTCHours(0,0,0,0);const e=Date.UTC(Z.getUTCFullYear(),0,1);return Math.floor(1+(Z-e)/X)}function st(t,e){const i=e||0;Z.setTime(+t),Z.setDate(Z.getDate()-(Z.getDay()+7-i)%7),Z.setHours(0,0,0,0),Q.setTime(+t),Q.setMonth(0),Q.setDate(1),Q.setDate(1-(Q.getDay()+7-i)%7),Q.setHours(0,0,0,0);const n=(Z.getTimezoneOffset()-Q.getTimezoneOffset())*K;return Math.floor((Z-Q+1-n)/J)}function at(t,e){const i=e||0;return Z.setTime(+t),Z.setUTCDate(Z.getUTCDate()-(Z.getUTCDay()+7-i)%7),Z.setUTCHours(0,0,0,0),Q.setTime(+t),Q.setUTCMonth(0),Q.setUTCDate(1),Q.setUTCDate(1-(Q.getUTCDay()+7-i)%7),Q.setUTCHours(0,0,0,0),Math.floor((Z-Q+1)/J)}var ot={format_date:(t,e)=>$(tt(t),!e),format_utcdate:(t,e)=>H(tt(t),!e),timestamp:t=>+tt(t),year:t=>tt(t).getFullYear(),quarter:t=>Math.floor(tt(t).getMonth()/3),month:t=>tt(t).getMonth(),date:t=>tt(t).getDate(),dayofweek:t=>tt(t).getDay(),hours:t=>tt(t).getHours(),minutes:t=>tt(t).getMinutes(),seconds:t=>tt(t).getSeconds(),milliseconds:t=>tt(t).getMilliseconds(),utcyear:t=>tt(t).getUTCFullYear(),utcquarter:t=>Math.floor(tt(t).getUTCMonth()/3),utcmonth:t=>tt(t).getUTCMonth(),utcdate:t=>tt(t).getUTCDate(),utcdayofweek:t=>tt(t).getUTCDay(),utchours:t=>tt(t).getUTCHours(),utcminutes:t=>tt(t).getUTCMinutes(),utcseconds:t=>tt(t).getUTCSeconds(),utcmilliseconds:t=>tt(t).getUTCMilliseconds(),datetime:et,dayofyear:nt,week:st,utcdatetime:it,utcdayofyear:rt,utcweek:at,now:Date.now};function ct(t,e){return null!=t&&null!=e&&t===t&&e===e&&(t===e||(v(t)||v(e)?+t===+e:w(t)&&w(e)?t+""===e+"":!(!x(t)||!x(e))&&ht(t,e)))}function ht(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return lt(t,e);const i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;if(i.sort(),n.sort(),!lt(i,n,(t,e)=>t===e))return!1;const r=i.length;for(let s=0;s<r;++s){const n=i[s];if(!ct(t[n],e[n]))return!1}return!0}function lt(t,e,i=ct){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;++r)if(!i(t[r],e[r]))return!1;return!0}var ut={parse_json:t=>JSON.parse(t),to_json:t=>JSON.stringify(t)};let dt=Math.random;function pt(){return dt()}var ft={random:pt,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh},gt=function(t){return t instanceof Map},mt=function(t){return t instanceof Set},yt=function(t){return gt(t)||mt(t)};function bt(t){return Array.from(t)}var _t={has:(t,e)=>yt(t)?t.has(e):null!=t&&O(t,e),keys:t=>gt(t)?bt(t.keys()):null!=t?Object.keys(t):[],values:t=>yt(t)?bt(t.values()):null!=t?Object.values(t):[],entries:t=>yt(t)?bt(t.entries()):null!=t?Object.entries(t):[],object:t=>t?Object.fromEntries(t):D},vt=function(t,e,i){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(O(e,t))return e[t];return void 0!==i?i:t},xt=function(t,e,i){let n=arguments.length;t=+t,e=+e,i=n<2?(e=t,t=0,1):n<3?1:+i,n=0|Math.max(0,Math.ceil((e-t)/i));const r=new Array(n);for(let s=0;s<n;++s)r[s]=t+s*i;return r},wt={parse_date:t=>null==t?t:new Date(t),parse_float:t=>null==t?t:Number.parseFloat(t),parse_int:(t,e)=>null==t?t:Number.parseInt(t,e),endswith:(t,e,i)=>null!=t&&String(t).endsWith(e,i),match:(t,e,i)=>{const n=null==t?t:String(t).match(e);return null==i||null==n?n:"number"===typeof i?n[i]:n.groups?n.groups[i]:null},normalize:(t,e)=>null==t?t:String(t).normalize(e),padend:(t,e,i)=>null==t?t:String(t).padEnd(e,i),padstart:(t,e,i)=>null==t?t:String(t).padStart(e,i),upper:t=>null==t?t:String(t).toUpperCase(),lower:t=>null==t?t:String(t).toLowerCase(),repeat:(t,e)=>null==t?t:String(t).repeat(e),replace:(t,e,i)=>null==t?t:String(t).replace(e,String(i)),substring:(t,e,i)=>null==t?t:String(t).substring(e,i),split:(t,e,i)=>null==t?[]:String(t).split(e,i),startswith:(t,e,i)=>null!=t&&String(t).startsWith(e,i),trim:t=>null==t?t:String(t).trim()},St={bin:U,equal:ct,recode:vt,sequence:xt,...R,...ot,...ut,...ft,..._t,...wt},It=function(t){return"bigint"===typeof t},At=function(t){return void 0===t?t+"":It(t)?t+"n":JSON.stringify(t)},kt=function(t,e=[],i=[]){return new Tt(t,h(e),h(i))};class Tt{constructor(t,e,i){this.name=t,this.fields=e,this.params=i}toString(){const t=[...this.fields.map(t=>`d[${At(t)}]`),...this.params.map(At)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}}const Mt=t=>kt("any",t),Ot=()=>kt("count"),Et=t=>kt("array_agg",t),Ct=t=>kt("array_agg_distinct",t),Dt=(t,e)=>kt("map_agg",[t,e]),Bt=(t,e)=>kt("object_agg",[t,e]),Lt=(t,e)=>kt("entries_agg",[t,e]);var Pt=function(t,e){t=yt(t)?t:new Set(t);let i=e,n=0;while(t.has(i))i=e+ ++n;return i};function Ft(t,e){if(!t||!e)return t;const{keys:i,rows:n,size:r}=t,s=new Int32Array(r);e.scan(t=>s[i[t]]=1);const a=s.reduce((t,e)=>t+e,0);if(a===r)return t;const o=Array(a);let c=0;for(let l=0;l<r;++l)s[l]&&(o[s[l]=c++]=n[l]);const h=new Uint32Array(i.length);return e.scan(t=>h[t]=s[i[t]]),{...t,keys:h,rows:o,size:c}}function Nt(t,e,i,n){const{keys:r,rows:s,size:a}=t;let o=s,c=a,h=null;if(i){h=new Int32Array(a),e(t=>h[r[t]]=1);const t=h.reduce((t,e)=>t+e,0);if(t!==a){o=Array(t),c=0;for(let t=0;t<a;++t)h[t]&&(o[h[t]=c++]=s[t])}}let l=-1;const u=new Uint32Array(n),d=c!==a?t=>u[++l]=h[r[t]]:t=>u[++l]=r[t];return e(d),{...t,keys:u,rows:o,size:c}}function Rt(t,e,i,n){const r="map"===n||!0===n?Dt:"entries"===n?Lt:"object"===n?Bt:p('groups option must be "map", "entries", or "object".'),{names:s}=t.groups(),a=Pt(t.columnNames(),"_");let o=t.select().reify(e).create({data:{[a]:i}}).rollup({[a]:Et(a)});for(let c=s.length;--c>=0;)o=o.groupby(s.slice(0,c)).rollup({[a]:r(s[c],a)});return o.get(a)}const Ut="ArrayPattern",Vt="ArrowFunctionExpression",jt="FunctionExpression",zt="Identifier",Wt="Literal",$t="MemberExpression",Ht="ObjectExpression",Yt="ObjectPattern",qt="Property",Gt="Column",Kt="Constant",Xt="Dictionary",Jt="Function",Qt="Parameter",Zt="Op",te=(t,e)=>{const i=oe[t.type];return i?i(t,e):p("Unsupported expression construct: "+t.type)},ee=(t,e)=>"("+te(t.left,e)+" "+t.operator+" "+te(t.right,e)+")",ie=(t,e)=>"("+re(t.params,e)+")=>"+te(t.body,e),ne=(t,e)=>te(t.callee,e)+"("+re(t.arguments,e)+")",re=(t,e,i=",")=>t.map(t=>te(t,e)).join(i),se=t=>t.computed?`[${At(t.name)}]`:"."+t.name,ae=(t,e,i)=>{const n=t.table||"";return`data${n}${se(t)}.${i}(${e.index}${n})`},oe={Constant:t=>t.raw,Column:(t,e)=>ae(t,e,"get"),Dictionary:(t,e)=>ae(t,e,"key"),Function:t=>"fn."+t.name,Parameter:t=>"$"+se(t),Op:(t,e)=>`op(${At(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:i,expressions:n}=t,r=n.length;let s=i[0].value.raw;for(let a=0;a<r;)s+="${"+te(n[a],e)+"}"+i[++a].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const i=!t.computed,n=te(t.object,e),r=te(t.property,e);return n+(i?"."+r:"["+r+"]")},CallExpression:ne,NewExpression:(t,e)=>"new "+ne(t,e),ArrayExpression:(t,e)=>"["+re(t.elements,e)+"]",AssignmentExpression:ee,BinaryExpression:ee,LogicalExpression:ee,UnaryExpression:(t,e)=>"("+t.operator+te(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+te(t.test,e)+"?"+te(t.consequent,e)+":"+te(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+re(t.properties,e)+"})",Property:(t,e)=>{const i=te(t.key,e);return(t.computed?`[${i}]`:i)+":"+te(t.value,e)},ArrowFunctionExpression:ie,FunctionExpression:ie,FunctionDeclaration:ie,ArrayPattern:(t,e)=>"["+re(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+re(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+re(t.declarations,e,","),VariableDeclarator:(t,e)=>te(t.id,e)+"="+te(t.init,e),SpreadElement:(t,e)=>"..."+te(t.argument,e),BlockStatement:(t,e)=>"{"+re(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>te(t.expression,e),IfStatement:(t,e)=>"if ("+te(t.test,e)+")"+te(t.consequent,e)+(t.alternate?" else "+te(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+te(t.discriminant,e)+") {"+re(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+te(t.test,e):"default")+": "+re(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+te(t.argument,e),Program:(t,e)=>te(t.body[0],e)};var ce=function(t,e={index:"row"}){return te(t,e)},he=function(t,e,i=15,n=!0,r=0,s){const a=10,o=Math.LN10;if(null==s){const n=Math.ceil(Math.log(i)/o),c=e-t||Math.abs(t)||1,h=[5,2];s=Math.max(r,Math.pow(a,Math.round(Math.log(c)/o)-n));while(Math.ceil(c/s)>i)s*=a;const l=h.length;for(let t=0;t<l;++t){const e=s/h[t];e>=r&&c/e<=i&&(s=e)}}if(n){let i=Math.log(s);const n=i>=0?0:1+~~(-i/o),r=Math.pow(a,-n-1);i=Math.floor(t/s+r)*s,t=t<i?i-s:i,e=Math.ceil(e/s)*s}return[t,e===t?t+s:e,s]};function le(t){const e=typeof t;return"string"===e?`"${t}"`:"object"===e&&t?v(t)?+t:c(t)||L(t)?`[${t.map(le)}]`:w(t)?t+"":ue(t):t}function ue(t){let e="{",i=-1;for(const n in t)++i>0&&(e+=","),e+=`"${n}":${le(t[n])}`;return e+="}",e}var de=function(t,e){const i=t.length;return 1===i?(e,i)=>le(t[0](e,i)):(n,r)=>{let s="";for(let a=0;a<i;++a){a>0&&(s+="|");const i=t[a](n,r);if(e&&(null==i||i!==i))return null;s+=le(i)}return s}},pe=function(){const t=new Map;return{count(){return t.size},values(){return Array.from(t.values(),t=>t.v)},increment(e){const i=le(e),n=t.get(i);n?++n.n:t.set(i,{v:e,n:1})},decrement(e){const i=le(e),n=t.get(i);1===n.n?t.delete(i):--n.n},forEach(e){t.forEach(({v:t,n:i})=>e(t,i))}}},fe=function(){},ge=function(t,e=0,i=t.length){let n=t[e++];for(let r=e;r<i;++r)n*=t[r];return n};function me(t){return t.init=t.init||fe,t.add=t.add||fe,t.rem=t.rem||fe,t}function ye(t,e){return t.product_v=!1,t.product=e}var be={count:{create:()=>me({value:t=>t.count}),param:[]},array_agg:{create:()=>me({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[1]},object_agg:{create:()=>me({init:t=>t.values=!0,value:t=>Object.fromEntries(t.list.values())}),param:[2]},map_agg:{create:()=>me({init:t=>t.values=!0,value:t=>new Map(t.list.values())}),param:[2]},entries_agg:{create:()=>me({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[2]},any:{create:()=>me({add:(t,e)=>{null==t.any&&(t.any=e)},value:t=>t.valid?t.any:D}),param:[1]},valid:{create:()=>me({value:t=>t.valid}),param:[1]},invalid:{create:()=>me({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=pe(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},array_agg_distinct:{create:()=>me({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>me({value:t=>{let e=D,i=0;return t.distinct.forEach((t,n)=>{n>i&&(i=n,e=t)}),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:D,add:(t,e)=>It(e)?0===t.sum?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>ye(t,1),value:t=>t.valid?t.product_v?ye(t,ge(t.list.values())):t.product:void 0,add:(t,e)=>It(e)&&1===t.product?t.product=e:t.product*=e,rem:(t,e)=>0==e||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:D,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>me({value:t=>t.valid?t.mean:D}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):D,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>me({value:t=>t.valid>1?t.dev/t.valid:D}),param:[1],req:["variance"]},stdev:{create:()=>me({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):D}),param:[1],req:["variance"]},stdevp:{create:()=>me({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):D}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=D,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===D)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:t=>t.max=D,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===D)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:t=>me({value:e=>e.list.quantile(t)}),param:[1,1],req:["array_agg"]},median:{create:()=>me({value:t=>t.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):D,add:(t,e,i)=>{const n=e-t.mean_x,r=i-t.mean_y;t.mean_x+=n/t.valid,t.mean_y+=r/t.valid;const s=i-t.mean_y;t.dev_x+=n*(e-t.mean_x),t.dev_y+=r*s,t.cov+=n*s},rem:(t,e,i)=>{const n=e-t.mean_x,r=i-t.mean_y;t.mean_x-=t.valid?n/t.valid:t.mean_x,t.mean_y-=t.valid?r/t.valid:t.mean_y;const s=i-t.mean_y;t.dev_x-=n*(e-t.mean_x),t.dev_y-=r*s,t.cov-=n*s}}),param:[2]},covariancep:{create:()=>me({value:t=>t.valid>1?t.cov/t.valid:D}),param:[2],req:["covariance"]},corr:{create:()=>me({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):D}),param:[2],req:["covariance"]},bins:{create:(t,e,i,n)=>me({value:r=>he(r.min,r.max,t,e,i,n)}),param:[1,4],req:["min","max"]}};const _e={create(){let t;return{init:()=>t=1,value:e=>{const i=e.index;return i&&!e.peer(i)?t=i+1:t}}},param:[]},ve={create(){let t;return{init:()=>t=0,value:e=>{const{index:i,peer:n,size:r}=e;let s=i;if(t<s){while(s+1<r&&n(s+1))++s;t=s}return(1+t)/r}}},param:[]};var xe={row_number:{create(){return{init:fe,value:t=>t.index+1}},param:[]},rank:_e,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:i=>{const n=i.index;if(n>=t){for(e=t=n+1;i.peer(t);e+=++t);e/=t-n}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const i=e.index;return i&&!e.peer(i)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=_e.create();return{init:t,value:t=>(e(t)-1)/(t.size-1)}},param:[]},cume_dist:ve,ntile:{create(t){t=+t,t>0||p("ntile num must be greater than zero.");const{init:e,value:i}=ve.create();return{init:e,value:e=>Math.ceil(t*i(e))}},param:[0,1]},lag:{create(t,e=D){return t=+t||1,{init:fe,value:(i,n)=>{const r=i.index-t;return r>=0?i.value(r,n):e}}},param:[1,2]},lead:{create(t,e=D){return t=+t||1,{init:fe,value:(i,n)=>{const r=i.index+t;return r<i.size?i.value(r,n):e}}},param:[1,2]},first_value:{create(){return{init:fe,value:(t,e)=>t.value(t.i0,e)}},param:[1]},last_value:{create(){return{init:fe,value:(t,e)=>t.value(t.i1-1,e)}},param:[1]},nth_value:{create(t){return t=+t,t>0||p("nth_value nth must be greater than zero."),{init:fe,value:(e,i)=>{const n=e.i0+(t-1);return n<e.i1?e.value(n,i):D}}},param:[1,1]},fill_down:{create(t=D){let e;return{init:()=>e=t,value:(t,i)=>{const n=t.value(t.index,i);return F(n)?e=n:e}}},param:[1,1]},fill_up:{create(t=D){let e,i;return{init:()=>(e=t,i=-1),value:(n,r)=>n.index<=i?e:(i=we(n,r,n.index))>=0?e=n.value(i,r):(i=n.size,e=t)}},param:[1,1]}};function we(t,e,i){for(const n=t.size;i<n;++i)if(F(t.value(i,e)))return i;return-1}function Se(t){return O(be,t)}function Ie(t){return O(xe,t)}function Ae(t){return O(St,t)||"row_object"===t}function ke(t){return Se(t)&&be[t]}function Te(t){return Ie(t)&&xe[t]}function Me(t,e,i){return t=`"use strict"; return ${t};`,Function("fn","$",t)(e,i)}var Oe={escape:(t,e,i)=>Me(t,e,i),expr:(t,e)=>Me("(row,data,op)=>"+t,St,e),expr2:(t,e)=>Me("(row0,data0,row,data)=>"+t,St,e),join:(t,e)=>Me("(row1,data1,row2,data2)=>"+t,St,e),param:(t,e)=>Me(t,St,e)};const Ee={"==":1,"!=":1,"===":1,"!==":1};var Ce=function(t,e,i=0,n,r){if(t.type=Gt,t.name=e,t.table=i,r&&n&&g(n.keyFor)){const e=Ee[r.operator]?r.left===t?r.right:r.left:r.callee&&"equal"===r.callee.name?r.arguments[r.arguments[0]===t?1:0]:null;e&&e.type===Wt&&De(r,t,e,n.keyFor(e.value))}return t};function De(t,e,i,n){return n<0?(t.type=Wt,t.value=!1,t.raw="false"):(e.type=Xt,i.value=n,i.raw=n+""),!0}var Be=function(t){return c(t)?t:gt(t)?t.entries():t?Object.entries(t):[]};const Le="row_object";function Pe(t,e){t.type=Ht;const i=t.properties=[];for(const n of Be(e)){const[t,e]=c(n)?n:[n,n];i.push({type:qt,key:{type:Wt,raw:At(e)},value:Ce({computed:!0},t)})}return t}function Fe(t){return ce(Pe({},t))}function Ne(t){return Oe.expr(Fe(t))}var Re,Ue,Ve=i("6bfb");class je{}je.prototype.data=null,function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["V1"]=0]="V1",t[t["V2"]=1]="V2",t[t["V3"]=2]="V3",t[t["V4"]=3]="V4"})(e=t.MetadataVersion||(t.MetadataVersion={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["Sparse"]=0]="Sparse",t[t["Dense"]=1]="Dense"})(e=t.UnionMode||(t.UnionMode={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["HALF"]=0]="HALF",t[t["SINGLE"]=1]="SINGLE",t[t["DOUBLE"]=2]="DOUBLE"})(e=t.Precision||(t.Precision={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["DAY"]=0]="DAY",t[t["MILLISECOND"]=1]="MILLISECOND"})(e=t.DateUnit||(t.DateUnit={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["SECOND"]=0]="SECOND",t[t["MILLISECOND"]=1]="MILLISECOND",t[t["MICROSECOND"]=2]="MICROSECOND",t[t["NANOSECOND"]=3]="NANOSECOND"})(e=t.TimeUnit||(t.TimeUnit={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["YEAR_MONTH"]=0]="YEAR_MONTH",t[t["DAY_TIME"]=1]="DAY_TIME"})(e=t.IntervalUnit||(t.IntervalUnit={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["NONE"]=0]="NONE",t[t["Null"]=1]="Null",t[t["Int"]=2]="Int",t[t["FloatingPoint"]=3]="FloatingPoint",t[t["Binary"]=4]="Binary",t[t["Utf8"]=5]="Utf8",t[t["Bool"]=6]="Bool",t[t["Decimal"]=7]="Decimal",t[t["Date"]=8]="Date",t[t["Time"]=9]="Time",t[t["Timestamp"]=10]="Timestamp",t[t["Interval"]=11]="Interval",t[t["List"]=12]="List",t[t["Struct_"]=13]="Struct_",t[t["Union"]=14]="Union",t[t["FixedSizeBinary"]=15]="FixedSizeBinary",t[t["FixedSizeList"]=16]="FixedSizeList",t[t["Map"]=17]="Map",t[t["Duration"]=18]="Duration",t[t["LargeBinary"]=19]="LargeBinary",t[t["LargeUtf8"]=20]="LargeUtf8",t[t["LargeList"]=21]="LargeList"})(e=t.Type||(t.Type={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["Little"]=0]="Little",t[t["Big"]=1]="Big"})(e=t.Endianness||(t.Endianness={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){let e=t.endObject();return e}static createNull(t){return e.startNull(t),e.endNull(t)}}t.Null=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){let e=t.endObject();return e}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}}t.Struct_=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){let e=t.endObject();return e}static createList(t){return e.startList(t),e.endList(t)}}t.List=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeList(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeList(t){t.startObject(0)}static endLargeList(t){let e=t.endObject();return e}static createLargeList(t){return e.startLargeList(t),e.endLargeList(t)}}t.LargeList=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){let e=t.endObject();return e}static createFixedSizeList(t,i){return e.startFixedSizeList(t),e.addListSize(t,i),e.endFixedSizeList(t)}}t.FixedSizeList=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){let e=t.endObject();return e}static createMap(t,i){return e.startMap(t),e.addKeysSorted(t,i),e.endMap(t)}}t.Map=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}mode(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.UnionMode.Sparse}typeIds(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(e,i){e.addFieldInt16(0,i,t.apache.arrow.flatbuf.UnionMode.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addInt32(e[i]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){let e=t.endObject();return e}static createUnion(t,e,n){return i.startUnion(t),i.addMode(t,e),i.addTypeIds(t,n),i.endUnion(t)}}e.Union=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){let e=t.endObject();return e}static createInt(t,i,n){return e.startInt(t),e.addBitWidth(t,i),e.addIsSigned(t,n),e.endInt(t)}}t.Int=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Precision.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(e,i){e.addFieldInt16(0,i,t.apache.arrow.flatbuf.Precision.HALF)}static endFloatingPoint(t){let e=t.endObject();return e}static createFloatingPoint(t,e){return i.startFloatingPoint(t),i.addPrecision(t,e),i.endFloatingPoint(t)}}e.FloatingPoint=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){let e=t.endObject();return e}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}}t.Utf8=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){let e=t.endObject();return e}static createBinary(t){return e.startBinary(t),e.endBinary(t)}}t.Binary=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeUtf8(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){let e=t.endObject();return e}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}}t.LargeUtf8=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeBinary(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){let e=t.endObject();return e}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}}t.LargeBinary=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){let e=t.endObject();return e}static createFixedSizeBinary(t,i){return e.startFixedSizeBinary(t),e.addByteWidth(t,i),e.endFixedSizeBinary(t)}}t.FixedSizeBinary=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){let e=t.endObject();return e}static createBool(t){return e.startBool(t),e.endBool(t)}}t.Bool=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}static startDecimal(t){t.startObject(2)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static endDecimal(t){let e=t.endObject();return e}static createDecimal(t,i,n){return e.startDecimal(t),e.addPrecision(t,i),e.addScale(t,n),e.endDecimal(t)}}t.Decimal=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.DateUnit.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(e,i){e.addFieldInt16(0,i,t.apache.arrow.flatbuf.DateUnit.MILLISECOND)}static endDate(t){let e=t.endObject();return e}static createDate(t,e){return i.startDate(t),i.addUnit(t,e),i.endDate(t)}}e.Date=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(e,i){e.addFieldInt16(0,i,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){let e=t.endObject();return e}static createTime(t,e,n){return i.startTime(t),i.addUnit(t,e),i.addBitWidth(t,n),i.endTime(t)}}e.Time=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.SECOND}timezone(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(e,i){e.addFieldInt16(0,i,t.apache.arrow.flatbuf.TimeUnit.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){let e=t.endObject();return e}static createTimestamp(t,e,n){return i.startTimestamp(t),i.addUnit(t,e),i.addTimezone(t,n),i.endTimestamp(t)}}e.Timestamp=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(e,i){e.addFieldInt16(0,i,t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)}static endInterval(t){let e=t.endObject();return e}static createInterval(t,e){return i.startInterval(t),i.addUnit(t,e),i.endInterval(t)}}e.Interval=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDuration(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(e,i){e.addFieldInt16(0,i,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static endDuration(t){let e=t.endObject();return e}static createDuration(t,e){return i.startDuration(t),i.addUnit(t,e),i.endDuration(t)}}e.Duration=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,i){return(i||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){let e=t.endObject();return e}static createKeyValue(t,i,n){return e.startKeyValue(t),e.addKey(t,i),e.addValue(t,n),e.endKeyValue(t)}}t.KeyValue=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(e){let i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryEncoding(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryEncoding(t){let e=t.endObject();return e}static createDictionaryEncoding(t,e,n,r){return i.startDictionaryEncoding(t),i.addId(t,e),i.addIndexType(t,n),i.addIsOrdered(t,r),i.endDictionaryEncoding(t)}}e.DictionaryEncoding=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.Type.NONE}type(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(e){let i=this.bb.__offset(this.bb_pos,12);return i?(e||new t.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}children(e,i){let n=this.bb.__offset(this.bb_pos,14);return n?(i||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,i){let n=this.bb.__offset(this.bb_pos,16);return n?(i||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(e,i){e.addFieldInt8(2,i,t.apache.arrow.flatbuf.Type.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){let e=t.endObject();return e}static createField(t,e,n,r,s,a,o,c){return i.startField(t),i.addName(t,e),i.addNullable(t,n),i.addTypeType(t,r),i.addType(t,s),i.addDictionary(t,a),i.addChildren(t,o),i.addCustomMetadata(t,c),i.endField(t)}}e.Field=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(t,e,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(e),t.offset()}}t.Buffer=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Endianness.Little}fields(e,i){let n=this.bb.__offset(this.bb_pos,6);return n?(i||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,i){let n=this.bb.__offset(this.bb_pos,8);return n?(i||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(3)}static addEndianness(e,i){e.addFieldInt16(0,i,t.apache.arrow.flatbuf.Endianness.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endSchema(t){let e=t.endObject();return e}static finishSchemaBuffer(t,e){t.finish(e)}static createSchema(t,e,n,r){return i.startSchema(t),i.addEndianness(t,e),i.addFields(t,n),i.addCustomMetadata(t,r),i.endSchema(t)}}e.Schema=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Re||(Re={})),function(t){(function(t){(function(t){(function(t){t.Schema=Re.apache.arrow.flatbuf.Schema})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Ue||(Ue={})),function(t){(function(t){(function(t){(function(t){let e;(function(t){t[t["NONE"]=0]="NONE",t[t["Schema"]=1]="Schema",t[t["DictionaryBatch"]=2]="DictionaryBatch",t[t["RecordBatch"]=3]="RecordBatch",t[t["Tensor"]=4]="Tensor",t[t["SparseTensor"]=5]="SparseTensor"})(e=t.MessageHeader||(t.MessageHeader={}))})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Ue||(Ue={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(t,e,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(e),t.offset()}}t.FieldNode=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Ue||(Ue={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(e,i){let n=this.bb.__offset(this.bb_pos,6);return n?(i||new t.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+n)+16*e,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){let i=this.bb.__offset(this.bb_pos,8);return i?(e||new Re.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+i)+16*t,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRecordBatch(t){t.startObject(3)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static endRecordBatch(t){let e=t.endObject();return e}static createRecordBatch(t,e,n,r){return i.startRecordBatch(t),i.addLength(t,e),i.addNodes(t,n),i.addBuffers(t,r),i.endRecordBatch(t)}}e.RecordBatch=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Ue||(Ue={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(e){let i=this.bb.__offset(this.bb_pos,6);return i?(e||new t.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){let e=t.endObject();return e}static createDictionaryBatch(t,e,n,r){return i.startDictionaryBatch(t),i.addId(t,e),i.addData(t,n),i.addIsDelta(t,r),i.endDictionaryBatch(t)}}e.DictionaryBatch=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Ue||(Ue={})),function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Re.apache.arrow.flatbuf.MetadataVersion.V1}headerType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.MessageHeader.NONE}header(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){let i=this.bb.__offset(this.bb_pos,12);return i?(e||new Re.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*t),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,Re.apache.arrow.flatbuf.MetadataVersion.V1)}static addHeaderType(e,i){e.addFieldInt8(1,i,t.apache.arrow.flatbuf.MessageHeader.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let i=e.length-1;i>=0;i--)t.addOffset(e[i]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){let e=t.endObject();return e}static finishMessageBuffer(t,e){t.finish(e)}static createMessage(t,e,n,r,s,a){return i.startMessage(t),i.addVersion(t,e),i.addHeaderType(t,n),i.addHeader(t,r),i.addBodyLength(t,s),i.addCustomMetadata(t,a),i.endMessage(t)}}e.Message=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Ue||(Ue={}));Re.apache.arrow.flatbuf.Type;var ze,We,$e=Re.apache.arrow.flatbuf.DateUnit,He=Re.apache.arrow.flatbuf.TimeUnit,Ye=Re.apache.arrow.flatbuf.Precision,qe=Re.apache.arrow.flatbuf.UnionMode,Ge=Re.apache.arrow.flatbuf.IntervalUnit,Ke=Ue.apache.arrow.flatbuf.MessageHeader,Xe=Re.apache.arrow.flatbuf.MetadataVersion;function Je(t,e,i,n){return 0!==(i&1<<n)}function Qe(t,e,i,n){return(i&1<<n)>>n}function Ze(t,e,i){return i?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1}function ti(t,e,i){const n=i.byteLength+7&-8;if(t>0||i.byteLength<n){const r=new Uint8Array(n);return r.set(t%8===0?i.subarray(t>>3):ei(ii(i,t,e,null,Je)).subarray(0,n)),r}return i}function ei(t){let e=[],i=0,n=0,r=0;for(const a of t)a&&(r|=1<<n),8===++n&&(e[i++]=r,r=n=0);(0===i||n>0)&&(e[i++]=r);let s=new Uint8Array(e.length+7&-8);return s.set(e),s}function*ii(t,e,i,n,r){let s=e%8,a=e>>3,o=0,c=i;for(;c>0;s=0){let e=t[a++];do{yield r(n,o++,e,s)}while(--c>0&&++s<8)}}function ni(t,e,i){if(i-e<=0)return 0;if(i-e<8){let n=0;for(const r of ii(t,e,i-e,t,Qe))n+=r;return n}const n=i>>3<<3,r=e+(e%8===0?0:8-e%8);return ni(t,e,r)+ni(t,n,i)+ri(t,r>>3,n-r>>3)}function ri(t,e,i){let n=0,r=0|e;const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===i?t.byteLength:r+i;while(a-r>=4)n+=si(s.getUint32(r)),r+=4;while(a-r>=2)n+=si(s.getUint16(r)),r+=2;while(a-r>=1)n+=si(s.getUint8(r)),r+=1;return n}function si(t){let e=0|t;return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}(function(t){t[t["NONE"]=0]="NONE",t[t["Null"]=1]="Null",t[t["Int"]=2]="Int",t[t["Float"]=3]="Float",t[t["Binary"]=4]="Binary",t[t["Utf8"]=5]="Utf8",t[t["Bool"]=6]="Bool",t[t["Decimal"]=7]="Decimal",t[t["Date"]=8]="Date",t[t["Time"]=9]="Time",t[t["Timestamp"]=10]="Timestamp",t[t["Interval"]=11]="Interval",t[t["List"]=12]="List",t[t["Struct"]=13]="Struct",t[t["Union"]=14]="Union",t[t["FixedSizeBinary"]=15]="FixedSizeBinary",t[t["FixedSizeList"]=16]="FixedSizeList",t[t["Map"]=17]="Map",t[t["Dictionary"]=-1]="Dictionary",t[t["Int8"]=-2]="Int8",t[t["Int16"]=-3]="Int16",t[t["Int32"]=-4]="Int32",t[t["Int64"]=-5]="Int64",t[t["Uint8"]=-6]="Uint8",t[t["Uint16"]=-7]="Uint16",t[t["Uint32"]=-8]="Uint32",t[t["Uint64"]=-9]="Uint64",t[t["Float16"]=-10]="Float16",t[t["Float32"]=-11]="Float32",t[t["Float64"]=-12]="Float64",t[t["DateDay"]=-13]="DateDay",t[t["DateMillisecond"]=-14]="DateMillisecond",t[t["TimestampSecond"]=-15]="TimestampSecond",t[t["TimestampMillisecond"]=-16]="TimestampMillisecond",t[t["TimestampMicrosecond"]=-17]="TimestampMicrosecond",t[t["TimestampNanosecond"]=-18]="TimestampNanosecond",t[t["TimeSecond"]=-19]="TimeSecond",t[t["TimeMillisecond"]=-20]="TimeMillisecond",t[t["TimeMicrosecond"]=-21]="TimeMicrosecond",t[t["TimeNanosecond"]=-22]="TimeNanosecond",t[t["DenseUnion"]=-23]="DenseUnion",t[t["SparseUnion"]=-24]="SparseUnion",t[t["IntervalDayTime"]=-25]="IntervalDayTime",t[t["IntervalYearMonth"]=-26]="IntervalYearMonth"})(ze||(ze={})),function(t){t[t["OFFSET"]=0]="OFFSET",t[t["DATA"]=1]="DATA",t[t["VALIDITY"]=2]="VALIDITY",t[t["TYPE"]=3]="TYPE"}(We||(We={}));class ai{visitMany(t,...e){return t.map((t,i)=>this.visit(t,...e.map(t=>t[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return oi(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function oi(t,e,i=!0){let n=null,r=ze.NONE;switch(e instanceof gn||e instanceof je?r=ci(e.type):e instanceof ki?r=ci(e):"number"!==typeof(r=e)&&(r=ze[e]),r){case ze.Null:n=t.visitNull;break;case ze.Bool:n=t.visitBool;break;case ze.Int:n=t.visitInt;break;case ze.Int8:n=t.visitInt8||t.visitInt;break;case ze.Int16:n=t.visitInt16||t.visitInt;break;case ze.Int32:n=t.visitInt32||t.visitInt;break;case ze.Int64:n=t.visitInt64||t.visitInt;break;case ze.Uint8:n=t.visitUint8||t.visitInt;break;case ze.Uint16:n=t.visitUint16||t.visitInt;break;case ze.Uint32:n=t.visitUint32||t.visitInt;break;case ze.Uint64:n=t.visitUint64||t.visitInt;break;case ze.Float:n=t.visitFloat;break;case ze.Float16:n=t.visitFloat16||t.visitFloat;break;case ze.Float32:n=t.visitFloat32||t.visitFloat;break;case ze.Float64:n=t.visitFloat64||t.visitFloat;break;case ze.Utf8:n=t.visitUtf8;break;case ze.Binary:n=t.visitBinary;break;case ze.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case ze.Date:n=t.visitDate;break;case ze.DateDay:n=t.visitDateDay||t.visitDate;break;case ze.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case ze.Timestamp:n=t.visitTimestamp;break;case ze.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case ze.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case ze.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case ze.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case ze.Time:n=t.visitTime;break;case ze.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case ze.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case ze.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case ze.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case ze.Decimal:n=t.visitDecimal;break;case ze.List:n=t.visitList;break;case ze.Struct:n=t.visitStruct;break;case ze.Union:n=t.visitUnion;break;case ze.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case ze.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case ze.Dictionary:n=t.visitDictionary;break;case ze.Interval:n=t.visitInterval;break;case ze.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case ze.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case ze.FixedSizeList:n=t.visitFixedSizeList;break;case ze.Map:n=t.visitMap;break}if("function"===typeof n)return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${ze[r]}'`)}function ci(t){switch(t.typeId){case ze.Null:return ze.Null;case ze.Int:const{bitWidth:e,isSigned:i}=t;switch(e){case 8:return i?ze.Int8:ze.Uint8;case 16:return i?ze.Int16:ze.Uint16;case 32:return i?ze.Int32:ze.Uint32;case 64:return i?ze.Int64:ze.Uint64}return ze.Int;case ze.Float:switch(t.precision){case Ye.HALF:return ze.Float16;case Ye.SINGLE:return ze.Float32;case Ye.DOUBLE:return ze.Float64}return ze.Float;case ze.Binary:return ze.Binary;case ze.Utf8:return ze.Utf8;case ze.Bool:return ze.Bool;case ze.Decimal:return ze.Decimal;case ze.Time:switch(t.unit){case He.SECOND:return ze.TimeSecond;case He.MILLISECOND:return ze.TimeMillisecond;case He.MICROSECOND:return ze.TimeMicrosecond;case He.NANOSECOND:return ze.TimeNanosecond}return ze.Time;case ze.Timestamp:switch(t.unit){case He.SECOND:return ze.TimestampSecond;case He.MILLISECOND:return ze.TimestampMillisecond;case He.MICROSECOND:return ze.TimestampMicrosecond;case He.NANOSECOND:return ze.TimestampNanosecond}return ze.Timestamp;case ze.Date:switch(t.unit){case $e.DAY:return ze.DateDay;case $e.MILLISECOND:return ze.DateMillisecond}return ze.Date;case ze.Interval:switch(t.unit){case Ge.DAY_TIME:return ze.IntervalDayTime;case Ge.YEAR_MONTH:return ze.IntervalYearMonth}return ze.Interval;case ze.Map:return ze.Map;case ze.List:return ze.List;case ze.Struct:return ze.Struct;case ze.Union:switch(t.mode){case qe.Dense:return ze.DenseUnion;case qe.Sparse:return ze.SparseUnion}return ze.Union;case ze.FixedSizeBinary:return ze.FixedSizeBinary;case ze.FixedSizeList:return ze.FixedSizeList;case ze.Dictionary:return ze.Dictionary}throw new Error(`Unrecognized type '${ze[t.typeId]}'`)}ai.prototype.visitInt8=null,ai.prototype.visitInt16=null,ai.prototype.visitInt32=null,ai.prototype.visitInt64=null,ai.prototype.visitUint8=null,ai.prototype.visitUint16=null,ai.prototype.visitUint32=null,ai.prototype.visitUint64=null,ai.prototype.visitFloat16=null,ai.prototype.visitFloat32=null,ai.prototype.visitFloat64=null,ai.prototype.visitDateDay=null,ai.prototype.visitDateMillisecond=null,ai.prototype.visitTimestampSecond=null,ai.prototype.visitTimestampMillisecond=null,ai.prototype.visitTimestampMicrosecond=null,ai.prototype.visitTimestampNanosecond=null,ai.prototype.visitTimeSecond=null,ai.prototype.visitTimeMillisecond=null,ai.prototype.visitTimeMicrosecond=null,ai.prototype.visitTimeNanosecond=null,ai.prototype.visitDenseUnion=null,ai.prototype.visitSparseUnion=null,ai.prototype.visitIntervalDayTime=null,ai.prototype.visitIntervalYearMonth=null;class hi extends ai{compareSchemas(t,e){return t===e||e instanceof t.constructor&&Ai.compareFields(t.fields,e.fields)}compareFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((t,i)=>Ai.compareField(t,e[i]))}compareField(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&Ai.visit(t.type,e.type)}}function li(t,e){return e instanceof t.constructor}function ui(t,e){return t===e||li(t,e)}function di(t,e){return t===e||li(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function pi(t,e){return t===e||li(t,e)&&t.precision===e.precision}function fi(t,e){return t===e||li(t,e)&&t.byteWidth===e.byteWidth}function gi(t,e){return t===e||li(t,e)&&t.unit===e.unit}function mi(t,e){return t===e||li(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function yi(t,e){return t===e||li(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function bi(t,e){return t===e||li(t,e)&&t.children.length===e.children.length&&Ai.compareFields(t.children,e.children)}function _i(t,e){return t===e||li(t,e)&&t.children.length===e.children.length&&Ai.compareFields(t.children,e.children)}function vi(t,e){return t===e||li(t,e)&&t.mode===e.mode&&t.typeIds.every((t,i)=>t===e.typeIds[i])&&Ai.compareFields(t.children,e.children)}function xi(t,e){return t===e||li(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Ai.visit(t.indices,e.indices)&&Ai.visit(t.dictionary,e.dictionary)}function wi(t,e){return t===e||li(t,e)&&t.unit===e.unit}function Si(t,e){return t===e||li(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Ai.compareFields(t.children,e.children)}function Ii(t,e){return t===e||li(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Ai.compareFields(t.children,e.children)}hi.prototype.visitNull=ui,hi.prototype.visitBool=ui,hi.prototype.visitInt=di,hi.prototype.visitInt8=di,hi.prototype.visitInt16=di,hi.prototype.visitInt32=di,hi.prototype.visitInt64=di,hi.prototype.visitUint8=di,hi.prototype.visitUint16=di,hi.prototype.visitUint32=di,hi.prototype.visitUint64=di,hi.prototype.visitFloat=pi,hi.prototype.visitFloat16=pi,hi.prototype.visitFloat32=pi,hi.prototype.visitFloat64=pi,hi.prototype.visitUtf8=ui,hi.prototype.visitBinary=ui,hi.prototype.visitFixedSizeBinary=fi,hi.prototype.visitDate=gi,hi.prototype.visitDateDay=gi,hi.prototype.visitDateMillisecond=gi,hi.prototype.visitTimestamp=mi,hi.prototype.visitTimestampSecond=mi,hi.prototype.visitTimestampMillisecond=mi,hi.prototype.visitTimestampMicrosecond=mi,hi.prototype.visitTimestampNanosecond=mi,hi.prototype.visitTime=yi,hi.prototype.visitTimeSecond=yi,hi.prototype.visitTimeMillisecond=yi,hi.prototype.visitTimeMicrosecond=yi,hi.prototype.visitTimeNanosecond=yi,hi.prototype.visitDecimal=ui,hi.prototype.visitList=bi,hi.prototype.visitStruct=_i,hi.prototype.visitUnion=vi,hi.prototype.visitDenseUnion=vi,hi.prototype.visitSparseUnion=vi,hi.prototype.visitDictionary=xi,hi.prototype.visitInterval=wi,hi.prototype.visitIntervalDayTime=wi,hi.prototype.visitIntervalYearMonth=wi,hi.prototype.visitFixedSizeList=Si,hi.prototype.visitMap=Ii;const Ai=new hi;class ki{static isNull(t){return t&&t.typeId===ze.Null}static isInt(t){return t&&t.typeId===ze.Int}static isFloat(t){return t&&t.typeId===ze.Float}static isBinary(t){return t&&t.typeId===ze.Binary}static isUtf8(t){return t&&t.typeId===ze.Utf8}static isBool(t){return t&&t.typeId===ze.Bool}static isDecimal(t){return t&&t.typeId===ze.Decimal}static isDate(t){return t&&t.typeId===ze.Date}static isTime(t){return t&&t.typeId===ze.Time}static isTimestamp(t){return t&&t.typeId===ze.Timestamp}static isInterval(t){return t&&t.typeId===ze.Interval}static isList(t){return t&&t.typeId===ze.List}static isStruct(t){return t&&t.typeId===ze.Struct}static isUnion(t){return t&&t.typeId===ze.Union}static isFixedSizeBinary(t){return t&&t.typeId===ze.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===ze.FixedSizeList}static isMap(t){return t&&t.typeId===ze.Map}static isDictionary(t){return t&&t.typeId===ze.Dictionary}get typeId(){return ze.NONE}compareTo(t){return Ai.visit(this,t)}}ki[Symbol.toStringTag]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(ki.prototype);class Ti extends ki{toString(){return"Null"}get typeId(){return ze.Null}}Ti[Symbol.toStringTag]=(t=>t[Symbol.toStringTag]="Null")(Ti.prototype);class Mi extends ki{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return ze.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Mi[Symbol.toStringTag]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Mi.prototype);class Oi extends Mi{constructor(){super(!0,8)}}class Ei extends Mi{constructor(){super(!0,16)}}class Ci extends Mi{constructor(){super(!0,32)}}class Di extends Mi{constructor(){super(!0,64)}}class Bi extends Mi{constructor(){super(!1,8)}}class Li extends Mi{constructor(){super(!1,16)}}class Pi extends Mi{constructor(){super(!1,32)}}class Fi extends Mi{constructor(){super(!1,64)}}Object.defineProperty(Oi.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(Ei.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Ci.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Di.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Bi.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(Li.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(Pi.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(Fi.prototype,"ArrayType",{value:Uint32Array});class Ni extends ki{constructor(t){super(),this.precision=t}get typeId(){return ze.Float}get ArrayType(){switch(this.precision){case Ye.HALF:return Uint16Array;case Ye.SINGLE:return Float32Array;case Ye.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return"Float"+(this.precision<<5||16)}}Ni[Symbol.toStringTag]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Ni.prototype);class Ri extends Ni{constructor(){super(Ye.HALF)}}class Ui extends Ni{constructor(){super(Ye.SINGLE)}}class Vi extends Ni{constructor(){super(Ye.DOUBLE)}}Object.defineProperty(Ri.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(Ui.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(Vi.prototype,"ArrayType",{value:Float64Array});class ji extends ki{constructor(){super()}get typeId(){return ze.Binary}toString(){return"Binary"}}ji[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(ji.prototype);class zi extends ki{constructor(){super()}get typeId(){return ze.Utf8}toString(){return"Utf8"}}zi[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(zi.prototype);class Wi extends ki{constructor(){super()}get typeId(){return ze.Bool}toString(){return"Bool"}}Wi[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Wi.prototype);class $i extends ki{constructor(t,e){super(),this.scale=t,this.precision=e}get typeId(){return ze.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}$i[Symbol.toStringTag]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))($i.prototype);class Hi extends ki{constructor(t){super(),this.unit=t}get typeId(){return ze.Date}toString(){return`Date${32*(this.unit+1)}<${$e[this.unit]}>`}}Hi[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Hi.prototype);class Yi extends Hi{constructor(){super($e.DAY)}}class qi extends Hi{constructor(){super($e.MILLISECOND)}}class Gi extends ki{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return ze.Time}toString(){return`Time${this.bitWidth}<${He[this.unit]}>`}}Gi[Symbol.toStringTag]=(t=>(t.unit=null,t.bitWidth=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Time"))(Gi.prototype);class Ki extends Gi{constructor(){super(He.SECOND,32)}}class Xi extends Gi{constructor(){super(He.MILLISECOND,32)}}class Ji extends Gi{constructor(){super(He.MICROSECOND,64)}}class Qi extends Gi{constructor(){super(He.NANOSECOND,64)}}class Zi extends ki{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return ze.Timestamp}toString(){return`Timestamp<${He[this.unit]}${this.timezone?", "+this.timezone:""}>`}}Zi[Symbol.toStringTag]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Zi.prototype);class tn extends ki{constructor(t){super(),this.unit=t}get typeId(){return ze.Interval}toString(){return`Interval<${Ge[this.unit]}>`}}tn[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(tn.prototype);class en extends tn{constructor(){super(Ge.DAY_TIME)}}class nn extends tn{constructor(){super(Ge.YEAR_MONTH)}}class rn extends ki{constructor(t){super(),this.children=[t]}get typeId(){return ze.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}rn[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(rn.prototype);class sn extends ki{constructor(t){super(),this.children=t}get typeId(){return ze.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}sn[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(sn.prototype);class an extends ki{constructor(t,e,i){super(),this.mode=t,this.children=i,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce((t,e,i)=>(t[e]=i)&&t||t,Object.create(null))}get typeId(){return ze.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>""+t.type).join(" | ")}>`}}an[Symbol.toStringTag]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(an.prototype);class on extends ki{constructor(t){super(),this.byteWidth=t}get typeId(){return ze.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}on[Symbol.toStringTag]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(on.prototype);class cn extends ki{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return ze.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}cn[Symbol.toStringTag]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(cn.prototype);class hn extends ki{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return ze.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}hn[Symbol.toStringTag]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(hn.prototype);const ln=(t=>()=>++t)(-1);class un extends ki{constructor(t,e,i,n){super(),this.indices=e,this.dictionary=t,this.isOrdered=n||!1,this.id=null==i?ln():"number"===typeof i?i:i.low}get typeId(){return ze.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function dn(t){let e=t;switch(t.typeId){case ze.Decimal:return 4;case ze.Timestamp:return 2;case ze.Date:return 1+e.unit;case ze.Interval:return 1+e.unit;case ze.Int:return+(e.bitWidth>32)+1;case ze.Time:return+(e.bitWidth>32)+1;case ze.FixedSizeList:return e.listSize;case ze.FixedSizeBinary:return e.byteWidth;default:return 1}}un[Symbol.toStringTag]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(un.prototype);var pn=i("3eea");const fn=-1;class gn{constructor(t,e,i,n,r,s,a){let o;this.type=t,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(n||0,-1)),this.childData=(s||[]).map(t=>t instanceof gn?t:t.data),r instanceof gn?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=dn(t),r&&((o=r[0])&&(this.valueOffsets=o),(o=r[1])&&(this.values=o),(o=r[2])&&(this.nullBitmap=o),(o=r[3])&&(this.typeIds=o)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0,{valueOffsets:e,values:i,nullBitmap:n,typeIds:r}=this;return e&&(t+=e.byteLength),i&&(t+=i.byteLength),n&&(t+=n.byteLength),r&&(t+=r.byteLength),this.childData.reduce((t,e)=>t+e.byteLength,t)}get nullCount(){let t,e=this._nullCount;return e<=fn&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-ni(t,this.offset,this.offset+this.length)),e}clone(t,e=this.offset,i=this.length,n=this._nullCount,r=this,s=this.childData){return new gn(t,e,i,n,r,s,this.dictionary)}slice(t,e){const{stride:i,typeId:n,childData:r}=this,s=+(0===this._nullCount)-1,a=16===n?i:1,o=this._sliceBuffers(t,e,i,n);return this.clone(this.type,this.offset+t,e,s,o,!r.length||this.valueOffsets?r:this._sliceChildren(r,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ze.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:i}=this,n=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);n[e>>3]=(1<<e-(-8&e))-1,i>0&&n.set(ti(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[We.VALIDITY]=n,this.clone(this.type,0,t,i+(t-e),r)}_sliceBuffers(t,e,i,n){let r,{buffers:s}=this;return(r=s[We.TYPE])&&(s[We.TYPE]=r.subarray(t,t+e)),(r=s[We.OFFSET])&&(s[We.OFFSET]=r.subarray(t,t+e+1))||(r=s[We.DATA])&&(s[We.DATA]=6===n?r:r.subarray(i*t,i*(t+e))),s}_sliceChildren(t,e,i){return t.map(t=>t.slice(e,i))}static new(t,e,i,n,r,s,a){switch(r instanceof gn?r=r.buffers:r||(r=[]),t.typeId){case ze.Null:return gn.Null(t,e,i);case ze.Int:return gn.Int(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.Dictionary:return gn.Dictionary(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[],a);case ze.Float:return gn.Float(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.Bool:return gn.Bool(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.Decimal:return gn.Decimal(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.Date:return gn.Date(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.Time:return gn.Time(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.Timestamp:return gn.Timestamp(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.Interval:return gn.Interval(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.FixedSizeBinary:return gn.FixedSizeBinary(t,e,i,n||0,r[We.VALIDITY],r[We.DATA]||[]);case ze.Binary:return gn.Binary(t,e,i,n||0,r[We.VALIDITY],r[We.OFFSET]||[],r[We.DATA]||[]);case ze.Utf8:return gn.Utf8(t,e,i,n||0,r[We.VALIDITY],r[We.OFFSET]||[],r[We.DATA]||[]);case ze.List:return gn.List(t,e,i,n||0,r[We.VALIDITY],r[We.OFFSET]||[],(s||[])[0]);case ze.FixedSizeList:return gn.FixedSizeList(t,e,i,n||0,r[We.VALIDITY],(s||[])[0]);case ze.Struct:return gn.Struct(t,e,i,n||0,r[We.VALIDITY],s||[]);case ze.Map:return gn.Map(t,e,i,n||0,r[We.VALIDITY],r[We.OFFSET]||[],(s||[])[0]);case ze.Union:return gn.Union(t,e,i,n||0,r[We.VALIDITY],r[We.TYPE]||[],r[We.OFFSET]||s,s)}throw new Error("Unrecognized typeId "+t.typeId)}static Null(t,e,i){return new gn(t,e,i,0)}static Int(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static Dictionary(t,e,i,n,r,s,a){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.indices.ArrayType,s),Object(pn["toUint8Array"])(r)],[],a)}static Float(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static Bool(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static Decimal(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static Date(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static Time(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static Timestamp(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static Interval(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static FixedSizeBinary(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,Object(pn["toArrayBufferView"])(t.ArrayType,s),Object(pn["toUint8Array"])(r)])}static Binary(t,e,i,n,r,s,a){return new gn(t,e,i,n,[Object(pn["toInt32Array"])(s),Object(pn["toUint8Array"])(a),Object(pn["toUint8Array"])(r)])}static Utf8(t,e,i,n,r,s,a){return new gn(t,e,i,n,[Object(pn["toInt32Array"])(s),Object(pn["toUint8Array"])(a),Object(pn["toUint8Array"])(r)])}static List(t,e,i,n,r,s,a){return new gn(t,e,i,n,[Object(pn["toInt32Array"])(s),void 0,Object(pn["toUint8Array"])(r)],a?[a]:[])}static FixedSizeList(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,void 0,Object(pn["toUint8Array"])(r)],s?[s]:[])}static Struct(t,e,i,n,r,s){return new gn(t,e,i,n,[void 0,void 0,Object(pn["toUint8Array"])(r)],s)}static Map(t,e,i,n,r,s,a){return new gn(t,e,i,n,[Object(pn["toInt32Array"])(s),void 0,Object(pn["toUint8Array"])(r)],a?[a]:[])}static Union(t,e,i,n,r,s,a,o){const c=[void 0,void 0,Object(pn["toUint8Array"])(r),Object(pn["toArrayBufferView"])(t.ArrayType,s)];return t.mode===qe.Sparse?new gn(t,e,i,n,c,a):(c[We.OFFSET]=Object(pn["toInt32Array"])(a),new gn(t,e,i,n,c,o))}}gn.prototype.childData=Object.freeze([]);const mn=void 0;function yn(t){if(null===t)return"null";if(t===mn)return"undefined";switch(typeof t){case"number":return""+t;case"bigint":return""+t;case"string":return`"${t}"`}return"function"===typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t)}var bn=i("841f");function _n(t){if(!t||t.length<=0)return function(t){return!0};let e="",i=t.filter(t=>t===t);return i.length>0&&(e=`\n    switch (x) {${i.map(t=>`\n        case ${vn(t)}:`).join("")}\n            return false;\n    }`),t.length!==i.length&&(e="if (x !== x) return false;\n"+e),new Function("x",e+"\nreturn true;")}function vn(t){return"bigint"!==typeof t?yn(t):bn["c"]?yn(t)+"n":`"${yn(t)}"`}const xn=(t,e)=>(t*e+63&-64||64)/e,wn=(t,e=0)=>t.length>=e?t.subarray(0,e):Object(pn["memcpy"])(new t.constructor(e),t,0);class Sn{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=t.length/e|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,i=this.length*e,n=this.buffer.length;i>=n&&this._resize(xn(0===n?1*i:2*i,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=xn(t*this.stride,this.BYTES_PER_ELEMENT);const e=wn(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Object(pn["memcpy"])(new this.ArrayType(t),this.buffer)}}Sn.prototype.offset=0;class In extends Sn{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class An extends In{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:i}=this.reserve(t-this.length+1),n=t>>3,r=t%8,s=i[n]>>r&1;return e?0===s&&(i[n]|=1<<r,++this.numValid):1===s&&(i[n]&=~(1<<r),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class kn extends In{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const i=this.length-1,n=this.reserve(t-i+1).buffer;return i<t++&&n.fill(n[i],i,t),n[t]=n[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class Tn extends Sn{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?bn["b"]:bn["d"])}set(t,e){switch(this.reserve(t-this.length+1),typeof e){case"bigint":this.buffer64[t]=e;break;case"number":this.buffer[t*this.stride]=e;break;default:this.buffer.set(e,t*this.stride)}return this}_resize(t){const e=super._resize(t),i=e.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return bn["c"]&&(this.buffer64=new this.ArrayType64(e.buffer,e.byteOffset,i)),e}}class Mn{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=dn(t),this._nulls=new An,e&&e.length>0&&(this._isValid=_n(e))}static new(t){}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}static throughIterable(t){return Cn(t)}static throughAsyncIterable(t){return Dn(t)}toVector(){return je.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),this._typeIds&&(t+=this._typeIds.byteLength),this.children.reduce((t,e)=>t+e.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((t,e)=>t+e.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=""+this.numChildren){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){const t=[],e=this._values,i=this._offsets,n=this._typeIds,{length:r,nullCount:s}=this;n?(t[We.TYPE]=n.flush(r),i&&(t[We.OFFSET]=i.flush(r))):i?(e&&(t[We.DATA]=e.flush(i.last())),t[We.OFFSET]=i.flush(r)):e&&(t[We.DATA]=e.flush(r)),s>0&&(t[We.VALIDITY]=this._nulls.flush(r));const a=gn.new(this.type,0,r,s,t,this.children.map(t=>t.flush()));return this.clear(),a}finish(){return this.finished=!0,this.children.forEach(t=>t.finish()),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach(t=>t.clear()),this}}Mn.prototype.length=1,Mn.prototype.stride=1,Mn.prototype.children=null,Mn.prototype.finished=!1,Mn.prototype.nullValues=null,Mn.prototype._isValid=()=>!0;class On extends Mn{constructor(t){super(t),this._values=new In(new this.ArrayType(0),this.stride)}setValue(t,e){const i=this._values;return i.reserve(t-i.length+1),super.setValue(t,e)}}class En extends Mn{constructor(t){super(t),this._pendingLength=0,this._offsets=new kn}setValue(t,e){const i=this._pending||(this._pending=new Map),n=i.get(t);n&&(this._pendingLength-=n.length),this._pendingLength+=e.length,i.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}function Cn(t){const{["queueingStrategy"]:e="count"}=t,{["highWaterMark"]:i=("bytes"!==e?1e3:16384)}=t,n="bytes"!==e?"length":"byteLength";return function*(e){let r=0,s=Mn.new(t);for(const t of e)s.append(t)[n]>=i&&++r&&(yield s.toVector());(s.finish().length>0||0===r)&&(yield s.toVector())}}function Dn(t){const{["queueingStrategy"]:e="count"}=t,{["highWaterMark"]:i=("bytes"!==e?1e3:16384)}=t,n="bytes"!==e?"length":"byteLength";return async function*(e){let r=0,s=Mn.new(t);for await(const t of e)s.append(t)[n]>=i&&++r&&(yield s.toVector());(s.finish().length>0||0===r)&&(yield s.toVector())}}class Bn extends Mn{constructor(t){super(t),this._values=new An}setValue(t,e){this._values.set(t,+e)}}class Ln extends Mn{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class Pn extends On{}class Fn extends Pn{}class Nn extends Pn{}class Rn extends On{}class Un extends Mn{constructor({type:t,nullValues:e,dictionaryHashFunction:i}){super({type:new un(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Mn.new({type:this.type.indices,nullValues:e}),this.dictionary=Mn.new({type:this.type.dictionary,nullValues:null}),"function"===typeof i&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const i=this.indices;return e=i.setValid(t,e),this.length=i.length,e}setValue(t,e){let i=this._keysToIndices,n=this.valueToKey(e),r=i[n];return void 0===r&&(i[n]=r=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,r)}flush(){const t=this.type,e=this._dictionary,i=this.dictionary.toVector(),n=this.indices.flush().clone(t);return n.dictionary=e?e.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=n.dictionary,this.clear(),n}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"===typeof t?t:""+t}}class Vn extends On{}const jn=new Float64Array(1),zn=new Uint32Array(jn.buffer);function Wn(t){let e=(31744&t)>>10,i=(1023&t)/1024,n=(-1)**((32768&t)>>15);switch(e){case 31:return n*(i?NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*2**(e-15)*(1+i)}function $n(t){if(t!==t)return 32256;jn[0]=t;let e=(2147483648&zn[1])>>16&65535,i=2146435072&zn[1],n=0;return i>=1089470464?zn[0]>0?i=31744:(i=(2080374784&i)>>16,n=(1048575&zn[1])>>10):i<=1056964608?(n=1048576+(1048575&zn[1]),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=512+(1048575&zn[1])>>10),e|i|65535&n}class Hn extends On{}class Yn extends Hn{setValue(t,e){this._values.set(t,$n(e))}}class qn extends Hn{setValue(t,e){this._values.set(t,e)}}class Gn extends Hn{setValue(t,e){this._values.set(t,e)}}const Kn=Symbol.for("isArrowBigNum");function Xn(t,...e){return 0===e.length?Object.setPrototypeOf(Object(pn["toArrayBufferView"])(this["TypedArray"],t),this.constructor.prototype):Object.setPrototypeOf(new this["TypedArray"](t,...e),this.constructor.prototype)}function Jn(...t){return Xn.apply(this,t)}function Qn(...t){return Xn.apply(this,t)}function Zn(...t){return Xn.apply(this,t)}function tr(t){let e,i,{buffer:n,byteOffset:r,length:s,signed:a}=t,o=new Int32Array(n,r,s),c=0,h=0,l=o.length;while(h<l)i=o[h++],e=o[h++],a||(e>>>=0),c+=(i>>>0)+e*h**32;return c}let er,ir;function nr(t){let e="",i=new Uint32Array(2),n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=new Uint32Array((n=new Uint16Array(n).reverse()).buffer),s=-1,a=n.length-1;do{for(i[0]=n[s=0];s<a;)n[s++]=i[1]=i[0]/10,i[0]=(i[0]-10*i[1]<<16)+n[s];n[s]=i[1]=i[0]/10,i[0]=i[0]-10*i[1],e=`${i[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e||"0"}Xn.prototype[Kn]=!0,Xn.prototype.toJSON=function(){return`"${er(this)}"`},Xn.prototype.valueOf=function(){return tr(this)},Xn.prototype.toString=function(){return er(this)},Xn.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return tr(this);case"string":return er(this);case"default":return ir(this)}return er(this)},Object.setPrototypeOf(Jn.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(Qn.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(Zn.prototype,Object.create(Uint32Array.prototype)),Object.assign(Jn.prototype,Xn.prototype,{constructor:Jn,signed:!0,TypedArray:Int32Array,BigIntArray:bn["b"]}),Object.assign(Qn.prototype,Xn.prototype,{constructor:Qn,signed:!1,TypedArray:Uint32Array,BigIntArray:bn["d"]}),Object.assign(Zn.prototype,Xn.prototype,{constructor:Zn,signed:!0,TypedArray:Uint32Array,BigIntArray:bn["d"]}),bn["c"]?(ir=t=>8===t.byteLength?new t["BigIntArray"](t.buffer,t.byteOffset,1)[0]:nr(t),er=t=>8===t.byteLength?""+new t["BigIntArray"](t.buffer,t.byteOffset,1)[0]:nr(t)):(er=nr,ir=er);class rr{static new(t,e){switch(e){case!0:return new Jn(t);case!1:return new Qn(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case bn["b"]:return new Jn(t)}return 16===t.byteLength?new Zn(t):new Qn(t)}static signed(t){return new Jn(t)}static unsigned(t){return new Qn(t)}static decimal(t){return new Zn(t)}constructor(t,e){return rr.new(t,e)}}class sr extends On{setValue(t,e){this._values.set(t,e)}}class ar extends sr{}class or extends sr{}class cr extends sr{}class hr extends sr{constructor(t){t["nullValues"]&&(t["nullValues"]=t["nullValues"].map(fr)),super(t),this._values=new Tn(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(fr(t))}}class lr extends sr{}class ur extends sr{}class dr extends sr{}class pr extends sr{constructor(t){t["nullValues"]&&(t["nullValues"]=t["nullValues"].map(fr)),super(t),this._values=new Tn(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(fr(t))}}const fr=(t=>e=>(ArrayBuffer.isView(e)&&(t.buffer=e.buffer,t.byteOffset=e.byteOffset,t.byteLength=e.byteLength,e=ir(t),t.buffer=null),e))({BigIntArray:bn["b"]});class gr extends On{}class mr extends gr{}class yr extends gr{}class br extends gr{}class _r extends gr{}class vr extends On{}class xr extends vr{}class wr extends vr{}class Sr extends vr{}class Ir extends vr{}class Ar extends On{}class kr extends Ar{}class Tr extends Ar{}var Mr=i("5217");class Or extends En{constructor(t){super(t),this._values=new Sn(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,Object(pn["toUint8Array"])(e))}_flushPending(t,e){const i=this._offsets,n=this._values.reserve(e).buffer;let r,s=0,a=0,o=0;for([s,r]of t)void 0===r?i.set(s,0):(a=r.length,n.set(r,o),i.set(s,a),o+=a)}}class Er extends En{constructor(t){super(t),this._values=new Sn(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,Object(Mr["b"])(e))}_flushPending(t,e){}}Er.prototype._flushPending=Or.prototype._flushPending;class Cr{get length(){return this._values.length}get(t){return this._values[t]}clear(){return this._values=null,this}bind(t){return t instanceof je?t:(this._values=t,this)}}const Dr=Symbol.for("parent"),Br=Symbol.for("rowIndex"),Lr=Symbol.for("keyToIdx"),Pr=Symbol.for("idxToVal"),Fr=Symbol.for("nodejs.util.inspect.custom");class Nr{constructor(t,e){this[Dr]=t,this.size=e}entries(){return this[Symbol.iterator]()}has(t){return void 0!==this.get(t)}get(t){let e=void 0;if(null!==t&&void 0!==t){const i=this[Lr]||(this[Lr]=new Map);let n=i.get(t);if(void 0!==n){const t=this[Pr]||(this[Pr]=new Array(this.size));void 0!==(e=t[n])||(t[n]=e=this.getValue(n))}else if((n=this.getIndex(t))>-1){i.set(t,n);const r=this[Pr]||(this[Pr]=new Array(this.size));void 0!==(e=r[n])||(r[n]=e=this.getValue(n))}}return e}set(t,e){if(null!==t&&void 0!==t){const i=this[Lr]||(this[Lr]=new Map);let n=i.get(t);if(void 0===n&&i.set(t,n=this.getIndex(t)),n>-1){const t=this[Pr]||(this[Pr]=new Array(this.size));t[n]=this.setValue(n,e)}}return this}clear(){throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(t){throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){const t=this.keys(),e=this.values(),i=this[Lr]||(this[Lr]=new Map),n=this[Pr]||(this[Pr]=new Array(this.size));for(let r,s,a,o,c=0;!(a=t.next()).done&&!(o=e.next()).done;++c)r=a.value,s=o.value,n[c]=s,i.has(r)||i.set(r,c),yield[r,s]}forEach(t,e){const i=this.keys(),n=this.values(),r=void 0===e?t:(i,n,r)=>t.call(e,i,n,r),s=this[Lr]||(this[Lr]=new Map),a=this[Pr]||(this[Pr]=new Array(this.size));for(let o,c,h,l,u=0;!(h=i.next()).done&&!(l=n.next()).done;++u)o=h.value,c=l.value,a[u]=c,s.has(o)||s.set(o,u),r(c,o,this)}toArray(){return[...this.values()]}toJSON(){const t={};return this.forEach((e,i)=>t[i]=e),t}inspect(){return this.toString()}[Fr](){return this.toString()}toString(){const t=[];return this.forEach((e,i)=>{i=yn(i),e=yn(e),t.push(`${i}: ${e}`)}),`{ ${t.join(", ")} }`}}Nr[Symbol.toStringTag]=(t=>(Object.defineProperties(t,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[Dr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Br]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),t[Symbol.toStringTag]="Row"))(Nr.prototype);class Rr extends Nr{constructor(t){return super(t,t.length),jr(this)}keys(){return this[Dr].getChildAt(0)[Symbol.iterator]()}values(){return this[Dr].getChildAt(1)[Symbol.iterator]()}getKey(t){return this[Dr].getChildAt(0).get(t)}getIndex(t){return this[Dr].getChildAt(0).indexOf(t)}getValue(t){return this[Dr].getChildAt(1).get(t)}setValue(t,e){this[Dr].getChildAt(1).set(t,e)}}class Ur extends Nr{constructor(t){return super(t,t.type.children.length),Vr(this)}*keys(){for(const t of this[Dr].type.children)yield t.name}*values(){for(const t of this[Dr].type.children)yield this[t.name]}getKey(t){return this[Dr].type.children[t].name}getIndex(t){return this[Dr].type.children.findIndex(e=>e.name===t)}getValue(t){return this[Dr].getChildAt(t).get(this[Br])}setValue(t,e){return this[Dr].getChildAt(t).set(this[Br],e)}}Object.setPrototypeOf(Nr.prototype,Map.prototype);const Vr=(()=>{const t={enumerable:!0,configurable:!1,get:null,set:null};return e=>{let i=-1,n=e[Lr]||(e[Lr]=new Map);const r=t=>function(){return this.get(t)},s=t=>function(e){return this.set(t,e)};for(const a of e.keys())n.set(a,++i),t.get=r(a),t.set=s(a),e.hasOwnProperty(a)||(t.enumerable=!0,Object.defineProperty(e,a,t)),e.hasOwnProperty(i)||(t.enumerable=!1,Object.defineProperty(e,i,t));return t.get=t.set=null,e}})(),jr=(()=>{if("undefined"===typeof Proxy)return Vr;const t=Nr.prototype.has,e=Nr.prototype.get,i=Nr.prototype.set,n=Nr.prototype.getKey,r={isExtensible(){return!1},deleteProperty(){return!1},preventExtensions(){return!0},ownKeys(t){return[...t.keys()].map(t=>""+t)},has(t,e){switch(e){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Dr:case Br:case Pr:case Lr:case Fr:return!0}return"number"!==typeof e||t.has(e)||(e=t.getKey(e)),t.has(e)},get(i,r,s){switch(r){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Dr:case Br:case Pr:case Lr:case Fr:return Reflect.get(i,r,s)}return"number"!==typeof r||t.call(s,r)||(r=n.call(s,r)),e.call(s,r)},set(e,r,s,a){switch(r){case Dr:case Br:case Pr:case Lr:return Reflect.set(e,r,s,a);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!==typeof r||t.call(a,r)||(r=n.call(a,r)),!!t.call(a,r)&&!!i.call(a,r,s)}};return t=>new Proxy(t,r)})();function zr(t,e,i){const n=t.length,r=e>-1?e:n+e%n;return i?i(t,r):r}let Wr;function $r(t,e,i,n){let{length:r=0}=t,s="number"!==typeof e?0:e,a="number"!==typeof i?r:i;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Wr=s,s=a,a=Wr),a>r&&(a=r),n?n(t,s,a):[s,a]}const Hr=bn["c"]?Object(bn["a"])(0):0,Yr=t=>t!==t;function qr(t){let e=typeof t;if("object"!==e||null===t)return Yr(t)?Yr:"bigint"!==e?e=>e===t:e=>Hr+e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&Object(pn["compareArrayLike"])(t,e):t instanceof Map?Kr(t):Array.isArray(t)?Gr(t):t instanceof je?Xr(t):Jr(t)}function Gr(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=qr(t[i]);return Qr(e)}function Kr(t){let e=-1;const i=[];return t.forEach(t=>i[++e]=qr(t)),Qr(i)}function Xr(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=qr(t.get(i));return Qr(e)}function Jr(t){const e=Object.keys(t);if(0===e.length)return()=>!1;const i=[];for(let n=-1,r=e.length;++n<r;)i[n]=qr(t[e[n]]);return Qr(i,e)}function Qr(t,e){return i=>{if(!i||"object"!==typeof i)return!1;switch(i.constructor){case Array:return Zr(t,i);case Map:case Rr:case Ur:return es(t,i,i.keys());case Object:case void 0:return es(t,i,e||Object.keys(i))}return i instanceof je&&ts(t,i)}}function Zr(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e[n]))return!1;return!0}function ts(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e.get(n)))return!1;return!0}function es(t,e,i){const n=i[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0,o=t.length,c=s.next(),h=n.next(),l=r.next();for(;a<o&&!h.done&&!l.done&&!c.done;++a,h=n.next(),l=r.next(),c=s.next())if(h.value!==l.value||!t[a](c.value))break;return!!(a===o&&h.done&&l.done&&c.done)||(n.return&&n.return(),r.return&&r.return(),s.return&&s.return(),!1)}class is extends je{constructor(t,e=[],i=ns(e)){super(),this._nullCount=-1,this._type=t,this._chunks=e,this._chunkOffsets=i,this._length=i[i.length-1],this._numChildren=(this._type.children||[]).length}static flatten(...t){return ds(je,t)}static concat(...t){const e=is.flatten(...t);return new is(e[0].type,e)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce((t,e)=>t+e.byteLength,0)}get nullCount(){let t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce((t,{nullCount:e})=>t+e,0)),t}get indices(){if(ki.isDictionary(this._type)){if(!this._indices){const t=this._chunks;this._indices=1===t.length?t[0].indices:is.concat(...t.map(t=>t.indices))}return this._indices}return null}get dictionary(){return ki.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}*[Symbol.iterator](){for(const t of this._chunks)yield*t}clone(t=this._chunks){return new is(this._type,t)}concat(...t){return this.clone(is.flatten(this,...t))}slice(t,e){return $r(this,t,e,this._sliceInternal)}getChildAt(t){if(t<0||t>=this._numChildren)return null;let e,i,n,r=this._children||(this._children=[]);return(e=r[t])?e:(i=(this._type.children||[])[t])&&(n=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t),n.length>0)?r[t]=new is(i.type,n):null}search(t,e){let i=t,n=this._chunkOffsets,r=n.length-1;if(i<0)return null;if(i>=n[r])return null;if(r<=1)return e?e(this,0,i):[0,i];let s=0,a=0,o=0;do{if(s+1===r)return e?e(this,s,i-a):[s,i-a];o=s+(r-s)/2|0,i>=n[o]?s=o:r=o}while(i<n[r]&&i>=(a=n[s]));return null}isValid(t){return!!this.search(t,this.isValidInternal)}get(t){return this.search(t,this.getInternal)}set(t,e){this.search(t,({chunks:t},i,n)=>t[i].set(n,e))}indexOf(t,e){return e&&"number"===typeof e?this.search(e,(e,i,n)=>this.indexOfInternal(e,i,n,t)):this.indexOfInternal(this,0,Math.max(0,e||0),t)}toArray(){const{chunks:t}=this,e=t.length;let i=this._type.ArrayType;if(e<=0)return new i(0);if(e<=1)return t[0].toArray();let n=0,r=new Array(e);for(let o=-1;++o<e;)n+=(r[o]=t[o].toArray()).length;i!==r[0].constructor&&(i=r[0].constructor);let s=new i(n),a=i===Array?ss:rs;for(let o=-1,c=0;++o<e;)c=a(r[o],s,c);return s}getInternal({_chunks:t},e,i){return t[e].get(i)}isValidInternal({_chunks:t},e,i){return t[e].isValid(i)}indexOfInternal({_chunks:t},e,i,n){let r=e-1,s=t.length,a=i,o=0,c=-1;while(++r<s){if(~(c=t[r].indexOf(n,a)))return o+c;a=0,o+=t[r].length}return-1}_sliceInternal(t,e,i){const n=[],{chunks:r,_chunkOffsets:s}=t;for(let a=-1,o=r.length;++a<o;){const t=r[a],o=t.length,c=s[a];if(c>=i)break;if(e>=c+o)continue;if(c>=e&&c+o<=i){n.push(t);continue}const h=Math.max(0,e-c),l=Math.min(i-c,o);n.push(t.slice(h,l))}return t.clone(n)}}function ns(t){let e=new Uint32Array((t||[]).length+1),i=e[0]=0,n=e.length;for(let r=0;++r<n;)e[r]=i+=t[r-1].length;return e}const rs=(t,e,i)=>(e.set(t,i),i+t.length),ss=(t,e,i)=>{let n=i;for(let r=-1,s=t.length;++r<s;)e[n++]=t[r];return n};class as extends is{constructor(t,e=[],i){if(e=is.flatten(...e),super(t.type,e,i),this._field=t,1===e.length&&!(this instanceof os))return new os(t,e[0],this._chunkOffsets)}static new(...t){let[e,i,...n]=t;"string"===typeof e||e instanceof vs||(i=e,e="");const r=is.flatten(Array.isArray(i)?[...i,...n]:i instanceof je?[i,...n]:[je.new(i,...n)]);if("string"===typeof e){const t=r[0].data.type;e=new vs(e,t,!0)}else!e.nullable&&r.some(({nullCount:t})=>t>0)&&(e=e.clone({nullable:!0}));return new as(e,r)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(t=this._chunks){return new as(this._field,t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,i,n,r=this._children||(this._children=[]);return(e=r[t])?e:(i=(this.type.children||[])[t])&&(n=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t),n.length>0)?r[t]=new as(i,n):null}}class os extends as{constructor(t,e,i){super(t,[e],i),this._chunk=e}search(t,e){return e?e(this,0,t):[0,t]}isValid(t){return this._chunk.isValid(t)}get(t){return this._chunk.get(t)}set(t,e){this._chunk.set(t,e)}indexOf(t,e){return this._chunk.indexOf(t,e)}}const cs=Array.isArray,hs=(t,e)=>fs(t,e,[],0),ls=t=>{const[e,i]=bs(t,[[],[]]);return i.map((t,i)=>t instanceof as?as.new(t.field.clone(e[i]),t):t instanceof je?as.new(e[i],t):as.new(e[i],[]))},us=t=>bs(t,[[],[]]),ds=(t,e)=>gs(t,e,[],0),ps=(t,e)=>ms(t,e,[],0);function fs(t,e,i,n){let r,s=n,a=-1,o=e.length;while(++a<o)cs(r=e[a])?s=fs(t,r,i,s).length:r instanceof t&&(i[s++]=r);return i}function gs(t,e,i,n){let r,s=n,a=-1,o=e.length;while(++a<o)cs(r=e[a])?s=gs(t,r,i,s).length:r instanceof is?s=gs(t,r.chunks,i,s).length:r instanceof t&&(i[s++]=r);return i}function ms(t,e,i,n){let r,s=n,a=-1,o=e.length;while(++a<o)cs(r=e[a])?s=ms(t,r,i,s).length:r instanceof t?s=fs(je,r.schema.fields.map((t,e)=>r.getChildAt(e)),i,s).length:r instanceof je&&(i[s++]=r);return i}const ys=(t,[e,i],n)=>(t[0][n]=e,t[1][n]=i,t);function bs(t,e){let i,n;switch(n=t.length){case 0:return e;case 1:if(i=e[0],!t[0])return e;if(cs(t[0]))return bs(t[0],e);t[0]instanceof gn||t[0]instanceof je||t[0]instanceof ki||([i,t]=Object.entries(t[0]).reduce(ys,e));break;default:cs(i=t[n-1])?t=cs(t[0])?t[0]:t.slice(0,n-1):(t=cs(t[0])?t[0]:t,i=[])}let r,s,a=-1,o=-1,c=-1,h=t.length,[l,u]=e;while(++c<h)s=t[c],s instanceof as&&(u[++o]=s)?l[++a]=s.field.clone(i[c],s.type,!0):(({[c]:r=c}=i),s instanceof ki&&(u[++o]=s)?l[++a]=vs.new(r,s,!0):s&&s.type&&(u[++o]=s)&&(s instanceof gn&&(u[o]=s=je.new(s)),l[++a]=vs.new(r,s.type,!0)));return e}class _s{constructor(t=[],e,i){this.fields=t||[],this.metadata=e||new Map,i||(i=ws(t)),this.dictionaries=i}static from(...t){return _s.new(t[0],t[1])}static new(...t){return new _s(us(t)[0])}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map((t,e)=>`${e}: ${t}`).join(", ")} }>`}compareTo(t){return Ai.compareSchemas(this,t)}select(...t){const e=t.reduce((t,e)=>(t[e]=!0)&&t,Object.create(null));return new _s(this.fields.filter(t=>e[t.name]),this.metadata)}selectAt(...t){return new _s(t.map(t=>this.fields[t]).filter(Boolean),this.metadata)}assign(...t){const e=t[0]instanceof _s?t[0]:new _s(hs(vs,t)),i=[...this.fields],n=xs(xs(new Map,this.metadata),e.metadata),r=e.fields.filter(t=>{const e=i.findIndex(e=>e.name===t.name);return!~e||(i[e]=t.clone({metadata:xs(xs(new Map,i[e].metadata),t.metadata)}))&&!1}),s=ws(r,new Map);return new _s([...i,...r],n,new Map([...this.dictionaries,...s]))}}class vs{constructor(t,e,i=!1,n){this.name=t,this.type=e,this.nullable=i,this.metadata=n||new Map}static new(...t){let[e,i,n,r]=t;return t[0]&&"object"===typeof t[0]&&(({name:e}=t[0]),void 0===i&&(i=t[0].type),void 0===n&&(n=t[0].nullable),void 0===r&&(r=t[0].metadata)),new vs(""+e,i,n,r)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}compareTo(t){return Ai.compareField(this,t)}clone(...t){let[e,i,n,r]=t;return t[0]&&"object"===typeof t[0]?({name:e=this.name,type:i=this.type,nullable:n=this.nullable,metadata:r=this.metadata}=t[0]):[e=this.name,i=this.type,n=this.nullable,r=this.metadata]=t,vs.new(e,i,n,r)}}function xs(t,e){return new Map([...t||new Map,...e||new Map])}function ws(t,e=new Map){for(let i=-1,n=t.length;++i<n;){const n=t[i],r=n.type;if(ki.isDictionary(r))if(e.has(r.id)){if(e.get(r.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(r.id,r.dictionary);r.children&&r.children.length>0&&ws(r.children,e)}return e}_s.prototype.fields=null,_s.prototype.metadata=null,_s.prototype.dictionaries=null,vs.prototype.type=null,vs.prototype.name=null,vs.prototype.nullable=null,vs.prototype.metadata=null;class Ss extends En{constructor(t){super(t),this._run=new Cr,this._offsets=new kn}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new rn(new vs(e,t.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(t){const e=this._run,i=this._offsets,n=this._setValue;let r,s=0;for([s,r]of t)void 0===r?i.set(s,0):(i.set(s,r.length),n(this,s,e.bind(r)))}}class Is extends Mn{constructor(){super(...arguments),this._run=new Cr}setValue(t,e){super.setValue(t,this._run.bind(e))}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(t);return this.type=new cn(this.type.listSize,new vs(e,t.type,!0)),i}clear(){return this._run.clear(),super.clear()}}class As extends En{set(t,e){return super.set(t,e)}setValue(t,e){e=e instanceof Map?e:new Map(Object.entries(e));const i=this._pending||(this._pending=new Map),n=i.get(t);n&&(this._pendingLength-=n.size),this._pendingLength+=e.size,i.set(t,e)}addChild(t,e=""+this.numChildren){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new hn(new vs(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,i=this._setValue;t.forEach((t,n)=>{void 0===t?e.set(n,0):(e.set(n,t.size),i(this,n,t))})}}class ks extends Mn{addChild(t,e=""+this.numChildren){const i=this.children.push(t);return this.type=new sn([...this.type.children,new vs(e,t.type,!0)]),i}}class Ts extends Mn{constructor(t){super(t),this._typeIds=new In(new Int8Array(0),1),"function"===typeof t["valueToChildTypeId"]&&(this._valueToChildTypeId=t["valueToChildTypeId"])}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,i){return void 0===i&&(i=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,i),this}setValue(t,e,i){this._typeIds.set(t,i),super.setValue(t,e)}addChild(t,e=""+this.children.length){const i=this.children.push(t),{type:{children:n,mode:r,typeIds:s}}=this,a=[...n,new vs(e,t.type)];return this.type=new an(r,[...s,i],a),i}_valueToChildTypeId(t,e,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Ms extends Ts{}class Os extends Ts{constructor(t){super(t),this._offsets=new In(new Int32Array(0))}setValue(t,e,i){const n=this.type.typeIdToChildIndex[i];return this._offsets.set(t,this.getChildAt(n).length),super.setValue(t,e,i)}}class Es extends ai{}const Cs=(t,e,i)=>{t[e]=i/864e5|0},Ds=(t,e,i)=>{t[e]=i%4294967296|0,t[e+1]=i/4294967296|0},Bs=(t,e,i)=>{t[e]=1e3*i%4294967296|0,t[e+1]=1e3*i/4294967296|0},Ls=(t,e,i)=>{t[e]=1e6*i%4294967296|0,t[e+1]=1e6*i/4294967296|0},Ps=(t,e,i,n)=>{const{[i]:r,[i+1]:s}=e;null!=r&&null!=s&&t.set(n.subarray(0,s-r),r)},Fs=({offset:t,values:e},i,n)=>{const r=t+i;n?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)},Ns=({values:t},e,i)=>{Cs(t,e,i.valueOf())},Rs=({values:t},e,i)=>{Ds(t,2*e,i.valueOf())},Us=({stride:t,values:e},i,n)=>{e[t*i]=n},Vs=({stride:t,values:e},i,n)=>{e[t*i]=$n(n)},js=(t,e,i)=>{switch(typeof i){case"bigint":t.values64[e]=i;break;case"number":t.values[e*t.stride]=i;break;default:const n=i,{stride:r,ArrayType:s}=t,a=Object(pn["toArrayBufferView"])(s,n);t.values.set(a.subarray(0,r),r*e)}},zs=({stride:t,values:e},i,n)=>{e.set(n.subarray(0,t),t*i)},Ws=({values:t,valueOffsets:e},i,n)=>Ps(t,e,i,n),$s=({values:t,valueOffsets:e},i,n)=>{Ps(t,e,i,Object(Mr["b"])(n))},Hs=(t,e,i)=>{t.type.bitWidth<64?Us(t,e,i):js(t,e,i)},Ys=(t,e,i)=>{t.type.precision!==Ye.HALF?Us(t,e,i):Vs(t,e,i)},qs=(t,e,i)=>{t.type.unit===$e.DAY?Ns(t,e,i):Rs(t,e,i)},Gs=({values:t},e,i)=>Ds(t,2*e,i/1e3),Ks=({values:t},e,i)=>Ds(t,2*e,i),Xs=({values:t},e,i)=>Bs(t,2*e,i),Js=({values:t},e,i)=>Ls(t,2*e,i),Qs=(t,e,i)=>{switch(t.type.unit){case He.SECOND:return Gs(t,e,i);case He.MILLISECOND:return Ks(t,e,i);case He.MICROSECOND:return Xs(t,e,i);case He.NANOSECOND:return Js(t,e,i)}},Zs=({values:t,stride:e},i,n)=>{t[e*i]=n},ta=({values:t,stride:e},i,n)=>{t[e*i]=n},ea=({values:t},e,i)=>{t.set(i.subarray(0,2),2*e)},ia=({values:t},e,i)=>{t.set(i.subarray(0,2),2*e)},na=(t,e,i)=>{switch(t.type.unit){case He.SECOND:return Zs(t,e,i);case He.MILLISECOND:return ta(t,e,i);case He.MICROSECOND:return ea(t,e,i);case He.NANOSECOND:return ia(t,e,i)}},ra=({values:t},e,i)=>{t.set(i.subarray(0,4),4*e)},sa=(t,e,i)=>{const n=t.getChildAt(0),r=t.valueOffsets;for(let s=-1,a=r[e],o=r[e+1];a<o;)n.set(a++,i.get(++s))},aa=(t,e,i)=>{const n=t.getChildAt(0),r=t.valueOffsets,s=i instanceof Map?[...i]:Object.entries(i);for(let a=-1,o=r[e],c=r[e+1];o<c;)n.set(o++,s[++a])},oa=(t,e)=>(i,n,r)=>i&&i.set(t,e[r]),ca=(t,e)=>(i,n,r)=>i&&i.set(t,e.get(r)),ha=(t,e)=>(i,n,r)=>i&&i.set(t,e.get(n.name)),la=(t,e)=>(i,n,r)=>i&&i.set(t,e[n.name]),ua=(t,e,i)=>{const n=i instanceof Map?ha(e,i):i instanceof je?ca(e,i):Array.isArray(i)?oa(e,i):la(e,i);t.type.children.forEach((e,i)=>n(t.getChildAt(i),e,i))},da=(t,e,i)=>{t.type.mode===qe.Dense?pa(t,e,i):fa(t,e,i)},pa=(t,e,i)=>{const n=t.typeIdToChildIndex[t.typeIds[e]],r=t.getChildAt(n);r&&r.set(t.valueOffsets[e],i)},fa=(t,e,i)=>{const n=t.typeIdToChildIndex[t.typeIds[e]],r=t.getChildAt(n);r&&r.set(e,i)},ga=(t,e,i)=>{const n=t.getKey(e);null!==n&&t.setValue(n,i)},ma=(t,e,i)=>{t.type.unit===Ge.DAY_TIME?ya(t,e,i):ba(t,e,i)},ya=({values:t},e,i)=>{t.set(i.subarray(0,2),2*e)},ba=({values:t},e,i)=>{t[e]=12*i[0]+i[1]%12},_a=(t,e,i)=>{const n=t.getChildAt(0),{stride:r}=t;for(let s=-1,a=e*r;++s<r;)n.set(a+s,i.get(s))};Es.prototype.visitBool=Fs,Es.prototype.visitInt=Hs,Es.prototype.visitInt8=Us,Es.prototype.visitInt16=Us,Es.prototype.visitInt32=Us,Es.prototype.visitInt64=js,Es.prototype.visitUint8=Us,Es.prototype.visitUint16=Us,Es.prototype.visitUint32=Us,Es.prototype.visitUint64=js,Es.prototype.visitFloat=Ys,Es.prototype.visitFloat16=Vs,Es.prototype.visitFloat32=Us,Es.prototype.visitFloat64=Us,Es.prototype.visitUtf8=$s,Es.prototype.visitBinary=Ws,Es.prototype.visitFixedSizeBinary=zs,Es.prototype.visitDate=qs,Es.prototype.visitDateDay=Ns,Es.prototype.visitDateMillisecond=Rs,Es.prototype.visitTimestamp=Qs,Es.prototype.visitTimestampSecond=Gs,Es.prototype.visitTimestampMillisecond=Ks,Es.prototype.visitTimestampMicrosecond=Xs,Es.prototype.visitTimestampNanosecond=Js,Es.prototype.visitTime=na,Es.prototype.visitTimeSecond=Zs,Es.prototype.visitTimeMillisecond=ta,Es.prototype.visitTimeMicrosecond=ea,Es.prototype.visitTimeNanosecond=ia,Es.prototype.visitDecimal=ra,Es.prototype.visitList=sa,Es.prototype.visitStruct=ua,Es.prototype.visitUnion=da,Es.prototype.visitDenseUnion=pa,Es.prototype.visitSparseUnion=fa,Es.prototype.visitDictionary=ga,Es.prototype.visitInterval=ma,Es.prototype.visitIntervalDayTime=ya,Es.prototype.visitIntervalYearMonth=ba,Es.prototype.visitFixedSizeList=_a,Es.prototype.visitMap=aa;const va=new Es;class xa extends ai{visitNull(){return Ln}visitBool(){return Bn}visitInt(){return sr}visitInt8(){return ar}visitInt16(){return or}visitInt32(){return cr}visitInt64(){return hr}visitUint8(){return lr}visitUint16(){return ur}visitUint32(){return dr}visitUint64(){return pr}visitFloat(){return Hn}visitFloat16(){return Yn}visitFloat32(){return qn}visitFloat64(){return Gn}visitUtf8(){return Er}visitBinary(){return Or}visitFixedSizeBinary(){return Vn}visitDate(){return Pn}visitDateDay(){return Fn}visitDateMillisecond(){return Nn}visitTimestamp(){return vr}visitTimestampSecond(){return xr}visitTimestampMillisecond(){return wr}visitTimestampMicrosecond(){return Sr}visitTimestampNanosecond(){return Ir}visitTime(){return gr}visitTimeSecond(){return mr}visitTimeMillisecond(){return yr}visitTimeMicrosecond(){return br}visitTimeNanosecond(){return _r}visitDecimal(){return Rn}visitList(){return Ss}visitStruct(){return ks}visitUnion(){return Ts}visitDenseUnion(){return Os}visitSparseUnion(){return Ms}visitDictionary(){return Un}visitInterval(){return Ar}visitIntervalDayTime(){return kr}visitIntervalYearMonth(){return Tr}visitFixedSizeList(){return Is}visitMap(){return As}}const wa=new xa;function Sa(t){const e=t.type,i=new(wa.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const n=t["children"]||[],r={nullValues:t["nullValues"]},s=Array.isArray(n)?(t,e)=>n[e]||r:({name:t})=>n[t]||r;e.children.forEach((t,e)=>{const{type:n}=t,r=s(t,e);i.children.push(Sa({...r,type:n}))})}return i}var Ia;Mn.new=Sa,Object.keys(ze).map(t=>ze[t]).filter(t=>"number"===typeof t&&t!==ze.NONE).forEach(t=>{const e=wa.visit(t);e.prototype._setValue=va.getVisitFn(t)}),Er.prototype._setValue=va.visitBinary,function(t){(function(e){(function(e){(function(e){class i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new i).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Re.apache.arrow.flatbuf.MetadataVersion.V1}schema(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new Re.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(e,i){let n=this.bb.__offset(this.bb_pos,8);return n?(i||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+n)+24*e,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(e,i){let n=this.bb.__offset(this.bb_pos,10);return n?(i||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+n)+24*e,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(4)}static addVersion(t,e){t.addFieldInt16(0,e,Re.apache.arrow.flatbuf.MetadataVersion.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static endFooter(t){let e=t.endObject();return e}static finishFooterBuffer(t,e){t.finish(e)}static createFooter(t,e,n,r,s){return i.startFooter(t),i.addVersion(t,e),i.addSchema(t,n),i.addDictionaries(t,r),i.addRecordBatches(t,s),i.endFooter(t)}}e.Footer=i})(e.flatbuf||(e.flatbuf={}))})(e.arrow||(e.arrow={}))})(t.apache||(t.apache={}))}(Ia||(Ia={})),function(t){(function(t){(function(t){(function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(t,e,i,n){return t.prep(8,24),t.writeInt64(n),t.pad(4),t.writeInt32(i),t.writeInt64(e),t.offset()}}t.Block=e})(t.flatbuf||(t.flatbuf={}))})(t.arrow||(t.arrow={}))})(t.apache||(t.apache={}))}(Ia||(Ia={}));var Aa=i("a6b2"),ka=Aa["a"].Long,Ta=Aa["a"].Builder,Ma=Aa["a"].ByteBuffer,Oa=Ia.apache.arrow.flatbuf.Block,Ea=Ia.apache.arrow.flatbuf.Footer;class Ca{constructor(t,e=Xe.V4,i,n){this.schema=t,this.version=e,i&&(this._recordBatches=i),n&&(this._dictionaryBatches=n)}static decode(t){t=new Ma(Object(pn["toUint8Array"])(t));const e=Ea.getRootAsFooter(t),i=_s.decode(e.schema());return new Da(i,e)}static encode(t){const e=new Ta,i=_s.encode(e,t.schema);Ea.startRecordBatchesVector(e,t.numRecordBatches),[...t.recordBatches()].slice().reverse().forEach(t=>Ba.encode(e,t));const n=e.endVector();Ea.startDictionariesVector(e,t.numDictionaries),[...t.dictionaryBatches()].slice().reverse().forEach(t=>Ba.encode(e,t));const r=e.endVector();return Ea.startFooter(e),Ea.addSchema(e,i),Ea.addVersion(e,Xe.V4),Ea.addRecordBatches(e,n),Ea.addDictionaries(e,r),Ea.finishFooterBuffer(e,Ea.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,i=this.numRecordBatches;++e<i;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,i=this.numDictionaries;++e<i;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Da extends Ca{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Ba.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Ba.decode(e)}return null}}class Ba{constructor(t,e,i){this.metaDataLength=t,this.offset="number"===typeof i?i:i.low,this.bodyLength="number"===typeof e?e:e.low}static decode(t){return new Ba(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:i}=e,n=new ka(e.offset,0),r=new ka(e.bodyLength,0);return Oa.createBlock(t,n,i,r)}}var La=i("f673");class Pa extends La["b"]{write(t){if((t=Object(pn["toUint8Array"])(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Object(Mr["a"])(this.toUint8Array(!0)):this.toUint8Array(!1).then(Mr["a"])}toUint8Array(t=!1){return t?Object(pn["joinUint8Arrays"])(this._values)[0]:(async()=>{let t=[],e=0;for await(const i of this)t.push(i),e+=i.byteLength;return Object(pn["joinUint8Arrays"])(t,e)[0]})()}}class Fa{constructor(t){t&&(this.source=new Ra(Ve["a"].fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Na{constructor(t){t instanceof Na?this.source=t.source:t instanceof Pa?this.source=new Ua(Ve["a"].fromAsyncIterable(t)):Object(bn["n"])(t)?this.source=new Ua(Ve["a"].fromNodeStream(t)):Object(bn["m"])(t)?this.source=new Ua(Ve["a"].fromDOMStream(t)):Object(bn["g"])(t)?this.source=new Ua(Ve["a"].fromDOMStream(t.body)):Object(bn["i"])(t)?this.source=new Ua(Ve["a"].fromIterable(t)):(Object(bn["l"])(t)||Object(bn["f"])(t))&&(this.source=new Ua(Ve["a"].fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Ra{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||La["c"])}return(t){return Object.create(this.source.return&&this.source.return(t)||La["c"])}}class Ua{constructor(t){this.source=t,this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}async cancel(t){await this.return(t)}get closed(){return this._closedPromise}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}async next(t,e="read"){return await this.source.next({cmd:e,size:t})}async throw(t){const e=this.source.throw&&await this.source.throw(t)||La["c"];return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}async return(t){const e=this.source.return&&await this.source.return(t)||La["c"];return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}}class Va extends Fa{constructor(t,e){super(),this.position=0,this.buffer=Object(pn["toUint8Array"])(t),this.size="undefined"===typeof e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:i}=this.readAt(t,4);return new DataView(e,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:i,position:n}=this;return e&&n<i?("number"!==typeof t&&(t=1/0),this.position=Math.min(i,n+Math.min(i-n,t)),e.subarray(n,this.position)):null}readAt(t,e){const i=this.buffer,n=Math.min(this.size,t+e);return i?i.subarray(t,n):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class ja extends Na{constructor(t,e){super(),this.position=0,this._handle=t,"number"===typeof e?this.size=e:this._pending=(async()=>{this.size=(await t.stat()).size,delete this._pending})()}async readInt32(t){const{buffer:e,byteOffset:i}=await this.readAt(t,4);return new DataView(e,i).getInt32(0,!0)}async seek(t){return this._pending&&await this._pending,this.position=Math.min(t,this.size),t<this.size}async read(t){this._pending&&await this._pending;const{_handle:e,size:i,position:n}=this;if(e&&n<i){"number"!==typeof t&&(t=1/0);let r=n,s=0,a=0,o=Math.min(i,r+Math.min(i-r,t)),c=new Uint8Array(Math.max(0,(this.position=o)-r));while((r+=a)<o&&(s+=a)<c.byteLength)({bytesRead:a}=await e.read(c,s,c.byteLength-s,r));return c}return null}async readAt(t,e){this._pending&&await this._pending;const{_handle:i,size:n}=this;if(i&&t+e<n){const r=Math.min(n,t+e),s=new Uint8Array(r-t);return(await i.read(s,0,e,t)).buffer}return new Uint8Array(e)}async close(){const t=this._handle;this._handle=null,t&&await t.close()}async throw(t){return await this.close(),{done:!0,value:t}}async return(t){return await this.close(),{done:!0,value:t}}}const za=65536;function Wa(t){return t<0&&(t=4294967295+t+1),"0x"+t.toString(16)}const $a=8,Ha=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Ya{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),i=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let n=e[3]*i[3];this.buffer[0]=65535&n;let r=n>>>16;return n=e[2]*i[3],r+=n,n=e[3]*i[2]>>>0,r+=n,this.buffer[0]+=r<<16,this.buffer[1]=r>>>0<n?za:0,this.buffer[1]+=r>>>16,this.buffer[1]+=e[1]*i[3]+e[2]*i[2]+e[3]*i[1],this.buffer[1]+=e[0]*i[3]+e[1]*i[2]+e[2]*i[1]+e[3]*i[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Wa(this.buffer[1])} ${Wa(this.buffer[0])}`}}class qa extends Ya{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return qa.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return qa.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const i=t.length;let n=new qa(e);for(let r=0;r<i;){const e=$a<i-r?$a:i-r,s=new qa(new Uint32Array([parseInt(t.substr(r,e),10),0])),a=new qa(new Uint32Array([Ha[e],0]));n.times(a),n.plus(s),r+=e}return n}static convertArray(t){const e=new Uint32Array(2*t.length);for(let i=-1,n=t.length;++i<n;)qa.from(t[i],new Uint32Array(e.buffer,e.byteOffset+2*i*4,2));return e}static multiply(t,e){let i=new qa(new Uint32Array(t.buffer));return i.times(e)}static add(t,e){let i=new qa(new Uint32Array(t.buffer));return i.plus(e)}}class Ga extends Ya{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,i=t.buffer[1]<<0;return e<i||e===i&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return Ga.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return Ga.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const i=t.startsWith("-"),n=t.length;let r=new Ga(e);for(let s=i?1:0;s<n;){const e=$a<n-s?$a:n-s,i=new Ga(new Uint32Array([parseInt(t.substr(s,e),10),0])),a=new Ga(new Uint32Array([Ha[e],0]));r.times(a),r.plus(i),s+=e}return i?r.negate():r}static convertArray(t){const e=new Uint32Array(2*t.length);for(let i=-1,n=t.length;++i<n;)Ga.from(t[i],new Uint32Array(e.buffer,e.byteOffset+2*i*4,2));return e}static multiply(t,e){let i=new Ga(new Uint32Array(t.buffer));return i.times(e)}static add(t,e){let i=new Ga(new Uint32Array(t.buffer));return i.plus(e)}}class Ka{constructor(t){this.buffer=t}high(){return new Ga(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Ga(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new qa(new Uint32Array([this.buffer[3],0])),i=new qa(new Uint32Array([this.buffer[2],0])),n=new qa(new Uint32Array([this.buffer[1],0])),r=new qa(new Uint32Array([this.buffer[0],0])),s=new qa(new Uint32Array([t.buffer[3],0])),a=new qa(new Uint32Array([t.buffer[2],0])),o=new qa(new Uint32Array([t.buffer[1],0])),c=new qa(new Uint32Array([t.buffer[0],0]));let h=qa.multiply(r,c);this.buffer[0]=h.low();let l=new qa(new Uint32Array([h.high(),0]));h=qa.multiply(n,c),l.plus(h),h=qa.multiply(r,o),l.plus(h),this.buffer[1]=l.low(),this.buffer[3]=l.lessThan(h)?1:0,this.buffer[2]=l.high();let u=new qa(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2));return u.plus(qa.multiply(i,c)).plus(qa.multiply(n,o)).plus(qa.multiply(r,a)),this.buffer[3]+=qa.multiply(e,c).plus(qa.multiply(i,o)).plus(qa.multiply(n,a)).plus(qa.multiply(r,s)).low(),this}plus(t){let e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${Wa(this.buffer[3])} ${Wa(this.buffer[2])} ${Wa(this.buffer[1])} ${Wa(this.buffer[0])}`}static multiply(t,e){let i=new Ka(new Uint32Array(t.buffer));return i.times(e)}static add(t,e){let i=new Ka(new Uint32Array(t.buffer));return i.plus(e)}static from(t,e=new Uint32Array(4)){return Ka.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return Ka.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const i=t.startsWith("-"),n=t.length;let r=new Ka(e);for(let s=i?1:0;s<n;){const e=$a<n-s?$a:n-s,i=new Ka(new Uint32Array([parseInt(t.substr(s,e),10),0,0,0])),a=new Ka(new Uint32Array([Ha[e],0,0,0]));r.times(a),r.plus(i),s+=e}return i?r.negate():r}static convertArray(t){const e=new Uint32Array(4*t.length);for(let i=-1,n=t.length;++i<n;)Ka.from(t[i],new Uint32Array(e.buffer,e.byteOffset+16*i,4));return e}}class Xa extends ai{constructor(t,e,i,n){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=i,this.dictionaries=n}visit(t){return super.visit(t instanceof vs?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return gn.Null(t,0,e)}visitBool(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Bool(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitInt(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Int(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitFloat(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Float(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitUtf8(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Utf8(t,0,e,i,this.readNullBitmap(t,i),this.readOffsets(t),this.readData(t))}visitBinary(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Binary(t,0,e,i,this.readNullBitmap(t,i),this.readOffsets(t),this.readData(t))}visitFixedSizeBinary(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.FixedSizeBinary(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitDate(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Date(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitTimestamp(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Timestamp(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitTime(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Time(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitDecimal(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Decimal(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitList(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.List(t,0,e,i,this.readNullBitmap(t,i),this.readOffsets(t),this.visit(t.children[0]))}visitStruct(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Struct(t,0,e,i,this.readNullBitmap(t,i),this.visitMany(t.children))}visitUnion(t){return t.mode===qe.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Union(t,0,e,i,this.readNullBitmap(t,i),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))}visitSparseUnion(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Union(t,0,e,i,this.readNullBitmap(t,i),this.readTypeIds(t),this.visitMany(t.children))}visitDictionary(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Dictionary(t,0,e,i,this.readNullBitmap(t,i),this.readData(t.indices),this.readDictionary(t))}visitInterval(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Interval(t,0,e,i,this.readNullBitmap(t,i),this.readData(t))}visitFixedSizeList(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.FixedSizeList(t,0,e,i,this.readNullBitmap(t,i),this.visit(t.children[0]))}visitMap(t,{length:e,nullCount:i}=this.nextFieldNode()){return gn.Map(t,0,e,i,this.readNullBitmap(t,i),this.readOffsets(t),this.visit(t.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,i=this.nextBufferRange()){return e>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Ja extends Xa{constructor(t,e,i,n){super(new Uint8Array(0),e,i,n),this.sources=t}readNullBitmap(t,e,{offset:i}=this.nextBufferRange()){return e<=0?new Uint8Array(0):ei(this.sources[i])}readOffsets(t,{offset:e}=this.nextBufferRange()){return Object(pn["toArrayBufferView"])(Uint8Array,Object(pn["toArrayBufferView"])(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return Object(pn["toArrayBufferView"])(Uint8Array,Object(pn["toArrayBufferView"])(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:i}=this;return ki.isTimestamp(t)||(ki.isInt(t)||ki.isTime(t))&&64===t.bitWidth||ki.isDate(t)&&t.unit===$e.MILLISECOND?Object(pn["toArrayBufferView"])(Uint8Array,Ga.convertArray(i[e])):ki.isDecimal(t)?Object(pn["toArrayBufferView"])(Uint8Array,Ka.convertArray(i[e])):ki.isBinary(t)||ki.isFixedSizeBinary(t)?Qa(i[e]):ki.isBool(t)?ei(i[e]):ki.isUtf8(t)?Object(Mr["b"])(i[e].join("")):Object(pn["toArrayBufferView"])(Uint8Array,Object(pn["toArrayBufferView"])(t.ArrayType,i[e].map(t=>+t)))}}function Qa(t){const e=t.join(""),i=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)i[n>>1]=parseInt(e.substr(n,2),16);return i}var Za=Aa["a"].Long,to=Re.apache.arrow.flatbuf.Null,eo=Re.apache.arrow.flatbuf.Int,io=Re.apache.arrow.flatbuf.FloatingPoint,no=Re.apache.arrow.flatbuf.Binary,ro=Re.apache.arrow.flatbuf.Bool,so=Re.apache.arrow.flatbuf.Utf8,ao=Re.apache.arrow.flatbuf.Decimal,oo=Re.apache.arrow.flatbuf.Date,co=Re.apache.arrow.flatbuf.Time,ho=Re.apache.arrow.flatbuf.Timestamp,lo=Re.apache.arrow.flatbuf.Interval,uo=Re.apache.arrow.flatbuf.List,po=Re.apache.arrow.flatbuf.Struct_,fo=Re.apache.arrow.flatbuf.Union,go=Re.apache.arrow.flatbuf.DictionaryEncoding,mo=Re.apache.arrow.flatbuf.FixedSizeBinary,yo=Re.apache.arrow.flatbuf.FixedSizeList,bo=Re.apache.arrow.flatbuf.Map;class _o extends ai{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return to.startNull(e),to.endNull(e)}visitInt(t,e){return eo.startInt(e),eo.addBitWidth(e,t.bitWidth),eo.addIsSigned(e,t.isSigned),eo.endInt(e)}visitFloat(t,e){return io.startFloatingPoint(e),io.addPrecision(e,t.precision),io.endFloatingPoint(e)}visitBinary(t,e){return no.startBinary(e),no.endBinary(e)}visitBool(t,e){return ro.startBool(e),ro.endBool(e)}visitUtf8(t,e){return so.startUtf8(e),so.endUtf8(e)}visitDecimal(t,e){return ao.startDecimal(e),ao.addScale(e,t.scale),ao.addPrecision(e,t.precision),ao.endDecimal(e)}visitDate(t,e){return oo.startDate(e),oo.addUnit(e,t.unit),oo.endDate(e)}visitTime(t,e){return co.startTime(e),co.addUnit(e,t.unit),co.addBitWidth(e,t.bitWidth),co.endTime(e)}visitTimestamp(t,e){const i=t.timezone&&e.createString(t.timezone)||void 0;return ho.startTimestamp(e),ho.addUnit(e,t.unit),void 0!==i&&ho.addTimezone(e,i),ho.endTimestamp(e)}visitInterval(t,e){return lo.startInterval(e),lo.addUnit(e,t.unit),lo.endInterval(e)}visitList(t,e){return uo.startList(e),uo.endList(e)}visitStruct(t,e){return po.startStruct_(e),po.endStruct_(e)}visitUnion(t,e){fo.startTypeIdsVector(e,t.typeIds.length);const i=fo.createTypeIdsVector(e,t.typeIds);return fo.startUnion(e),fo.addMode(e,t.mode),fo.addTypeIds(e,i),fo.endUnion(e)}visitDictionary(t,e){const i=this.visit(t.indices,e);return go.startDictionaryEncoding(e),go.addId(e,new Za(t.id,0)),go.addIsOrdered(e,t.isOrdered),void 0!==i&&go.addIndexType(e,i),go.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return mo.startFixedSizeBinary(e),mo.addByteWidth(e,t.byteWidth),mo.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return yo.startFixedSizeList(e),yo.addListSize(e,t.listSize),yo.endFixedSizeList(e)}visitMap(t,e){return bo.startMap(e),bo.addKeysSorted(e,t.keysSorted),bo.endMap(e)}}const vo=new _o;function xo(t,e=new Map){return new _s(Io(t,e),Eo(t["customMetadata"]),e)}function wo(t){return new qo(t["count"],ko(t["columns"]),To(t["columns"]))}function So(t){return new Go(wo(t["data"]),t["id"],t["isDelta"])}function Io(t,e){return(t["fields"]||[]).filter(Boolean).map(t=>vs.fromJSON(t,e))}function Ao(t,e){return(t["children"]||[]).filter(Boolean).map(t=>vs.fromJSON(t,e))}function ko(t){return(t||[]).reduce((t,e)=>[...t,new Xo(e["count"],Mo(e["VALIDITY"])),...ko(e["children"])],[])}function To(t,e=[]){for(let i=-1,n=(t||[]).length;++i<n;){const n=t[i];n["VALIDITY"]&&e.push(new Ko(e.length,n["VALIDITY"].length)),n["TYPE"]&&e.push(new Ko(e.length,n["TYPE"].length)),n["OFFSET"]&&e.push(new Ko(e.length,n["OFFSET"].length)),n["DATA"]&&e.push(new Ko(e.length,n["DATA"].length)),e=To(n["children"],e)}return e}function Mo(t){return(t||[]).reduce((t,e)=>t+ +(0===e),0)}function Oo(t,e){let i,n,r,s,a,o;return e&&(s=t["dictionary"])?e.has(i=s["id"])?(n=(n=s["indexType"])?Co(n):new Ci,o=new un(e.get(i),n,i,s["isOrdered"]),r=new vs(t["name"],o,t["nullable"],Eo(t["customMetadata"]))):(n=(n=s["indexType"])?Co(n):new Ci,e.set(i,a=Do(t,Ao(t,e))),o=new un(a,n,i,s["isOrdered"]),r=new vs(t["name"],o,t["nullable"],Eo(t["customMetadata"]))):(a=Do(t,Ao(t,e)),r=new vs(t["name"],a,t["nullable"],Eo(t["customMetadata"]))),r||null}function Eo(t){return new Map(Object.entries(t||{}))}function Co(t){return new Mi(t["isSigned"],t["bitWidth"])}function Do(t,e){const i=t["type"]["name"];switch(i){case"NONE":return new Ti;case"null":return new Ti;case"binary":return new ji;case"utf8":return new zi;case"bool":return new Wi;case"list":return new rn((e||[])[0]);case"struct":return new sn(e||[]);case"struct_":return new sn(e||[])}switch(i){case"int":{const e=t["type"];return new Mi(e["isSigned"],e["bitWidth"])}case"floatingpoint":{const e=t["type"];return new Ni(Ye[e["precision"]])}case"decimal":{const e=t["type"];return new $i(e["scale"],e["precision"])}case"date":{const e=t["type"];return new Hi($e[e["unit"]])}case"time":{const e=t["type"];return new Gi(He[e["unit"]],e["bitWidth"])}case"timestamp":{const e=t["type"];return new Zi(He[e["unit"]],e["timezone"])}case"interval":{const e=t["type"];return new tn(Ge[e["unit"]])}case"union":{const i=t["type"];return new an(qe[i["mode"]],i["typeIds"]||[],e||[])}case"fixedsizebinary":{const e=t["type"];return new on(e["byteWidth"])}case"fixedsizelist":{const i=t["type"];return new cn(i["listSize"],(e||[])[0])}case"map":{const i=t["type"];return new hn((e||[])[0],i["keysSorted"])}}throw new Error(`Unrecognized type: "${i}"`)}var Bo=Aa["a"].Long,Lo=Aa["a"].Builder,Po=Aa["a"].ByteBuffer,Fo=Re.apache.arrow.flatbuf.Type,No=Re.apache.arrow.flatbuf.Field,Ro=Re.apache.arrow.flatbuf.Schema,Uo=Re.apache.arrow.flatbuf.Buffer,Vo=Ue.apache.arrow.flatbuf.Message,jo=Re.apache.arrow.flatbuf.KeyValue,zo=Ue.apache.arrow.flatbuf.FieldNode,Wo=Re.apache.arrow.flatbuf.Endianness,$o=Ue.apache.arrow.flatbuf.RecordBatch,Ho=Ue.apache.arrow.flatbuf.DictionaryBatch;class Yo{constructor(t,e,i,n){this._version=e,this._headerType=i,this.body=new Uint8Array(0),n&&(this._createHeader=()=>n),this._bodyLength="number"===typeof t?t:t.low}static fromJSON(t,e){const i=new Yo(0,Xe.V4,e);return i._createHeader=Jo(t,e),i}static decode(t){t=new Po(Object(pn["toUint8Array"])(t));const e=Vo.getRootAsMessage(t),i=e.bodyLength(),n=e.version(),r=e.headerType(),s=new Yo(i,n,r);return s._createHeader=Qo(e,r),s}static encode(t){let e=new Lo,i=-1;return t.isSchema()?i=_s.encode(e,t.header()):t.isRecordBatch()?i=qo.encode(e,t.header()):t.isDictionaryBatch()&&(i=Go.encode(e,t.header())),Vo.startMessage(e),Vo.addVersion(e,Xe.V4),Vo.addHeader(e,i),Vo.addHeaderType(e,t.headerType),Vo.addBodyLength(e,new Bo(t.bodyLength,0)),Vo.finishMessageBuffer(e,Vo.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof _s)return new Yo(0,Xe.V4,Ke.Schema,t);if(t instanceof qo)return new Yo(e,Xe.V4,Ke.RecordBatch,t);if(t instanceof Go)return new Yo(e,Xe.V4,Ke.DictionaryBatch,t);throw new Error("Unrecognized Message header: "+t)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ke.Schema}isRecordBatch(){return this.headerType===Ke.RecordBatch}isDictionaryBatch(){return this.headerType===Ke.DictionaryBatch}}class qo{constructor(t,e,i){this._nodes=e,this._buffers=i,this._length="number"===typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Go{constructor(t,e,i=!1){this._data=t,this._isDelta=i,this._id="number"===typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Ko{constructor(t,e){this.offset="number"===typeof t?t:t.low,this.length="number"===typeof e?e:e.low}}class Xo{constructor(t,e){this.length="number"===typeof t?t:t.low,this.nullCount="number"===typeof e?e:e.low}}function Jo(t,e){return()=>{switch(e){case Ke.Schema:return _s.fromJSON(t);case Ke.RecordBatch:return qo.fromJSON(t);case Ke.DictionaryBatch:return Go.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Ke[e]}, type: ${e} }`)}}function Qo(t,e){return()=>{switch(e){case Ke.Schema:return _s.decode(t.header(new Ro));case Ke.RecordBatch:return qo.decode(t.header(new $o),t.version());case Ke.DictionaryBatch:return Go.decode(t.header(new Ho),t.version())}throw new Error(`Unrecognized Message type: { name: ${Ke[e]}, type: ${e} }`)}}function Zo(t,e=new Map){const i=ac(t,e);return new _s(i,hc(t),e)}function tc(t,e=Xe.V4){return new qo(t.length(),rc(t),sc(t,e))}function ec(t,e=Xe.V4){return new Go(qo.decode(t.data(),e),t.id(),t.isDelta())}function ic(t){return new Ko(t.offset(),t.length())}function nc(t){return new Xo(t.length(),t.nullCount())}function rc(t){const e=[];for(let i,n=-1,r=-1,s=t.nodesLength();++n<s;)(i=t.nodes(n))&&(e[++r]=Xo.decode(i));return e}function sc(t,e){const i=[];for(let n,r=-1,s=-1,a=t.buffersLength();++r<a;)(n=t.buffers(r))&&(e<Xe.V4&&(n.bb_pos+=8*(r+1)),i[++s]=Ko.decode(n));return i}function ac(t,e){const i=[];for(let n,r=-1,s=-1,a=t.fieldsLength();++r<a;)(n=t.fields(r))&&(i[++s]=vs.decode(n,e));return i}function oc(t,e){const i=[];for(let n,r=-1,s=-1,a=t.childrenLength();++r<a;)(n=t.children(r))&&(i[++s]=vs.decode(n,e));return i}function cc(t,e){let i,n,r,s,a,o;return e&&(o=t.dictionary())?e.has(i=o.id().low)?(s=(s=o.indexType())?lc(s):new Ci,a=new un(e.get(i),s,i,o.isOrdered()),n=new vs(t.name(),a,t.nullable(),hc(t))):(s=(s=o.indexType())?lc(s):new Ci,e.set(i,r=uc(t,oc(t,e))),a=new un(r,s,i,o.isOrdered()),n=new vs(t.name(),a,t.nullable(),hc(t))):(r=uc(t,oc(t,e)),n=new vs(t.name(),r,t.nullable(),hc(t))),n||null}function hc(t){const e=new Map;if(t)for(let i,n,r=-1,s=0|t.customMetadataLength();++r<s;)(i=t.customMetadata(r))&&null!=(n=i.key())&&e.set(n,i.value());return e}function lc(t){return new Mi(t.isSigned(),t.bitWidth())}function uc(t,e){const i=t.typeType();switch(i){case Fo.NONE:return new Ti;case Fo.Null:return new Ti;case Fo.Binary:return new ji;case Fo.Utf8:return new zi;case Fo.Bool:return new Wi;case Fo.List:return new rn((e||[])[0]);case Fo.Struct_:return new sn(e||[])}switch(i){case Fo.Int:{const e=t.type(new Re.apache.arrow.flatbuf.Int);return new Mi(e.isSigned(),e.bitWidth())}case Fo.FloatingPoint:{const e=t.type(new Re.apache.arrow.flatbuf.FloatingPoint);return new Ni(e.precision())}case Fo.Decimal:{const e=t.type(new Re.apache.arrow.flatbuf.Decimal);return new $i(e.scale(),e.precision())}case Fo.Date:{const e=t.type(new Re.apache.arrow.flatbuf.Date);return new Hi(e.unit())}case Fo.Time:{const e=t.type(new Re.apache.arrow.flatbuf.Time);return new Gi(e.unit(),e.bitWidth())}case Fo.Timestamp:{const e=t.type(new Re.apache.arrow.flatbuf.Timestamp);return new Zi(e.unit(),e.timezone())}case Fo.Interval:{const e=t.type(new Re.apache.arrow.flatbuf.Interval);return new tn(e.unit())}case Fo.Union:{const i=t.type(new Re.apache.arrow.flatbuf.Union);return new an(i.mode(),i.typeIdsArray()||[],e||[])}case Fo.FixedSizeBinary:{const e=t.type(new Re.apache.arrow.flatbuf.FixedSizeBinary);return new on(e.byteWidth())}case Fo.FixedSizeList:{const i=t.type(new Re.apache.arrow.flatbuf.FixedSizeList);return new cn(i.listSize(),(e||[])[0])}case Fo.Map:{const i=t.type(new Re.apache.arrow.flatbuf.Map);return new hn((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Fo[i]}" (${i})`)}function dc(t,e){const i=e.fields.map(e=>vs.encode(t,e));Ro.startFieldsVector(t,i.length);const n=Ro.createFieldsVector(t,i),r=e.metadata&&e.metadata.size>0?Ro.createCustomMetadataVector(t,[...e.metadata].map(([e,i])=>{const n=t.createString(""+e),r=t.createString(""+i);return jo.startKeyValue(t),jo.addKey(t,n),jo.addValue(t,r),jo.endKeyValue(t)})):-1;return Ro.startSchema(t),Ro.addFields(t,n),Ro.addEndianness(t,bc?Wo.Little:Wo.Big),-1!==r&&Ro.addCustomMetadata(t,r),Ro.endSchema(t)}function pc(t,e){let i=-1,n=-1,r=-1,s=e.type,a=e.typeId;ki.isDictionary(s)?(a=s.dictionary.typeId,r=vo.visit(s,t),n=vo.visit(s.dictionary,t)):n=vo.visit(s,t);const o=(s.children||[]).map(e=>vs.encode(t,e)),c=No.createChildrenVector(t,o),h=e.metadata&&e.metadata.size>0?No.createCustomMetadataVector(t,[...e.metadata].map(([e,i])=>{const n=t.createString(""+e),r=t.createString(""+i);return jo.startKeyValue(t),jo.addKey(t,n),jo.addValue(t,r),jo.endKeyValue(t)})):-1;return e.name&&(i=t.createString(e.name)),No.startField(t),No.addType(t,n),No.addTypeType(t,a),No.addChildren(t,c),No.addNullable(t,!!e.nullable),-1!==i&&No.addName(t,i),-1!==r&&No.addDictionary(t,r),-1!==h&&No.addCustomMetadata(t,h),No.endField(t)}function fc(t,e){const i=e.nodes||[],n=e.buffers||[];$o.startNodesVector(t,i.length),i.slice().reverse().forEach(e=>Xo.encode(t,e));const r=t.endVector();$o.startBuffersVector(t,n.length),n.slice().reverse().forEach(e=>Ko.encode(t,e));const s=t.endVector();return $o.startRecordBatch(t),$o.addLength(t,new Bo(e.length,0)),$o.addNodes(t,r),$o.addBuffers(t,s),$o.endRecordBatch(t)}function gc(t,e){const i=qo.encode(t,e.data);return Ho.startDictionaryBatch(t),Ho.addId(t,new Bo(e.id,0)),Ho.addIsDelta(t,e.isDelta),Ho.addData(t,i),Ho.endDictionaryBatch(t)}function mc(t,e){return zo.createFieldNode(t,new Bo(e.length,0),new Bo(e.nullCount,0))}function yc(t,e){return Uo.createBuffer(t,new Bo(e.offset,0),new Bo(e.length,0))}vs["encode"]=pc,vs["decode"]=cc,vs["fromJSON"]=Oo,_s["encode"]=dc,_s["decode"]=Zo,_s["fromJSON"]=xo,qo["encode"]=fc,qo["decode"]=tc,qo["fromJSON"]=wo,Go["encode"]=gc,Go["decode"]=ec,Go["fromJSON"]=So,Xo["encode"]=mc,Xo["decode"]=nc,Ko["encode"]=yc,Ko["decode"]=ic;const bc=function(){const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}();var _c=Aa["a"].ByteBuffer;const vc=t=>`Expected ${Ke[t]} Message in stream, but was null or length 0.`,xc=t=>`Header pointer of flatbuffer-encoded ${Ke[t]} Message is null or length 0.`,wc=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,Sc=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class Ic{constructor(t){this.source=t instanceof Fa?t:new Fa(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?La["c"]:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(vc(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=Object(pn["toUint8Array"])(this.source.read(t));if(e.byteLength<t)throw new Error(Sc(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=Ke.Schema,i=this.readMessage(e),n=i&&i.header();if(t&&!n)throw new Error(xc(e));return n}readMetadataLength(){const t=this.source.read(Tc),e=t&&new _c(t),i=e&&e.readInt32(0)||0;return{done:0===i,value:i}}readMetadata(t){const e=this.source.read(t);if(!e)return La["c"];if(e.byteLength<t)throw new Error(wc(t,e.byteLength));return{done:!1,value:Yo.decode(e)}}}class Ac{constructor(t,e){this.source=t instanceof Na?t:Object(bn["h"])(t)?new ja(t,e):new Na(t)}[Symbol.asyncIterator](){return this}async next(){let t;return(t=await this.readMetadataLength()).done||-1===t.value&&(t=await this.readMetadataLength()).done||(t=await this.readMetadata(t.value)).done?La["c"]:t}async throw(t){return await this.source.throw(t)}async return(t){return await this.source.return(t)}async readMessage(t){let e;if((e=await this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(vc(t));return e.value}async readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=Object(pn["toUint8Array"])(await this.source.read(t));if(e.byteLength<t)throw new Error(Sc(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}async readSchema(t=!1){const e=Ke.Schema,i=await this.readMessage(e),n=i&&i.header();if(t&&!n)throw new Error(xc(e));return n}async readMetadataLength(){const t=await this.source.read(Tc),e=t&&new _c(t),i=e&&e.readInt32(0)||0;return{done:0===i,value:i}}async readMetadata(t){const e=await this.source.read(t);if(!e)return La["c"];if(e.byteLength<t)throw new Error(wc(t,e.byteLength));return{done:!1,value:Yo.decode(e)}}}class kc extends Ic{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof La["a"]?t:new La["a"](t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;const e=Yo.fromJSON(t.schema,Ke.Schema);return{done:!1,value:e}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e["data"]["columns"];const i=Yo.fromJSON(e,Ke.DictionaryBatch);return{done:!1,value:i}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e["columns"];const i=Yo.fromJSON(e,Ke.RecordBatch);return{done:!1,value:i}}return this._body=[],La["c"]}readMessageBody(t){return e(this._body);function e(t){return(t||[]).reduce((t,i)=>[...t,...i["VALIDITY"]&&[i["VALIDITY"]]||[],...i["TYPE"]&&[i["TYPE"]]||[],...i["OFFSET"]&&[i["OFFSET"]]||[],...i["DATA"]&&[i["DATA"]]||[],...e(i["children"])],[])}}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(vc(t));return e.value}readSchema(){const t=Ke.Schema,e=this.readMessage(t),i=e&&e.header();if(!e||!i)throw new Error(xc(t));return i}}const Tc=4,Mc="ARROW1",Oc=new Uint8Array(Mc.length);for(let rv=0;rv<Mc.length;rv+=1)Oc[rv]=Mc.charCodeAt(rv);function Ec(t,e=0){for(let i=-1,n=Oc.length;++i<n;)if(Oc[i]!==t[e+i])return!1;return!0}const Cc=Oc.length,Dc=Cc+Tc,Bc=2*Cc+Tc;class Lc extends ai{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=new Lc,i=ps(vu,t),[n=e]=e.visitMany(i);return n}visit(t){if(!ki.isDictionary(t.type)){const{data:e,length:i,nullCount:n}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");ki.isNull(t.type)||Pc.call(this,n<=0?new Uint8Array(0):ti(e.offset,i,e.nullBitmap)),this.nodes.push(new Xo(i,n))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Pc(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Ko(this._byteLength,e)),this._byteLength+=e,this}function Fc(t){const{type:e,length:i,typeIds:n,valueOffsets:r}=t;if(Pc.call(this,n),e.mode===qe.Sparse)return jc.call(this,t);if(e.mode===qe.Dense){if(t.offset<=0)return Pc.call(this,r),jc.call(this,t);{const s=n.reduce((t,e)=>Math.max(t,e),n[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),c=new Int32Array(i),h=Object(pn["rebaseValueOffsets"])(-r[0],i,r);for(let t,e,r=-1;++r<i;)-1===(e=o[t=n[r]])&&(e=o[t]=h[t]),c[r]=h[r]-e,++a[t];Pc.call(this,c);for(let n,r=-1,l=e.children.length;++r<l;)if(n=t.getChildAt(r)){const t=e.typeIds[r],s=Math.min(i,a[t]);this.visit(n.slice(o[t],s))}}}return this}function Nc(t){let e;return t.nullCount>=t.length?Pc.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Pc.call(this,ti(t.offset,t.length,e)):Pc.call(this,ei(t))}function Rc(t){return Pc.call(this,t.values.subarray(0,t.length*t.stride))}function Uc(t){const{length:e,values:i,valueOffsets:n}=t,r=n[0],s=n[e],a=Math.min(s-r,i.byteLength-r);return Pc.call(this,Object(pn["rebaseValueOffsets"])(-n[0],e,n)),Pc.call(this,i.subarray(r,r+a)),this}function Vc(t){const{length:e,valueOffsets:i}=t;return i&&Pc.call(this,Object(pn["rebaseValueOffsets"])(i[0],e,i)),this.visit(t.getChildAt(0))}function jc(t){return this.visitMany(t.type.children.map((e,i)=>t.getChildAt(i)).filter(Boolean))[0]}Lc.prototype.visitBool=Nc,Lc.prototype.visitInt=Rc,Lc.prototype.visitFloat=Rc,Lc.prototype.visitUtf8=Uc,Lc.prototype.visitBinary=Uc,Lc.prototype.visitFixedSizeBinary=Rc,Lc.prototype.visitDate=Rc,Lc.prototype.visitTimestamp=Rc,Lc.prototype.visitTime=Rc,Lc.prototype.visitDecimal=Rc,Lc.prototype.visitList=Vc,Lc.prototype.visitStruct=jc,Lc.prototype.visitUnion=Fc,Lc.prototype.visitInterval=Rc,Lc.prototype.visitFixedSizeList=Vc,Lc.prototype.visitMap=Vc;class zc extends La["d"]{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Pa,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Object(bn["k"])(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Object(bn["l"])(t)?t.then(t=>this.writeAll(t)):Object(bn["f"])(t)?Yc(this,t):Hc(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){return t===this._sink||t instanceof Pa?this._sink=t:(this._sink=new Pa,t&&Object(bn["o"])(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Object(bn["p"])(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&e.compareTo(this._schema)||(null===e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null===t||void 0===t)return this.finish()&&void 0;if(t instanceof yu&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof vu&&!(e=t.schema))return this.finish()&&void 0;if(e&&!e.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof vu?t instanceof xu||this._writeRecordBatch(t):t instanceof yu?this.writeAll(t.chunks):Object(bn["i"])(t)&&this.writeAll(t)}_writeMessage(t,e=8){const i=e-1,n=Yo.encode(t),r=n.byteLength,s=this._writeLegacyIpcFormat?4:8,a=r+s+i&~i,o=a-r-s;return t.headerType===Ke.RecordBatch?this._recordBatchBlocks.push(new Ba(a,t.bodyLength,this._position)):t.headerType===Ke.DictionaryBatch&&this._dictionaryBlocks.push(new Ba(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),r>0&&this._write(n),this._writePadding(o)}_write(t){if(this._started){const e=Object(pn["toUint8Array"])(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(Yo.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Oc)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:i,bufferRegions:n,buffers:r}=Lc.assemble(t),s=new qo(t.length,i,n),a=Yo.from(s,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(r)}_writeDictionaryBatch(t,e,i=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:n,nodes:r,bufferRegions:s,buffers:a}=Lc.assemble(t),o=new qo(t.length,r,s),c=new Go(o,e,i),h=Yo.from(c,n);return this._writeMessage(h)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,i,n;for(let r=-1,s=t.length;++r<s;)(e=t[r])&&(i=e.byteLength)>0&&(this._write(e),(n=(i+7&-8)-i)>0&&this._writePadding(n));return this}_writeDictionaries(t){for(let[e,i]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(i=i.slice(t)).length>0){const n="chunks"in i?i.chunks:[i];for(const i of n)this._writeDictionaryBatch(i,e,t>0),t+=i.length}}return this}}class Wc extends zc{static writeAll(t,e){const i=new Wc(e);return Object(bn["l"])(t)?t.then(t=>i.writeAll(t)):Object(bn["f"])(t)?Yc(i,t):Hc(i,t)}}class $c extends zc{static writeAll(t){const e=new $c;return Object(bn["l"])(t)?t.then(t=>e.writeAll(t)):Object(bn["f"])(t)?Yc(e,t):Hc(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Ca.encode(new Ca(t,Xe.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Hc(t,e){let i=e;e instanceof yu&&(i=e.chunks,t.reset(void 0,e.schema));for(const n of i)t.write(n);return t.finish()}async function Yc(t,e){for await(const i of e)t.write(i);return t.finish()}const qc=new Uint8Array(0),Gc=t=>[qc,qc,new Uint8Array(t),qc];function Kc(t,e,i=e.reduce((t,e)=>Math.max(t,e.length),0)){let n,r,s=-1,a=e.length;const o=[...t.fields],c=[],h=(i+63&-64)>>3;while(++s<a)(n=e[s])&&n.length===i?c[s]=n:((r=o[s]).nullable||(o[s]=o[s].clone({nullable:!0})),c[s]=n?n._changeLengthAndBackfillNullBitmap(i):gn.new(r.type,0,i,i,Gc(h)));return[new _s(o),i,c]}function Xc(t){return Jc(new _s(t.map(({field:t})=>t)),t)}function Jc(t,e){return Qc(t,e.map(t=>t instanceof is?t.chunks.map(t=>t.data):[t.data]))}function Qc(t,e){const i=[...t.fields],n=[],r={numBatches:e.reduce((t,e)=>Math.max(t,e.length),0)};let s,a=0,o=0,c=-1,h=e.length,l=[];while(r.numBatches-- >0){for(o=Number.POSITIVE_INFINITY,c=-1;++c<h;)l[c]=s=e[c].shift(),o=Math.min(o,s?s.length:o);isFinite(o)&&(l=Zc(i,o,l,e,r),o>0&&(n[a++]=[o,l.slice()]))}return[t=new _s(i,t.metadata),n.map(e=>new vu(t,...e))]}function Zc(t,e,i,n,r){let s,a,o=0,c=-1,h=n.length;const l=(e+63&-64)>>3;while(++c<h)(s=i[c])&&(o=s.length)>=e?o===e?i[c]=s:(i[c]=s.slice(0,e),s=s.slice(e,o-e),r.numBatches=Math.max(r.numBatches,n[c].unshift(s))):((a=t[c]).nullable||(t[c]=a.clone({nullable:!0})),i[c]=s?s._changeLengthAndBackfillNullBitmap(e):gn.new(a.type,0,e,e,Gc(l)));return i}class th extends je{constructor(t,e){super(),this._children=e,this.numChildren=t.childData.length,this._bindDataAccessors(this.data=t)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return ze[this.typeId]+"Vector"}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(t,e=this._children){return je.new(t,e)}concat(...t){return is.concat(this,...t)}slice(t,e){return $r(this,t,e,this._sliceInternal)}isValid(t){if(this.nullCount>0){const e=this.offset+t,i=this.nullBitmap[e>>3],n=i&1<<e%8;return 0!==n}return!0}getChildAt(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=je.new(this.data.childData[t]))}toJSON(){return[...this]}_sliceInternal(t,e,i){return t.clone(t.data.slice(e,i-e),null)}_bindDataAccessors(t){}}th.prototype[Symbol.isConcatSpreadable]=!0;class eh extends th{asUtf8(){return je.new(this.data.clone(new zi))}}class ih extends th{static from(t){return uu(()=>new Wi,t)}}class nh extends th{static from(...t){return 2===t.length?uu(()=>t[1]===$e.DAY?new Yi:new qi,t[0]):uu(()=>new qi,t[0])}}class rh extends nh{}class sh extends nh{}class ah extends th{}class oh extends th{constructor(t){super(t),this.indices=je.new(t.clone(this.type.indices))}static from(...t){if(3===t.length){const[e,i,n]=t,r=new un(e.type,i,null,null);return je.new(gn.Dictionary(r,0,n.length,0,null,n,e))}return uu(()=>t[0].type,t[0])}get dictionary(){return this.data.dictionary}reverseLookup(t){return this.dictionary.indexOf(t)}getKey(t){return this.indices.get(t)}getValue(t){return this.dictionary.get(t)}setKey(t,e){return this.indices.set(t,e)}setValue(t,e){return this.dictionary.set(t,e)}}oh.prototype.indices=null;class ch extends th{}class hh extends th{}class lh extends th{static from(t){let e=mh(this);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){let i=gh(t.constructor)||e;if(null===e&&(e=i),e&&e===i){let i=new e,n=t.byteLength/i.ArrayType.BYTES_PER_ELEMENT;if(!fh(e,t.constructor))return je.new(gn.Float(i,0,n,0,null,t))}}if(e)return uu(()=>new e,t);if(t instanceof DataView||t instanceof ArrayBuffer)throw new TypeError("Cannot infer float type from instance of "+t.constructor.name);throw new TypeError("Unrecognized FloatVector input")}}class uh extends lh{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}class dh extends lh{}class ph extends lh{}const fh=(t,e)=>t===Ri&&e!==Uint16Array,gh=t=>{switch(t){case Uint16Array:return Ri;case Float32Array:return Ui;case Float64Array:return Vi;default:return null}},mh=t=>{switch(t){case uh:return Ri;case dh:return Ui;case ph:return Vi;default:return null}};class yh extends th{}class bh extends yh{}class _h extends yh{}class vh extends th{static from(...t){let[e,i=!1]=t,n=Ch(this,i);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){let t=Eh(e.constructor,i)||n;if(null===n&&(n=t),n&&n===t){let t=new n,i=e.byteLength/t.ArrayType.BYTES_PER_ELEMENT;return Oh(n,e.constructor)&&(i*=.5),je.new(gn.Int(t,0,i,0,null,e))}}if(n)return uu(()=>new n,e);if(e instanceof DataView||e instanceof ArrayBuffer)throw new TypeError("Cannot infer integer type from instance of "+e.constructor.name);throw new TypeError("Unrecognized IntVector input")}}class xh extends vh{}class wh extends vh{}class Sh extends vh{}class Ih extends vh{toBigInt64Array(){return Object(pn["toBigInt64Array"])(this.values)}get values64(){return this._values64||(this._values64=this.toBigInt64Array())}}class Ah extends vh{}class kh extends vh{}class Th extends vh{}class Mh extends vh{toBigUint64Array(){return Object(pn["toBigUint64Array"])(this.values)}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const Oh=(t,e)=>(t===Di||t===Fi)&&(e===Int32Array||e===Uint32Array),Eh=(t,e)=>{switch(t){case Int8Array:return Oi;case Int16Array:return Ei;case Int32Array:return e?Di:Ci;case bn["b"]:return Di;case Uint8Array:return Bi;case Uint16Array:return Li;case Uint32Array:return e?Fi:Pi;case bn["d"]:return Fi;default:return null}},Ch=(t,e)=>{switch(t){case xh:return Oi;case wh:return Ei;case Sh:return e?Di:Ci;case Ih:return Di;case Ah:return Bi;case kh:return Li;case Th:return e?Fi:Pi;case Mh:return Fi;default:return null}};class Dh extends th{}class Bh extends th{asList(){const t=this.type.children[0];return je.new(this.data.clone(new rn(t)))}bind(t){const e=this.getChildAt(0),{[t]:i,[t+1]:n}=this.valueOffsets;return new Rr(e.slice(i,n))}}class Lh extends th{}const Ph=Symbol.for("rowIndex");class Fh extends th{bind(t){const e=this._row||(this._row=new Ur(this)),i=Object.create(e);return i[Ph]=t,i}}class Nh extends th{}class Rh extends Nh{}class Uh extends Nh{}class Vh extends Nh{}class jh extends Nh{}class zh extends th{}class Wh extends zh{}class $h extends zh{}class Hh extends zh{}class Yh extends zh{}class qh extends th{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class Gh extends qh{get valueOffsets(){return this.data.valueOffsets}}class Kh extends qh{}class Xh extends th{static from(t){return uu(()=>new zi,t)}asBinary(){return je.new(this.data.clone(new ji))}}function Jh(t){return function(){return t(this)}}function Qh(t){return function(e){return t(this,e)}}function Zh(t){return function(e,i){return t(this,e,i)}}class tl extends ai{}const el=(t,e)=>864e5*t[e],il=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),nl=(t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3,rl=(t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6,sl=t=>new Date(t),al=(t,e)=>sl(el(t,e)),ol=(t,e)=>sl(il(t,e)),cl=(t,e)=>null,hl=(t,e,i)=>{const{[i]:n,[i+1]:r}=e;return null!=n&&null!=r?t.subarray(n,r):null},ll=({offset:t,values:e},i)=>{const n=t+i,r=e[n>>3];return 0!==(r&1<<n%8)},ul=({values:t},e)=>al(t,e),dl=({values:t},e)=>ol(t,2*e),pl=({stride:t,values:e},i)=>e[t*i],fl=({stride:t,values:e},i)=>Wn(e[t*i]),gl=({stride:t,values:e,type:i},n)=>rr.new(e.subarray(t*n,t*(n+1)),i.isSigned),ml=({stride:t,values:e},i)=>e.subarray(t*i,t*(i+1)),yl=({values:t,valueOffsets:e},i)=>hl(t,e,i),bl=({values:t,valueOffsets:e},i)=>{const n=hl(t,e,i);return null!==n?Object(Mr["a"])(n):null},_l=(t,e)=>t.type.bitWidth<64?pl(t,e):gl(t,e),vl=(t,e)=>t.type.precision!==Ye.HALF?pl(t,e):fl(t,e),xl=(t,e)=>t.type.unit===$e.DAY?ul(t,e):dl(t,e),wl=({values:t},e)=>1e3*il(t,2*e),Sl=({values:t},e)=>il(t,2*e),Il=({values:t},e)=>nl(t,2*e),Al=({values:t},e)=>rl(t,2*e),kl=(t,e)=>{switch(t.type.unit){case He.SECOND:return wl(t,e);case He.MILLISECOND:return Sl(t,e);case He.MICROSECOND:return Il(t,e);case He.NANOSECOND:return Al(t,e)}},Tl=({values:t,stride:e},i)=>t[e*i],Ml=({values:t,stride:e},i)=>t[e*i],Ol=({values:t},e)=>rr.signed(t.subarray(2*e,2*(e+1))),El=({values:t},e)=>rr.signed(t.subarray(2*e,2*(e+1))),Cl=(t,e)=>{switch(t.type.unit){case He.SECOND:return Tl(t,e);case He.MILLISECOND:return Ml(t,e);case He.MICROSECOND:return Ol(t,e);case He.NANOSECOND:return El(t,e)}},Dl=({values:t},e)=>rr.decimal(t.subarray(4*e,4*(e+1))),Bl=(t,e)=>{const i=t.getChildAt(0),{valueOffsets:n,stride:r}=t;return i.slice(n[e*r],n[e*r+1])},Ll=(t,e)=>t.bind(e),Pl=(t,e)=>t.bind(e),Fl=(t,e)=>t.type.mode===qe.Dense?Nl(t,e):Rl(t,e),Nl=(t,e)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(i);return n?n.get(t.valueOffsets[e]):null},Rl=(t,e)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(i);return n?n.get(e):null},Ul=(t,e)=>t.getValue(t.getKey(e)),Vl=(t,e)=>t.type.unit===Ge.DAY_TIME?jl(t,e):zl(t,e),jl=({values:t},e)=>t.subarray(2*e,2*(e+1)),zl=({values:t},e)=>{const i=t[e],n=new Int32Array(2);return n[0]=i/12|0,n[1]=i%12|0,n},Wl=(t,e)=>{const i=t.getChildAt(0),{stride:n}=t;return i.slice(e*n,(e+1)*n)};tl.prototype.visitNull=cl,tl.prototype.visitBool=ll,tl.prototype.visitInt=_l,tl.prototype.visitInt8=pl,tl.prototype.visitInt16=pl,tl.prototype.visitInt32=pl,tl.prototype.visitInt64=gl,tl.prototype.visitUint8=pl,tl.prototype.visitUint16=pl,tl.prototype.visitUint32=pl,tl.prototype.visitUint64=gl,tl.prototype.visitFloat=vl,tl.prototype.visitFloat16=fl,tl.prototype.visitFloat32=pl,tl.prototype.visitFloat64=pl,tl.prototype.visitUtf8=bl,tl.prototype.visitBinary=yl,tl.prototype.visitFixedSizeBinary=ml,tl.prototype.visitDate=xl,tl.prototype.visitDateDay=ul,tl.prototype.visitDateMillisecond=dl,tl.prototype.visitTimestamp=kl,tl.prototype.visitTimestampSecond=wl,tl.prototype.visitTimestampMillisecond=Sl,tl.prototype.visitTimestampMicrosecond=Il,tl.prototype.visitTimestampNanosecond=Al,tl.prototype.visitTime=Cl,tl.prototype.visitTimeSecond=Tl,tl.prototype.visitTimeMillisecond=Ml,tl.prototype.visitTimeMicrosecond=Ol,tl.prototype.visitTimeNanosecond=El,tl.prototype.visitDecimal=Dl,tl.prototype.visitList=Bl,tl.prototype.visitStruct=Pl,tl.prototype.visitUnion=Fl,tl.prototype.visitDenseUnion=Nl,tl.prototype.visitSparseUnion=Rl,tl.prototype.visitDictionary=Ul,tl.prototype.visitInterval=Vl,tl.prototype.visitIntervalDayTime=jl,tl.prototype.visitIntervalYearMonth=zl,tl.prototype.visitFixedSizeList=Wl,tl.prototype.visitMap=Ll;const $l=new tl;class Hl extends ai{}function Yl(t,e){return null===e&&t.length>0?0:-1}function ql(t,e){const{nullBitmap:i}=t.data;if(!i||t.nullCount<=0)return-1;let n=0;for(const r of ii(i,t.data.offset+(e||0),t.length,i,Je)){if(!r)return n;++n}return-1}function Gl(t,e,i){if(void 0===e)return-1;if(null===e)return ql(t,i);const n=qr(e);for(let r=(i||0)-1,s=t.length;++r<s;)if(n(t.get(r)))return r;return-1}function Kl(t,e,i){const n=qr(e);for(let r=(i||0)-1,s=t.length;++r<s;)if(n(t.get(r)))return r;return-1}Hl.prototype.visitNull=Yl,Hl.prototype.visitBool=Gl,Hl.prototype.visitInt=Gl,Hl.prototype.visitInt8=Gl,Hl.prototype.visitInt16=Gl,Hl.prototype.visitInt32=Gl,Hl.prototype.visitInt64=Gl,Hl.prototype.visitUint8=Gl,Hl.prototype.visitUint16=Gl,Hl.prototype.visitUint32=Gl,Hl.prototype.visitUint64=Gl,Hl.prototype.visitFloat=Gl,Hl.prototype.visitFloat16=Gl,Hl.prototype.visitFloat32=Gl,Hl.prototype.visitFloat64=Gl,Hl.prototype.visitUtf8=Gl,Hl.prototype.visitBinary=Gl,Hl.prototype.visitFixedSizeBinary=Gl,Hl.prototype.visitDate=Gl,Hl.prototype.visitDateDay=Gl,Hl.prototype.visitDateMillisecond=Gl,Hl.prototype.visitTimestamp=Gl,Hl.prototype.visitTimestampSecond=Gl,Hl.prototype.visitTimestampMillisecond=Gl,Hl.prototype.visitTimestampMicrosecond=Gl,Hl.prototype.visitTimestampNanosecond=Gl,Hl.prototype.visitTime=Gl,Hl.prototype.visitTimeSecond=Gl,Hl.prototype.visitTimeMillisecond=Gl,Hl.prototype.visitTimeMicrosecond=Gl,Hl.prototype.visitTimeNanosecond=Gl,Hl.prototype.visitDecimal=Gl,Hl.prototype.visitList=Gl,Hl.prototype.visitStruct=Gl,Hl.prototype.visitUnion=Gl,Hl.prototype.visitDenseUnion=Kl,Hl.prototype.visitSparseUnion=Kl,Hl.prototype.visitDictionary=Gl,Hl.prototype.visitInterval=Gl,Hl.prototype.visitIntervalDayTime=Gl,Hl.prototype.visitIntervalYearMonth=Gl,Hl.prototype.visitFixedSizeList=Gl,Hl.prototype.visitMap=Gl;const Xl=new Hl;class Jl extends ai{}function Ql(t){const e=$l.getVisitFn(t);return ii(t.data.nullBitmap,t.data.offset,t.length,t,(t,i,n,r)=>0!==(n&1<<r)?e(t,i):null)}function Zl(t){if(t.nullCount>0)return Ql(t);const{type:e,typeId:i,length:n}=t;return 1===t.stride&&(i===ze.Timestamp||i===ze.Int&&64!==e.bitWidth||i===ze.Time&&64!==e.bitWidth||i===ze.Float&&e.precision>0)?t.data.values.subarray(0,n)[Symbol.iterator]():function*(e){for(let i=-1;++i<n;)yield e(t,i)}($l.getVisitFn(t))}Jl.prototype.visitNull=Zl,Jl.prototype.visitBool=Zl,Jl.prototype.visitInt=Zl,Jl.prototype.visitInt8=Zl,Jl.prototype.visitInt16=Zl,Jl.prototype.visitInt32=Zl,Jl.prototype.visitInt64=Zl,Jl.prototype.visitUint8=Zl,Jl.prototype.visitUint16=Zl,Jl.prototype.visitUint32=Zl,Jl.prototype.visitUint64=Zl,Jl.prototype.visitFloat=Zl,Jl.prototype.visitFloat16=Zl,Jl.prototype.visitFloat32=Zl,Jl.prototype.visitFloat64=Zl,Jl.prototype.visitUtf8=Zl,Jl.prototype.visitBinary=Zl,Jl.prototype.visitFixedSizeBinary=Zl,Jl.prototype.visitDate=Zl,Jl.prototype.visitDateDay=Zl,Jl.prototype.visitDateMillisecond=Zl,Jl.prototype.visitTimestamp=Zl,Jl.prototype.visitTimestampSecond=Zl,Jl.prototype.visitTimestampMillisecond=Zl,Jl.prototype.visitTimestampMicrosecond=Zl,Jl.prototype.visitTimestampNanosecond=Zl,Jl.prototype.visitTime=Zl,Jl.prototype.visitTimeSecond=Zl,Jl.prototype.visitTimeMillisecond=Zl,Jl.prototype.visitTimeMicrosecond=Zl,Jl.prototype.visitTimeNanosecond=Zl,Jl.prototype.visitDecimal=Zl,Jl.prototype.visitList=Zl,Jl.prototype.visitStruct=Zl,Jl.prototype.visitUnion=Zl,Jl.prototype.visitDenseUnion=Zl,Jl.prototype.visitSparseUnion=Zl,Jl.prototype.visitDictionary=Zl,Jl.prototype.visitInterval=Zl,Jl.prototype.visitIntervalDayTime=Zl,Jl.prototype.visitIntervalYearMonth=Zl,Jl.prototype.visitFixedSizeList=Zl,Jl.prototype.visitMap=Zl;const tu=new Jl;class eu extends ai{}function iu(t){const{type:e,length:i,stride:n}=t;switch(e.typeId){case ze.Int:case ze.Float:case ze.Decimal:case ze.Time:case ze.Timestamp:return t.data.values.subarray(0,i*n)}return[...tu.visit(t)]}eu.prototype.visitNull=iu,eu.prototype.visitBool=iu,eu.prototype.visitInt=iu,eu.prototype.visitInt8=iu,eu.prototype.visitInt16=iu,eu.prototype.visitInt32=iu,eu.prototype.visitInt64=iu,eu.prototype.visitUint8=iu,eu.prototype.visitUint16=iu,eu.prototype.visitUint32=iu,eu.prototype.visitUint64=iu,eu.prototype.visitFloat=iu,eu.prototype.visitFloat16=iu,eu.prototype.visitFloat32=iu,eu.prototype.visitFloat64=iu,eu.prototype.visitUtf8=iu,eu.prototype.visitBinary=iu,eu.prototype.visitFixedSizeBinary=iu,eu.prototype.visitDate=iu,eu.prototype.visitDateDay=iu,eu.prototype.visitDateMillisecond=iu,eu.prototype.visitTimestamp=iu,eu.prototype.visitTimestampSecond=iu,eu.prototype.visitTimestampMillisecond=iu,eu.prototype.visitTimestampMicrosecond=iu,eu.prototype.visitTimestampNanosecond=iu,eu.prototype.visitTime=iu,eu.prototype.visitTimeSecond=iu,eu.prototype.visitTimeMillisecond=iu,eu.prototype.visitTimeMicrosecond=iu,eu.prototype.visitTimeNanosecond=iu,eu.prototype.visitDecimal=iu,eu.prototype.visitList=iu,eu.prototype.visitStruct=iu,eu.prototype.visitUnion=iu,eu.prototype.visitDenseUnion=iu,eu.prototype.visitSparseUnion=iu,eu.prototype.visitDictionary=iu,eu.prototype.visitInterval=iu,eu.prototype.visitIntervalDayTime=iu,eu.prototype.visitIntervalYearMonth=iu,eu.prototype.visitFixedSizeList=iu,eu.prototype.visitMap=iu;const nu=new eu,ru=(t,e)=>t+e,su=t=>"Cannot compute the byte width of variable-width column "+t;class au extends ai{visitNull(t){return 0}visitInt(t){return t.bitWidth/8}visitFloat(t){return t.ArrayType.BYTES_PER_ELEMENT}visitBinary(t){throw new Error(su(t))}visitUtf8(t){throw new Error(su(t))}visitBool(t){return 1/8}visitDecimal(t){return 16}visitDate(t){return 4*(t.unit+1)}visitTime(t){return t.bitWidth/8}visitTimestamp(t){return t.unit===He.SECOND?4:8}visitInterval(t){return 4*(t.unit+1)}visitList(t){throw new Error(su(t))}visitStruct(t){return this.visitFields(t.children).reduce(ru,0)}visitUnion(t){return this.visitFields(t.children).reduce(ru,0)}visitFixedSizeBinary(t){return t.byteWidth}visitFixedSizeList(t){return t.listSize*this.visitFields(t.children).reduce(ru,0)}visitMap(t){return this.visitFields(t.children).reduce(ru,0)}visitDictionary(t){return this.visit(t.indices)}visitFields(t){return(t||[]).map(t=>this.visit(t.type))}visitSchema(t){return this.visitFields(t.fields).reduce(ru,0)}}const ou=new au;class cu extends ai{visitNull(){return Lh}visitBool(){return ih}visitInt(){return vh}visitInt8(){return xh}visitInt16(){return wh}visitInt32(){return Sh}visitInt64(){return Ih}visitUint8(){return Ah}visitUint16(){return kh}visitUint32(){return Th}visitUint64(){return Mh}visitFloat(){return lh}visitFloat16(){return uh}visitFloat32(){return dh}visitFloat64(){return ph}visitUtf8(){return Xh}visitBinary(){return eh}visitFixedSizeBinary(){return ch}visitDate(){return nh}visitDateDay(){return rh}visitDateMillisecond(){return sh}visitTimestamp(){return Nh}visitTimestampSecond(){return Rh}visitTimestampMillisecond(){return Uh}visitTimestampMicrosecond(){return Vh}visitTimestampNanosecond(){return jh}visitTime(){return zh}visitTimeSecond(){return Wh}visitTimeMillisecond(){return $h}visitTimeMicrosecond(){return Hh}visitTimeNanosecond(){return Yh}visitDecimal(){return ah}visitList(){return Dh}visitStruct(){return Fh}visitUnion(){return qh}visitDenseUnion(){return Gh}visitSparseUnion(){return Kh}visitDictionary(){return oh}visitInterval(){return yh}visitIntervalDayTime(){return bh}visitIntervalYearMonth(){return _h}visitFixedSizeList(){return hh}visitMap(){return Bh}}const hu=new cu;function lu(t,...e){return new(hu.getVisitFn(t)())(t,...e)}function uu(t,e){if(Object(bn["i"])(e))return je.from({nullValues:[null,void 0],type:t(),values:e});if(Object(bn["f"])(e))return je.from({nullValues:[null,void 0],type:t(),values:e});const{values:i=[],type:n=t(),nullValues:r=[null,void 0]}={...e};return Object(bn["i"])(i),je.from({nullValues:r,...e,type:n})}function du(t){const{values:e=[],...i}={nullValues:[null,void 0],...t};if(Object(bn["i"])(e)){const t=[...Mn.throughIterable(i)(e)];return 1===t.length?t[0]:is.concat(t)}return(async t=>{const n=Mn.throughAsyncIterable(i);for await(const i of n(e))t.push(i);return 1===t.length?t[0]:is.concat(t)})([])}function pu(t){return function(){return t(this.type)}}function fu(t){return function(e){return this.isValid(e)?t.call(this,e):null}}function gu(t){return function(e,i){Ze(this.nullBitmap,this.offset+e,!(null===i||void 0===i))&&t.call(this,e,i)}}function mu(){const t=this.nullBitmap;t&&t.byteLength>0&&(this.get=fu(this.get),this.set=gu(this.set))}je.new=lu,je.from=du,th.prototype.get=function(t){return $l.visit(this,t)},th.prototype.set=function(t,e){return va.visit(this,t,e)},th.prototype.indexOf=function(t,e){return Xl.visit(this,t,e)},th.prototype.toArray=function(){return nu.visit(this)},th.prototype.getByteWidth=function(){return ou.visit(this.type)},th.prototype[Symbol.iterator]=function(){return tu.visit(this)},th.prototype._bindDataAccessors=mu,Object.keys(ze).map(t=>ze[t]).filter(t=>"number"===typeof t).filter(t=>t!==ze.NONE).forEach(t=>{const e=hu.visit(t);e.prototype["get"]=Qh($l.getVisitFn(t)),e.prototype["set"]=Zh(va.getVisitFn(t)),e.prototype["indexOf"]=Zh(Xl.getVisitFn(t)),e.prototype["toArray"]=Jh(nu.getVisitFn(t)),e.prototype["getByteWidth"]=pu(ou.getVisitFn(t)),e.prototype[Symbol.iterator]=Jh(tu.getVisitFn(t))});class yu extends is{constructor(...t){let e=null;t[0]instanceof _s&&(e=t.shift());let i=hs(vu,t);if(!e&&!(e=i[0]&&i[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");i[0]||(i[0]=new xu(e)),super(new sn(e.fields),i),this._schema=e,this._chunks=i}static empty(t=new _s([])){return new yu(t,[])}static from(t){if(!t)return yu.empty();if("object"===typeof t){let e=Object(bn["i"])(t["values"])?bu(t):Object(bn["f"])(t["values"])?_u(t):null;if(null!==e)return e}let e=Su.from(t);return Object(bn["l"])(e)?(async()=>await yu.from(await e))():e.isSync()&&(e=e.open())?e.schema?new yu(e.schema,[...e]):yu.empty():(async t=>{const e=await t,i=e.schema,n=[];if(i){for await(let t of e)n.push(t);return new yu(i,n)}return yu.empty()})(e.open())}static async fromAsync(t){return await yu.from(t)}static fromStruct(t){return yu.new(t.data.childData,t.type.children)}static new(...t){return new yu(...Xc(ls(t)))}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(t=this._chunks){return new yu(this._schema,t)}getColumn(t){return this.getColumnAt(this.getColumnIndex(t))}getColumnAt(t){return this.getChildAt(t)}getColumnIndex(t){return this._schema.fields.findIndex(e=>e.name===t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,i;const n=this._schema.fields,r=this._children||(this._children=[]);if(i=r[t])return i;if(e=n[t]){const i=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t);if(i.length>0)return r[t]=new as(e,i)}return null}serialize(t="binary",e=!0){const i=e?Wc:$c;return i.writeAll(this).toUint8Array(!0)}count(){return this._length}select(...t){const e=this._schema.fields.reduce((t,e,i)=>t.set(e.name,i),new Map);return this.selectAt(...t.map(t=>e.get(t)).filter(t=>t>-1))}selectAt(...t){const e=this._schema.selectAt(...t);return new yu(e,this._chunks.map(({length:i,data:{childData:n}})=>new vu(e,i,t.map(t=>n[t]).filter(Boolean))))}assign(t){const e=this._schema.fields,[i,n]=t.schema.fields.reduce((t,i,n)=>{const[r,s]=t,a=e.findIndex(t=>t.name===i.name);return~a?s[a]=n:r.push(n),t},[[],[]]),r=this._schema.assign(t.schema),s=[...e.map((e,i,r,s=n[i])=>void 0===s?this.getColumnAt(i):t.getColumnAt(s)),...i.map(e=>t.getColumnAt(e))].filter(Boolean);return new yu(...Jc(r,s))}}function bu(t){const{type:e}=t;return e instanceof sn?yu.fromStruct(Fh.from(t)):null}function _u(t){const{type:e}=t;return e instanceof sn?Fh.from(t).then(t=>yu.fromStruct(t)):null}class vu extends Fh{constructor(...t){let e,i,n=t[0];if(t[1]instanceof gn)[,e,i]=t;else{const i=n.fields,[,r,s]=t;e=gn.Struct(new sn(i),0,r,0,null,s)}super(e,i),this._schema=n}static from(t){return Object(bn["i"])(t["values"]),yu.from(t)}static new(...t){const[e,i]=us(t),n=i.filter(t=>t instanceof je);return new vu(...Kc(new _s(e),n.map(t=>t.data)))}clone(t,e=this._children){return new vu(this._schema,t,e)}concat(...t){const e=this._schema,i=is.flatten(this,...t);return new yu(e,i.map(({data:t})=>new vu(e,t)))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=wu.collect(this))}select(...t){const e=this._schema.fields.reduce((t,e,i)=>t.set(e.name,i),new Map);return this.selectAt(...t.map(t=>e.get(t)).filter(t=>t>-1))}selectAt(...t){const e=this._schema.selectAt(...t),i=t.map(t=>this.data.childData[t]).filter(Boolean);return new vu(e,this.length,i)}}class xu extends vu{constructor(t){super(t,0,t.fields.map(t=>gn.new(t.type,0,0,0)))}}class wu extends ai{constructor(){super(...arguments),this.dictionaries=new Map}static collect(t){return(new wu).visit(t.data,new sn(t.schema.fields)).dictionaries}visit(t,e){return ki.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach((t,i)=>this.visit(t,e.children[i].type)),this)}visitDictionary(t,e){const i=t.dictionary;return i&&i.length>0&&this.dictionaries.set(e.id,i),this}}class Su extends La["d"]{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return Object(bn["l"])(e)?e.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Ve["a"].toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Ve["a"].toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Su?t:Object(bn["e"])(t)?Nu(t):Object(bn["h"])(t)?Vu(t):Object(bn["l"])(t)?(async()=>await Su.from(await t))():Object(bn["g"])(t)||Object(bn["m"])(t)||Object(bn["n"])(t)||Object(bn["f"])(t)?Uu(new Na(t)):Ru(new Fa(t))}static readAll(t){return t instanceof Su?t.isSync()?Pu(t):Fu(t):Object(bn["e"])(t)||ArrayBuffer.isView(t)||Object(bn["i"])(t)||Object(bn["j"])(t)?Pu(t):Fu(t)}}class Iu extends Su{constructor(t){super(t),this._impl=t}[Symbol.iterator](){return this._impl[Symbol.iterator]()}async*[Symbol.asyncIterator](){yield*this[Symbol.iterator]()}}class Au extends Su{constructor(t){super(t),this._impl=t}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class ku extends Iu{constructor(t){super(t),this._impl=t}}class Tu extends Au{constructor(t){super(t),this._impl=t}}class Mu{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){return new vu(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))}_loadDictionaryBatch(t,e){const{id:i,isDelta:n,data:r}=t,{dictionaries:s,schema:a}=this,o=s.get(i);if(n||!o){const t=a.dictionaries.get(i);return o&&n?o.concat(je.new(this._loadVectors(r,e,[t])[0])):je.new(this._loadVectors(r,e,[t])[0])}return o}_loadVectors(t,e,i){return new Xa(e,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class Ou extends Mu{constructor(t,e){super(e),this._reader=Object(bn["e"])(t)?new kc(this._handle=t):new Ic(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Lu(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):La["c"]}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):La["c"]}next(){if(this.closed)return La["c"];let t,{_reader:e}=this;while(t=this._readNextMessageAndValidate())if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),n=e.readMessageBody(t.bodyLength),r=this._loadRecordBatch(i,n);return{done:!1,value:r}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),n=e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(i,n);this.dictionaries.set(i.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new xu(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Eu extends Mu{constructor(t,e){super(e),this._reader=new Ac(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}async cancel(){!this.closed&&(this.closed=!0)&&(await this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}async open(t){return this.closed||(this.autoDestroy=Lu(this,t),this.schema||(this.schema=await this._reader.readSchema())||await this.cancel()),this}async throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.throw(t):La["c"]}async return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.return(t):La["c"]}async next(){if(this.closed)return La["c"];let t,{_reader:e}=this;while(t=await this._readNextMessageAndValidate())if(t.isSchema())await this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),n=await e.readMessageBody(t.bodyLength),r=this._loadRecordBatch(i,n);return{done:!1,value:r}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),n=await e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(i,n);this.dictionaries.set(i.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new xu(this.schema)}):await this.return()}async _readNextMessageAndValidate(t){return await this._reader.readMessage(t)}}class Cu extends Ou{constructor(t,e){super(t instanceof Va?t:new Va(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){if(this.closed)return null;this._footer||this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(Ke.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),i=this._reader.readMessageBody(t.bodyLength),n=this._loadRecordBatch(e,i);return n}}return null}_readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(Ke.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),i=this._reader.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(e,i);this.dictionaries.set(e.id,n)}}}_readFooter(){const{_handle:t}=this,e=t.size-Dc,i=t.readInt32(e),n=t.readAt(e-i,i);return Ca.decode(n)}_readNextMessageAndValidate(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null}}class Du extends Eu{constructor(t,...e){const i="number"!==typeof e[0]?e.shift():void 0,n=e[0]instanceof Map?e.shift():void 0;super(t instanceof ja?t:new ja(t,i),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}async open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=await this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&await this._readDictionaryBatch(this._dictionaryIndex++)}return await super.open(t)}async readRecordBatch(t){if(this.closed)return null;this._footer||await this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(Ke.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),i=await this._reader.readMessageBody(t.bodyLength),n=this._loadRecordBatch(e,i);return n}}return null}async _readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(Ke.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),i=await this._reader.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(e,i);this.dictionaries.set(e.id,n)}}}async _readFooter(){const{_handle:t}=this;t._pending&&await t._pending;const e=t.size-Dc,i=await t.readInt32(e),n=await t.readAt(e-i,i);return Ca.decode(n)}async _readNextMessageAndValidate(t){if(this._footer||await this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&await this._handle.seek(e.offset))return await this._reader.readMessage(t)}return null}}class Bu extends Ou{constructor(t,e){super(t,e)}_loadVectors(t,e,i){return new Ja(e,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function Lu(t,e){return e&&"boolean"===typeof e["autoDestroy"]?e["autoDestroy"]:t["autoDestroy"]}function*Pu(t){const e=Su.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}async function*Fu(t){const e=await Su.from(t);try{if(!(await e.open({autoDestroy:!1})).closed)do{yield e}while(!(await e.reset().open()).closed)}finally{await e.cancel()}}function Nu(t){return new Iu(new Bu(t))}function Ru(t){const e=t.peek(Cc+7&-8);return e&&e.byteLength>=4?Ec(e)?new ku(new Cu(t.read())):new Iu(new Ou(t)):new Iu(new Ou(function*(){}()))}async function Uu(t){const e=await t.peek(Cc+7&-8);return e&&e.byteLength>=4?Ec(e)?new ku(new Cu(await t.read())):new Au(new Eu(t)):new Au(new Eu(async function*(){}()))}async function Vu(t){const{size:e}=await t.stat(),i=new ja(t,e);return e>=Bc&&Ec(await i.readAt(0,Cc+7&-8))?new Tu(new Du(i)):new Au(new Eu(i))}function ju(t,e){if(Object(bn["f"])(t))return Wu(t,e);if(Object(bn["i"])(t))return zu(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function zu(t,e){let i=null;const n=e&&"bytes"===e.type||!1,r=e&&e.highWaterMark||2**24;return new ReadableStream({...e,start(e){s(e,i||(i=t[Symbol.iterator]()))},pull(t){i?s(t,i):t.close()},cancel(){i&&i.return&&i.return(),i=null}},{highWaterMark:n?r:void 0,...e});function s(t,e){let i,r=null,s=t.desiredSize||null;while(!(r=e.next(n?s:null)).done)if(ArrayBuffer.isView(r.value)&&(i=Object(pn["toUint8Array"])(r.value))&&(null!=s&&n&&(s=s-i.byteLength+1),r.value=i),t.enqueue(r.value),null!=s&&--s<=0)return;t.close()}}function Wu(t,e){let i=null;const n=e&&"bytes"===e.type||!1,r=e&&e.highWaterMark||2**24;return new ReadableStream({...e,async start(e){await s(e,i||(i=t[Symbol.asyncIterator]()))},async pull(t){i?await s(t,i):t.close()},async cancel(){i&&i.return&&await i.return(),i=null}},{highWaterMark:n?r:void 0,...e});async function s(t,e){let i,r=null,s=t.desiredSize||null;while(!(r=await e.next(n?s:null)).done)if(ArrayBuffer.isView(r.value)&&(i=Object(pn["toUint8Array"])(r.value))&&(null!=s&&n&&(s=s-i.byteLength+1),r.value=i),t.enqueue(r.value),null!=s&&--s<=0)return;t.close()}}function $u(t){return new Hu(t)}class Hu{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:e,["writableStrategy"]:i,["queueingStrategy"]:n="count",...r}=t;this._controller=null,this._builder=Mn.new(r),this._getSize="bytes"!==n?Yu:qu;const{["highWaterMark"]:s=("bytes"===n?16384:1e3)}={...e},{["highWaterMark"]:a=("bytes"===n?16384:1e3)}={...i};this["readable"]=new ReadableStream({["cancel"]:()=>{this._builder.clear()},["pull"]:t=>{this._maybeFlush(this._builder,this._controller=t)},["start"]:t=>{this._maybeFlush(this._builder,this._controller=t)}},{highWaterMark:s,size:"bytes"!==n?Yu:qu}),this["writable"]=new WritableStream({["abort"]:()=>{this._builder.clear()},["write"]:()=>{this._maybeFlush(this._builder,this._controller)},["close"]:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:t=>this._writeValueAndReturnChunkSize(t)})}_writeValueAndReturnChunkSize(t){const e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e}_maybeFlush(t,e){null!==e&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))}_enqueue(t,e){this._bufferedSize=0,this._controller=null,null===e?t.close():t.enqueue(e)}}const Yu=t=>t.length,qu=t=>t.byteLength;function Gu(t,e){const i=new Pa;let n=null;const r=new ReadableStream({async cancel(){await i.close()},async start(t){await a(t,n||(n=await s()))},async pull(t){n?await a(t,n):t.close()}});return{writable:new WritableStream(i,{highWaterMark:16384,...t}),readable:r};async function s(){return await(await Su.from(i)).open(e)}async function a(t,e){let i=t.desiredSize,n=null;while(!(n=await e.next()).done)if(t.enqueue(n.value),null!=i&&--i<=0)return;t.close()}}function Ku(t,e){const i=new this(t),n=new Na(i),r=new ReadableStream({type:"bytes",async cancel(){await n.cancel()},async pull(t){await s(t)},async start(t){await s(t)}},{highWaterMark:16384,...e});return{writable:new WritableStream(i,t),readable:r};async function s(t){let e=null,i=t.desiredSize;while(e=await n.read(i||null))if(t.enqueue(e),null!=i&&(i-=e.byteLength)<=0)return;t.close()}}class Xu{eq(t){return t instanceof Xu||(t=new Ju(t)),new rd(this,t)}le(t){return t instanceof Xu||(t=new Ju(t)),new sd(this,t)}ge(t){return t instanceof Xu||(t=new Ju(t)),new ad(this,t)}lt(t){return new od(this.ge(t))}gt(t){return new od(this.le(t))}ne(t){return new od(this.eq(t))}}class Ju extends Xu{constructor(t){super(),this.v=t}}class Qu extends Xu{constructor(t){super(),this.name=t}bind(t){if(!this.colidx){this.colidx=-1;const e=t.schema.fields;for(let t=-1;++t<e.length;)if(e[t].name===this.name){this.colidx=t;break}if(this.colidx<0)throw new Error(`Failed to bind Col "${this.name}"`)}const e=this.vector=t.getChildAt(this.colidx);return t=>e.get(t)}}class Zu{and(...t){return new id(this,...t)}or(...t){return new nd(this,...t)}not(){return new od(this)}}class td extends Zu{constructor(t,e){super(),this.left=t,this.right=e}bind(t){return this.left instanceof Ju?this.right instanceof Ju?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof Ju?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)}}class ed extends Zu{constructor(...t){super(),this.children=t}}ed.prototype.children=Object.freeze([]);class id extends ed{constructor(...t){t=t.reduce((t,e)=>t.concat(e instanceof id?e.children:e),[]),super(...t)}bind(t){const e=this.children.map(e=>e.bind(t));return(t,i)=>e.every(e=>e(t,i))}}class nd extends ed{constructor(...t){t=t.reduce((t,e)=>t.concat(e instanceof nd?e.children:e),[]),super(...t)}bind(t){const e=this.children.map(e=>e.bind(t));return(t,i)=>e.some(e=>e(t,i))}}class rd extends td{_bindLitLit(t,e,i){const n=e.v==i.v;return()=>n}_bindColCol(t,e,i){const n=e.bind(t),r=i.bind(t);return(t,e)=>n(t,e)==r(t,e)}_bindColLit(t,e,i){const n=e.bind(t);if(e.vector instanceof oh){let t;const n=e.vector;return n.dictionary!==this.lastDictionary?(t=n.reverseLookup(i.v),this.lastDictionary=n.dictionary,this.lastKey=t):t=this.lastKey,-1===t?()=>!1:e=>n.getKey(e)===t}return(t,e)=>n(t,e)==i.v}_bindLitCol(t,e,i){return this._bindColLit(t,i,e)}}class sd extends td{_bindLitLit(t,e,i){const n=e.v<=i.v;return()=>n}_bindColCol(t,e,i){const n=e.bind(t),r=i.bind(t);return(t,e)=>n(t,e)<=r(t,e)}_bindColLit(t,e,i){const n=e.bind(t);return(t,e)=>n(t,e)<=i.v}_bindLitCol(t,e,i){const n=i.bind(t);return(t,i)=>e.v<=n(t,i)}}class ad extends td{_bindLitLit(t,e,i){const n=e.v>=i.v;return()=>n}_bindColCol(t,e,i){const n=e.bind(t),r=i.bind(t);return(t,e)=>n(t,e)>=r(t,e)}_bindColLit(t,e,i){const n=e.bind(t);return(t,e)=>n(t,e)>=i.v}_bindLitCol(t,e,i){const n=i.bind(t);return(t,i)=>e.v>=n(t,i)}}class od extends Zu{constructor(t){super(),this.child=t}bind(t){const e=this.child.bind(t);return(t,i)=>!e(t,i)}}yu.prototype.countBy=function(t){return new cd(this.chunks).countBy(t)},yu.prototype.scan=function(t,e){return new cd(this.chunks).scan(t,e)},yu.prototype.scanReverse=function(t,e){return new cd(this.chunks).scanReverse(t,e)},yu.prototype.filter=function(t){return new cd(this.chunks).filter(t)};class cd extends yu{filter(t){return new ld(this.chunks,t)}scan(t,e){const i=this.chunks,n=i.length;for(let r=-1;++r<n;){const n=i[r];e&&e(n);for(let e=-1,i=n.length;++e<i;)t(e,n)}}scanReverse(t,e){const i=this.chunks,n=i.length;for(let r=n;--r>=0;){const n=i[r];e&&e(n);for(let e=n.length;--e>=0;)t(e,n)}}countBy(t){const e=this.chunks,i=e.length,n="string"===typeof t?new Qu(t):t;n.bind(e[i-1]);const r=n.vector;if(!ki.isDictionary(r.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(r.length)/Math.log(256)),a=4==s?Uint32Array:s>=2?Uint16Array:Uint8Array,o=new a(r.dictionary.length);for(let c=-1;++c<i;){const t=e[c];n.bind(t);const i=n.vector.indices;for(let e=-1,n=t.length;++e<n;){let t=i.get(e);null!==t&&o[t]++}}return new hd(r.dictionary,vh.from(o))}}class hd extends yu{constructor(t,e){const i=new _s([new vs("values",t.type),new vs("counts",e.type)]);super(new vu(i,e.length,[t,e]))}toJSON(){const t=this.getColumnAt(0),e=this.getColumnAt(1),i={};for(let n=-1;++n<this.length;)i[t.get(n)]=e.get(n);return i}}class ld extends cd{constructor(t,e){super(t),this._predicate=e}scan(t,e){const i=this._chunks,n=i.length;for(let r=-1;++r<n;){const n=i[r],s=this._predicate.bind(n);let a=!1;for(let i=-1,r=n.length;++i<r;)s(i,n)&&(e&&!a&&(e(n),a=!0),t(i,n))}}scanReverse(t,e){const i=this._chunks,n=i.length;for(let r=n;--r>=0;){const n=i[r],s=this._predicate.bind(n);let a=!1;for(let i=n.length;--i>=0;)s(i,n)&&(e&&!a&&(e(n),a=!0),t(i,n))}}count(){let t=0;const e=this._chunks,i=e.length;for(let n=-1;++n<i;){const i=e[n],r=this._predicate.bind(i);for(let e=-1,n=i.length;++e<n;)r(e,i)&&++t}return t}*[Symbol.iterator](){const t=this._chunks,e=t.length;for(let i=-1;++i<e;){const e=t[i],n=this._predicate.bind(e);for(let t=-1,i=e.length;++t<i;)n(t,e)&&(yield e.get(t))}}filter(t){return new ld(this._chunks,this._predicate.and(t))}countBy(t){const e=this._chunks,i=e.length,n="string"===typeof t?new Qu(t):t;n.bind(e[i-1]);const r=n.vector;if(!ki.isDictionary(r.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(r.length)/Math.log(256)),a=4==s?Uint32Array:s>=2?Uint16Array:Uint8Array,o=new a(r.dictionary.length);for(let c=-1;++c<i;){const t=e[c],i=this._predicate.bind(t);n.bind(t);const r=n.vector.indices;for(let e=-1,n=t.length;++e<n;){let n=r.get(e);null!==n&&i(e,t)&&o[n]++}}return new hd(r.dictionary,vh.from(o))}}Ve["a"].toDOMStream=ju,Mn["throughDOM"]=$u,Su["throughDOM"]=Gu,zc["throughDOM"]=Ku;var ud={NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Dictionary:-1,Int8:-2,Int16:-3,Int32:-4,Int64:-5,Uint8:-6,Uint16:-7,Uint32:-8,Uint64:-9,Float16:-10,Float32:-11,Float64:-12,DateDay:-13,DateMillisecond:-14,TimestampSecond:-15,TimestampMillisecond:-16,TimestampMicrosecond:-17,TimestampNanosecond:-18,TimeSecond:-19,TimeMillisecond:-20,TimeMicrosecond:-21,TimeNanosecond:-22,DenseUnion:-23,SparseUnion:-24,IntervalDayTime:-25,IntervalYearMonth:-26};function dd(t,e=1){return(t*e+63&-64||64)/e}function pd(t,e,i=t.BYTES_PER_ELEMENT){return new t(dd(e,i))}function fd(t){return t instanceof gn?t:gn.new(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}function gd(t){return je.new(fd(t))}const md=new TextEncoder;function yd(t,e,i){const n=md.encode(i);return t.set(n,e),n.length}function bd(t,e,i){return md.encodeInto(i,t.subarray(e)).written}const _d=md.encodeInto?bd:yd;var vd=function(t,e){const i=pd(t.ArrayType,e);return{set(t,e){i[e]=t},data:()=>({type:t,length:e,buffers:[null,i]})}},xd=function(t,e){const i=pd(t.ArrayType,e/8);return{set(t,e){t&&(i[e>>3]|=1<<e%8)},data:()=>({type:t,length:e,buffers:[null,i]})}},wd=function(t,e){const i=pd(t.ArrayType,e);return{set(t,e){i[e]=t/864e5|0},data:()=>({type:t,length:e,buffers:[null,i]})}},Sd=function(t,e){const i=pd(t.ArrayType,e<<1);return{set(t,e){const n=e<<1;i[n]=t%4294967296|0,i[n+1]=t/4294967296|0},data:()=>({type:t,length:e,buffers:[null,i]})}},Id=function(t){const e=Mn.new({type:t,nullValues:[null,void 0],highWaterMark:1/0});return{set(t,i){e.set(i,t)},data:()=>e.finish().flush()}},Ad=function(t,e,i){const n=pd(Int32Array,e+1),r=pd(Uint8Array,3*i);let s=0;return{set(t,e){s+=_d(r,s,t),n[e+1]=s},data:()=>{const i=dd(s),a=r.length>i?r.subarray(0,i):r;return{type:t,length:e,buffers:[n,a]}}}},kd=function(t,e){const i=[],n=pd(t.indices.ArrayType,e),r=Object.create(null);let s=-1,a=0;return{set(t,e){const o=String(t);let c=r[o];void 0===c&&(a+=o.length,r[o]=c=++s,i.push(o)),n[e]=c},data:()=>({type:t,length:e,buffers:[null,n],dict:Td(t.dictionary,i,a)})}};function Td(t,e,i){const n=Ad(t,e.length,i);return e.forEach(n.set),gd(n.data())}var Md=function(t,e){const i=pd(Uint8Array,e/8);let n=0;return{set(e,r){null==e?++n:(t.set(e,r),i[r>>3]|=1<<r%8)},data:()=>{const e=t.data();return n&&(e.nulls=n,e.buffers[2]=i),e}}},Od=function(t,e,i=!0){let n;switch(t.typeId){case ud.Int:n=t.bitWidth<64?vd:null;break;case ud.Float:n=t.precision>0?vd:null;break;case ud.Dictionary:n=t.dictionary.typeId===ud.Utf8&&t.indices.typeId===ud.Int&&t.indices.bitWidth<64?kd:null;break;case ud.Bool:n=xd;break;case ud.Date:n=t.unit?Sd:wd;break}return null==n?Id(t):i?Md(n(t,e),e):n(t,e)};function Ed(t,e){const i=t.length,n=dd(i,t.BYTES_PER_ELEMENT);let r=t;return i!==n&&(r=new t.constructor(n),r.set(t)),fd({type:e,length:i,buffers:[null,r]})}function Cd(t,e,i,n,r=!0){const s=Od(n,t,r);return e(i,s.set),fd(s.data())}var Dd=function(t){if(t instanceof ki||null==t)return t;switch(t){case ud.Binary:return new ji;case ud.Bool:return new Wi;case ud.DateDay:return new Yi;case ud.DateMillisecond:case ud.Date:return new qi;case ud.Dictionary:return new un(new zi,new Ci);case ud.Float16:return new Ri;case ud.Float32:return new Ui;case ud.Float64:case ud.Float:return new Vi;case ud.Int8:return new Oi;case ud.Int16:return new Ei;case ud.Int32:case ud.Int:return new Ci;case ud.Int64:return new Di;case ud.IntervalDayTime:return new en;case ud.Interval:case ud.IntervalYearMonth:return new nn;case ud.Null:return new Ti;case ud.TimeMicrosecond:return new Ji;case ud.TimeMillisecond:case ud.Time:return new Xi;case ud.TimeNanosecond:return new Qi;case ud.TimeSecond:return new Ki;case ud.Uint8:return new Bi;case ud.Uint16:return new Li;case ud.Uint32:return new Pi;case ud.Uint64:return new Fi;case ud.Utf8:return new zi;default:p(`Unsupported type code: ${At(t)}. Use a data type constructor instead?`)}},Bd=function(t){return 0===t.getUTCHours()&&0===t.getUTCMinutes()&&0===t.getUTCSeconds()&&0===t.getUTCMilliseconds()};function Ld(t,e){const i=Pd();return t(e,i.add),i}function Pd(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,null==e)return void++t.nulls;const i=typeof e;if("string"===i)++t.strings;else if("number"===i)++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if("boolean"===i)++t.bools;else if("object"===i)if(v(e))++t.dates,Bd(e)&&++t.utcdays;else if(P(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const i=t.array_prof||(t.array_prof=Pd());e.forEach(i.add)}else{++t.structs;const i=t.struct_prof||(t.struct_prof={});for(const t in e){const n=i[t]||(i[t]=Pd());n.add(e[t])}}else"bigint"===i&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e))},type(){return Dd(Fd(t))}};return t}function Fd(t){const e=t.count-t.nulls;if(0===e)return ud.Null;if(t.ints===e){const e=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?e>=2**31?ud.Float64:e<128?ud.Int8:e<32768?ud.Int16:ud.Int32:e>=2**32?ud.Float64:e<256?ud.Uint8:e<65536?ud.Uint16:ud.Uint32}if(t.nums===e)return ud.Float64;if(t.bigints===e){const e=-t.min>t.max?-t.min-1n:t.max;return t.min<0?e<2**63?ud.Int64:p("BigInt exceeds 64 bits: "+e):t.max<2**64?ud.Uint64:p("BigInt exceeds 64 bits: "+t.max)}if(t.bools===e)return ud.Bool;if(t.utcdays===e)return ud.DateDay;if(t.dates===e)return ud.DateMillisecond;if(t.arrays===e){const e=vs.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new cn(t.minlen,e):new rn(e)}if(t.structs===e){const e=t.struct_prof;return new sn(Object.keys(e).map(t=>vs.new(t,e[t].type(),!0)))}if(t.strings>0)return ud.Dictionary;p("Type inference failure")}var Nd=function(t,e,i,n,r,s=!0){if(r=Dd(r),!r){const t=Ld(n,e);s=t.nulls>0,r=t.type()}return Cd(i,n,e,r,s)},Rd=function(t,e,i,n,r,s=!0){r=Dd(r);const a=t.column(e),o=!(t.isFiltered()||t.isOrdered()),c=Ud(a);if(c&&o&&jd(c.type,r))return c;const h=a.data;if(L(h)){const t=Vd(h);if(o&&t&&jd(t,r))return Ed(h,t);r=r||t,s=!1}if(!r){const t=Ld(n,a);s=t.nulls>0,r=t.type()}return Cd(i,n,a,r,s)};function Ud(t){return t instanceof je?t:t.vector instanceof je?t.vector:null}function Vd(t){const e={Float32Array:Ui,Float64Array:Vi,Int8Array:Oi,Int16Array:Ei,Int32Array:Ci,Uint8Array:Bi,Uint16Array:Li,Uint32Array:Pi,BigInt64Array:Di,BigUint64Array:Fi},i=e[t.constructor.name];return i?new i:null}function jd(t,e){return!t||!e||t.compareTo(e)}function zd(t,e,i){const n=Math.min(t.length,i+e);return(e,r)=>{for(let s=i;s<n;++s)r(t[s][e],s)}}function Wd(t,e,i){const n=0===i&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(r,s)=>{let a=-1;n&&P(r.data)?r.data.forEach(s):t.scan(t=>s(r.get(t),++a),!0,e,i)}}function $d(){try{return yu}catch(t){p("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage")}}var Hd=function(t,e={}){const{types:i={}}=e,{dataFrom:n,names:r,nrows:s,scan:a}=Yd(t,e);return $d().new(r.map(e=>{const r=n(t,e,s,a,i[e]);return r.length===s?r:p("Column length mismatch")}),r)};function Yd(t,e){const{columns:i,limit:n=1/0,offset:r=0}=e,s=g(i)?i(t):c(i)?i:null;return c(t)?{dataFrom:Nd,names:s||Object.keys(t[0]),nrows:Math.min(n,t.length-r),scan:zd(t,n,r)}:qd(t)?{dataFrom:Rd,names:s||t.columnNames(),nrows:Math.min(n,t.numRows()-r),scan:Wd(t,n,r)}:void p("Unsupported input data type")}function qd(t){return t&&g(t.reify)}var Gd=Hd;function Kd(t){return 0===t.getUTCHours()&&0===t.getUTCMinutes()&&0===t.getUTCSeconds()&&0===t.getUTCMilliseconds()}var Xd=function(t,e={}){let i=0,n=0,r=0,s=0,a=0,o=0;return t(t=>{if(++i,null==t)return void++n;const e=typeof t;if("object"===e&&v(t))++r,Kd(t)&&++s;else if("number"===e&&(++a,t===t&&(0|t)!==t)){const e=t+"",i=e.indexOf(".");if(i>=0){const t=e.indexOf("e"),n=t>0?t:e.length;o=Math.max(o,n-i-1)}}}),{align:(n+a+r)/i>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,e.maxdigits||6)}}};function Jd(t,e){return g(e)?e(t):e||t.columnNames()}function Qd(t,e,i){const n=i.format||{},r=i.align||{},s={},a={};return e.forEach(e=>{const o=Xd(Zd(t,e),i);a[e]=r[e]||o.align,s[e]=n[e]||o.format}),{align:a,format:s}}function Zd(t,e){const i=t.column(e);return e=>t.scan(t=>e(i.get(t)))}function tp(t,e,i=100,n,r){const s=t.data(),a=e.length;t.scan(t=>{r.row(t);for(let i=0;i<a;++i){const n=e[i];r.cell(s[e[i]].get(t),n,i)}},!0,i,n)}var ep=function(t,e={}){const i=Jd(t,e.columns),n=e.format||{},r=e.delimiter||",",s=new RegExp(`["${r}\n\r]`),a=t=>null==t?"":v(t)?H(t,!0):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t,o=i.map(a);let c="";return tp(t,i,e.limit||1/0,e.offset,{row(){c+=o.join(r)+"\n"},cell(t,e,i){o[i]=a(n[e]?n[e](t):t)}}),c+o.join(r)},ip=function(t,e={}){if(g(e))return e(t)+"";const i=typeof t;if("object"===i){if(v(t))return e.utc?H(t):$(t);{const i=JSON.stringify(t,(t,e)=>L(e)?Array.from(e):e),n=e.maxlen||30;return i.length>n?i.slice(0,28)+"‚Ä¶"+("["===i[0]?"]":"}"):i}}if("number"===i){const i=e.digits||0;let n;return 0!==t&&((n=Math.abs(t))>=1e18||n<Math.pow(10,-i))?t.toExponential(i):t.toFixed(i)}return t+""},np=function(t,e,i={}){for(const n in t)i[n]=e(t[n],n);return i},rp=function(t,e={}){const i=Jd(t,e.columns),{align:n,format:r}=Qd(t,i,e),s=sp(e),a=e.null,o=t=>"c"===t?"center":"r"===t?"right":"left",c=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),h=(t,e)=>c(ip(t,e)),l=a?(t,e)=>null==t?a(t):h(t,e):h;let u=-1,d=-1;const p=(t,e,i)=>{const r=i?o(n[e]):"",a=s[t]&&s[t](e,d,u)||"",c=(r?`text-align: ${r};`+(a?" ":""):"")+a;return`<${t}${c?` style="${c}"`:""}>`};let f=p("table")+p("thead")+p("tr",u)+i.map(t=>`${p("th",t,1)}${t}</th>`).join("")+"</tr></thead>"+p("tbody");return tp(t,i,e.limit,e.offset,{row(t){u=t,f+=(++d?"</tr>":"")+p("tr")},cell(t,e){f+=p("td",e,1)+l(t,r[e])+"</td>"}}),f+"</tr></tbody></table>"};function sp(t){return np(t.style,t=>g(t)?t:()=>t)}var ap=function(t,e=!0,i=!1){return void 0===t||t?e:i};const op=t=>v(t)?H(t,!0):t;var cp=function(t,e={}){const i=ap(e.schema),n=e.format||{},r=Jd(t,e.columns);let s="{";return i&&(s+='"schema":{"fields":'+JSON.stringify(r.map(t=>({name:t})))+'},"data":{'),r.forEach((i,r)=>{s+=(r?",":"")+JSON.stringify(i)+":[";const a=t.column(i),o=n[i]||op;let c=-1;t.scan(t=>{const e=a.get(t);s+=(++c?",":"")+JSON.stringify(o(e))},!0,e.limit,e.offset),s+="]"}),s+"}"+(i?"}":"")},hp=function(t,e={}){const i=Jd(t,e.columns),{align:n,format:r}=Qd(t,i,e),s=t=>"c"===t?":-:":"r"===t?"-:":":-",a=t=>t.replace(/\|/g,"\\|");let o="|"+i.map(a).join("|")+"|\n|"+i.map(t=>s(n[t])).join("|")+"|";return tp(t,i,e.limit,e.offset,{row(){o+="\n|"},cell(t,e){o+=a(ip(t,r[e]))+"|"}}),o+"\n"},lp=function(t,e){for(const[i,n]of Be(e))t.set(i,n);return t},up=function(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")};function dp(t,e,i=new Map){return e=f(e)?t.columnName(e):e,S(e)?i.set(e,e):c(e)?e.forEach(e=>dp(t,e,i)):g(e)?dp(t,e(t),i):x(e)?lp(i,e):p("Invalid column selection: "+At(e)),i}function pp(t,e){return t.toObject=e,t}function fp(t){return c(t)?t.map(fp):t&&t.toObject?t.toObject():t}function gp(){return pp(t=>t.columnNames(),()=>({all:[]}))}function mp(...t){return t=t.flat(),pp(e=>{const i=dp(e,t);return e.columnNames(t=>!i.has(t))},()=>({not:fp(t)}))}function yp(t,e){return pp(i=>{let n=f(t)?t:i.columnIndex(t),r=f(e)?e:i.columnIndex(e);if(r<n){const t=r;r=n,n=t}return i.columnNames().slice(n,r+1)},()=>({range:[t,e]}))}function bp(t){return S(t)&&(t=RegExp(up(t))),pp(e=>e.columnNames(e=>t.test(e)),()=>({matches:[t.source,t.flags]}))}var _p=function(t){return L(t.data)?t.data.constructor:Array};class vp extends y{static from(t,e){return new vp(I(t,e),e)}static new(t,e){if(t instanceof vp)return t;const i={},n=[];for(const[r,s]of Be(t))i[r]=s,n.push(r);return new vp(i,e||n)}constructor(t,e,i,n,r,s){np(t,_,t),e=e||Object.keys(t);const a=e.length?t[e[0]].length:0;super(e,a,t,i,n,r,s)}create({data:t,names:e,filter:i,groups:n,order:r}){const s=void 0!==i?i:this.mask();return new vp(t||this._data,e||(t?null:this._names),s,void 0!==n?n:Ft(this._group,i&&s),void 0!==r?r:this._order,this._params)}assign(...t){const e=this.numRows(),i=this.reify(),n=E(i).groupby(i.groups());return t.forEach(t=>{t=vp.new(t),t.numRows()!==e&&p("Assign row counts do not match"),t=t.reify(),t.columnNames(e=>n.add(e,t.column(e)))}),this.create(n.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,e=Array){const i=this.column(t),n=new e(this.numRows());let r=-1;return this.scan(t=>n[++r]=i.get(t),!0),n}get(t,e=0){const i=this.column(t);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[e]):i.get(e)}getter(t){const e=this.column(t),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?t=>e.get(i[t]):e?t=>e.get(t):p("Unrecognized column: "+t)}object(t=0){return xp(this)(t)}objects(t={}){const{grouped:e,limit:i,offset:n}=t,r=dp(this,t.columns||gp()),s=Ne(r),a=[];if(this.scan((t,e)=>a.push(s(t,e)),!0,i,n),e&&this.isGrouped()){const t=[];return this.scan(e=>t.push(e),!0,i,n),Rt(this,t,a,e)}return a}*[Symbol.iterator](){const t=xp(this),e=this.numRows();for(let i=0;i<e;++i)yield t(i)}reify(t){const e=t?t.length:this.numRows(),i=this._names;let n,r;if(!t&&!this.isOrdered()){if(!this.isFiltered())return this;e===this.totalRows()&&(n=this.data())}if(!n){const s=t?e=>t.forEach(e):t=>this.scan(t,!0),a=i.length;n={};for(let t=0;t<a;++t){const r=i[t],a=this.column(r),o=n[r]=new(_p(a))(e);let c=-1;s(t=>o[++c]=a.get(t))}this.isGrouped()&&(r=Nt(this.groups(),s,!!t,e))}return this.create({data:n,names:i,groups:r,filter:null,order:null})}transform(...t){return t.flat().reduce((t,e)=>e(t),this)}toArrow(t){return Gd(this,t)}toArrowBuffer(t){return Gd(this,t).serialize()}toCSV(t){return ep(this,t)}toHTML(t){return rp(this,t)}toJSON(t){return cp(this,t)}toMarkdown(t){return hp(this,t)}}function xp(t){let e=t._builder;if(!e){const i=Ne(t.columnNames()),n=t.data();if(t.isOrdered()||t.isFiltered()){const r=t.indices();e=t=>i(r[t],n)}else e=t=>i(t,n);t._builder=e}return e}class wp{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Sp(t,e,i,n){const r=i[t.type]||i["Default"];if(r&&!1===r(t,e,n))return;const s=Ep[t.type];s&&s(t,e,i)}const Ip=(t,e,i)=>{Sp(t.argument,e,i,t)},Ap=(t,e,i)=>{Sp(t.left,e,i,t),Sp(t.right,e,i,t)},kp=(t,e,i)=>{Sp(t.test,e,i,t),Sp(t.consequent,e,i,t),t.alternate&&Sp(t.alternate,e,i,t)},Tp=(t,e,i)=>{Op(t.params,e,i,t),Sp(t.body,e,i,t)},Mp=(t,e,i)=>{Sp(t.callee,e,i,t),Op(t.arguments,e,i,t)},Op=(t,e,i,n)=>{t.forEach(t=>Sp(t,e,i,n))},Ep={TemplateLiteral:(t,e,i)=>{Op(t.expressions,e,i,t),Op(t.quasis,e,i,t)},MemberExpression:(t,e,i)=>{Sp(t.object,e,i,t),Sp(t.property,e,i,t)},CallExpression:Mp,NewExpression:Mp,ArrayExpression:(t,e,i)=>{Op(t.elements,e,i,t)},AssignmentExpression:Ap,AwaitExpression:Ip,BinaryExpression:Ap,LogicalExpression:Ap,UnaryExpression:Ip,UpdateExpression:Ip,ConditionalExpression:kp,ObjectExpression:(t,e,i)=>{Op(t.properties,e,i,t)},Property:(t,e,i)=>{Sp(t.key,e,i,t),Sp(t.value,e,i,t)},ArrowFunctionExpression:Tp,FunctionExpression:Tp,FunctionDeclaration:Tp,VariableDeclaration:(t,e,i)=>{Op(t.declarations,e,i,t)},VariableDeclarator:(t,e,i)=>{Sp(t.id,e,i,t),Sp(t.init,e,i,t)},SpreadElement:(t,e,i)=>{Sp(t.argument,e,i,t)},BlockStatement:(t,e,i)=>{Op(t.body,e,i,t)},ExpressionStatement:(t,e,i)=>{Sp(t.expression,e,i,t)},IfStatement:kp,ForStatement:(t,e,i)=>{Sp(t.init,e,i,t),Sp(t.test,e,i,t),Sp(t.update,e,i,t),Sp(t.body,e,i,t)},WhileStatement:(t,e,i)=>{Sp(t.test,e,i,t),Sp(t.body,e,i,t)},DoWhileStatement:(t,e,i)=>{Sp(t.body,e,i,t),Sp(t.test,e,i,t)},SwitchStatement:(t,e,i)=>{Sp(t.discriminant,e,i,t),Op(t.cases,e,i,t)},SwitchCase:(t,e,i)=>{t.test&&Sp(t.test,e,i,t),Op(t.consequent,e,i,t)},ReturnStatement:Ip,Program:(t,e,i)=>{Sp(t.body[0],e,i,t)}};function Cp(t){delete t.start,delete t.end,delete t.optional}function Dp(t){Cp(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}var Bp=function(t){return Sp(t,null,{Column:Dp,Constant:Dp,Default:Cp}),t};function Lp(t,e){return e&&e.type===t}function Pp(t){return Lp(jt,t)||Lp(Vt,t)}var Fp=function(t){return g(t)?t:()=>t};const Np="Escaped functions are not valid as rollup or pivot values.";var Rp=function(t,e,i){t.aggronly&&p(Np);const n="(row,data)=>fn("+Fe(t.table.columnNames())+",$)";return{escape:Oe.escape(n,Fp(e.expr),i)}},Up={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Vp="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",jp={5:Vp,"5module":Vp+" export import",6:Vp+" const class extends export import super"},zp=/^in(stanceof)?$/,Wp="¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÕ∞-Õ¥Õ∂Õ∑Õ∫-ÕΩÕøŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“ä-‘Ø‘±-’ñ’ô’†-÷à◊ê-◊™◊Ø-◊≤ÿ†-ŸäŸÆŸØŸ±-€ì€ï€•€¶€Æ€Ø€∫-€º€ø‹ê‹í-‹Ø›ç-ﬁ•ﬁ±ﬂä-ﬂ™ﬂ¥ﬂµﬂ∫‡†Ä-‡†ï‡†ö‡†§‡†®‡°Ä-‡°ò‡°†-‡°™‡¢†-‡¢¥‡¢∂-‡£á‡§Ñ-‡§π‡§Ω‡•ê‡•ò-‡•°‡•±-‡¶Ä‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü-‡ß°‡ß∞‡ß±‡ßº‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡©ô-‡©ú‡©û‡©≤-‡©¥‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™Ω‡´ê‡´†‡´°‡´π‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨Ω‡≠ú‡≠ù‡≠ü-‡≠°‡≠±‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Øê‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞π‡∞Ω‡±ò-‡±ö‡±†‡±°‡≤Ä‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤Ω‡≥û‡≥†‡≥°‡≥±‡≥≤‡¥Ñ-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω‡µé‡µî-‡µñ‡µü-‡µ°‡µ∫-‡µø‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∏Å-‡∏∞‡∏≤‡∏≥‡πÄ-‡πÜ‡∫Å‡∫Ç‡∫Ñ‡∫Ü-‡∫ä‡∫å-‡∫£‡∫•‡∫ß-‡∫∞‡∫≤‡∫≥‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªú-‡ªü‡ºÄ‡ΩÄ-‡Ωá‡Ωâ-‡Ω¨‡æà-‡æå·ÄÄ-·Ä™·Äø·Åê-·Åï·Åö-·Åù·Å°·Å•·Å¶·ÅÆ-·Å∞·Åµ-·ÇÅ·Çé·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·éÄ-·éè·é†-·èµ·è∏-·èΩ·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∏·úÄ-·úå·úé-·úë·ú†-·ú±·ùÄ-·ùë·ù†-·ù¨·ùÆ-·ù∞·ûÄ-·û≥·üó·üú·††-·°∏·¢Ä-·¢®·¢™·¢∞-·£µ·§Ä-·§û·•ê-·•≠·•∞-·•¥·¶Ä-·¶´·¶∞-·ßâ·®Ä-·®ñ·®†-·©î·™ß·¨Ö-·¨≥·≠Ö-·≠ã·ÆÉ-·Æ†·ÆÆ·ÆØ·Æ∫-·Ø•·∞Ä-·∞£·±ç-·±è·±ö-·±Ω·≤Ä-·≤à·≤ê-·≤∫·≤Ω-·≤ø·≥©-·≥¨·≥Æ-·≥≥·≥µ·≥∂·≥∫·¥Ä-·∂ø·∏Ä-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Å±‚Åø‚Çê-‚Çú‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñò-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥Æ‚≥≤‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚∂Ä-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û„ÄÖ-„Äá„Ä°-„Ä©„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çõ-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„ÑØ„Ñ±-„Üé„Ü†-„Üø„á∞-„áø„êÄ-‰∂ø‰∏Ä-ÈøºÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-ÍòüÍò™Íò´ÍôÄ-ÍôÆÍôø-ÍöùÍö†-ÍõØÍúó-ÍúüÍú¢-ÍûàÍûã-ÍûøÍüÇ-ÍüäÍüµ-Í†ÅÍ†É-Í†ÖÍ†á-Í†äÍ†å-Í†¢Í°Ä-Í°≥Í¢Ç-Í¢≥Í£≤-Í£∑Í£ªÍ£ΩÍ£æÍ§ä-Í§•Í§∞-Í•ÜÍ•†-Í•ºÍ¶Ñ-Í¶≤ÍßèÍß†-Íß§Íß¶-ÍßØÍß∫-ÍßæÍ®Ä-Í®®Í©Ä-Í©ÇÍ©Ñ-Í©ãÍ©†-Í©∂Í©∫Í©æ-Í™ØÍ™±Í™µÍ™∂Í™π-Í™ΩÍ´ÄÍ´ÇÍ´õ-Í´ùÍ´†-Í´™Í´≤-Í´¥Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍ¨∞-Í≠öÍ≠ú-Í≠©Í≠∞-ÍØ¢Í∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ùÔ¨ü-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔπ∞-Ôπ¥Ôπ∂-ÔªºÔº°-Ôº∫ÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú",$p="‚Äå‚Äç¬∑ÃÄ-ÕØŒá“É-“á÷ë-÷Ω÷ø◊Å◊Ç◊Ñ◊Ö◊áÿê-ÿöŸã-Ÿ©Ÿ∞€ñ-€ú€ü-€§€ß€®€™-€≠€∞-€π‹ë‹∞-›äﬁ¶-ﬁ∞ﬂÄ-ﬂâﬂ´-ﬂ≥ﬂΩ‡†ñ-‡†ô‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°ô-‡°õ‡£ì-‡£°‡££-‡§É‡§∫-‡§º‡§æ-‡•è‡•ë-‡•ó‡•¢‡•£‡•¶-‡•Ø‡¶Å-‡¶É‡¶º‡¶æ-‡ßÑ‡ßá‡ßà‡ßã-‡ßç‡ßó‡ß¢‡ß£‡ß¶-‡ßØ‡ßæ‡®Å-‡®É‡®º‡®æ-‡©Ç‡©á‡©à‡©ã-‡©ç‡©ë‡©¶-‡©±‡©µ‡™Å-‡™É‡™º‡™æ-‡´Ö‡´á-‡´â‡´ã-‡´ç‡´¢‡´£‡´¶-‡´Ø‡´∫-‡´ø‡¨Å-‡¨É‡¨º‡¨æ-‡≠Ñ‡≠á‡≠à‡≠ã-‡≠ç‡≠ï-‡≠ó‡≠¢‡≠£‡≠¶-‡≠Ø‡ÆÇ‡Ææ-‡ØÇ‡ØÜ-‡Øà‡Øä-‡Øç‡Øó‡Ø¶-‡ØØ‡∞Ä-‡∞Ñ‡∞æ-‡±Ñ‡±Ü-‡±à‡±ä-‡±ç‡±ï‡±ñ‡±¢‡±£‡±¶-‡±Ø‡≤Å-‡≤É‡≤º‡≤æ-‡≥Ñ‡≥Ü-‡≥à‡≥ä-‡≥ç‡≥ï‡≥ñ‡≥¢‡≥£‡≥¶-‡≥Ø‡¥Ä-‡¥É‡¥ª‡¥º‡¥æ-‡µÑ‡µÜ-‡µà‡µä-‡µç‡µó‡µ¢‡µ£‡µ¶-‡µØ‡∂Å-‡∂É‡∑ä‡∑è-‡∑î‡∑ñ‡∑ò-‡∑ü‡∑¶-‡∑Ø‡∑≤‡∑≥‡∏±‡∏¥-‡∏∫‡πá-‡πé‡πê-‡πô‡∫±‡∫¥-‡∫º‡ªà-‡ªç‡ªê-‡ªô‡ºò‡ºô‡º†-‡º©‡ºµ‡º∑‡ºπ‡ºæ‡ºø‡Ω±-‡æÑ‡æÜ‡æá‡æç-‡æó‡æô-‡æº‡øÜ·Ä´-·Äæ·ÅÄ-·Åâ·Åñ-·Åô·Åû-·Å†·Å¢-·Å§·Åß-·Å≠·Å±-·Å¥·ÇÇ-·Çç·Çè-·Çù·çù-·çü·ç©-·ç±·úí-·úî·ú≤-·ú¥·ùí·ùì·ù≤·ù≥·û¥-·üì·üù·ü†-·ü©·†ã-·†ç·†ê-·†ô·¢©·§†-·§´·§∞-·§ª·•Ü-·•è·ßê-·ßö·®ó-·®õ·©ï-·©û·©†-·©º·©ø-·™â·™ê-·™ô·™∞-·™Ω·™ø·´Ä·¨Ä-·¨Ñ·¨¥-·≠Ñ·≠ê-·≠ô·≠´-·≠≥·ÆÄ-·ÆÇ·Æ°-·Æ≠·Æ∞-·Æπ·Ø¶-·Ø≥·∞§-·∞∑·±Ä-·±â·±ê-·±ô·≥ê-·≥í·≥î-·≥®·≥≠·≥¥·≥∑-·≥π·∑Ä-·∑π·∑ª-·∑ø‚Äø‚ÅÄ‚Åî‚Éê-‚Éú‚É°‚É•-‚É∞‚≥Ø-‚≥±‚µø‚∑†-‚∑ø„Ä™-„ÄØ„Çô„ÇöÍò†-Íò©ÍôØÍô¥-ÍôΩÍöûÍöüÍõ∞Íõ±Í†ÇÍ†ÜÍ†ãÍ†£-Í†ßÍ†¨Í¢ÄÍ¢ÅÍ¢¥-Í£ÖÍ£ê-Í£ôÍ£†-Í£±Í£ø-Í§âÍ§¶-Í§≠Í•á-Í•ìÍ¶Ä-Í¶ÉÍ¶≥-ÍßÄÍßê-ÍßôÍß•Íß∞-ÍßπÍ®©-Í®∂Í©ÉÍ©åÍ©çÍ©ê-Í©ôÍ©ª-Í©ΩÍ™∞Í™≤-Í™¥Í™∑Í™∏Í™æÍ™øÍ´ÅÍ´´-Í´ØÍ´µÍ´∂ÍØ£-ÍØ™ÍØ¨ÍØ≠ÍØ∞-ÍØπÔ¨ûÔ∏Ä-Ô∏èÔ∏†-Ô∏ØÔ∏≥Ô∏¥Ôπç-ÔπèÔºê-ÔºôÔºø",Hp=new RegExp("["+Wp+"]"),Yp=new RegExp("["+Wp+$p+"]");Wp=$p=null;var qp=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Gp=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function Kp(t,e){for(var i=65536,n=0;n<e.length;n+=2){if(i+=e[n],i>t)return!1;if(i+=e[n+1],i>=t)return!0}}function Xp(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&Hp.test(String.fromCharCode(t)):!1!==e&&Kp(t,qp)))}function Jp(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&Yp.test(String.fromCharCode(t)):!1!==e&&(Kp(t,qp)||Kp(t,Gp)))))}var Qp=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function Zp(t,e){return new Qp(t,{beforeExpr:!0,binop:e})}var tf={beforeExpr:!0},ef={startsExpr:!0},nf={};function rf(t,e){return void 0===e&&(e={}),e.keyword=t,nf[t]=new Qp(t,e)}var sf={num:new Qp("num",ef),regexp:new Qp("regexp",ef),string:new Qp("string",ef),name:new Qp("name",ef),privateId:new Qp("privateId",ef),eof:new Qp("eof"),bracketL:new Qp("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Qp("]"),braceL:new Qp("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Qp("}"),parenL:new Qp("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Qp(")"),comma:new Qp(",",tf),semi:new Qp(";",tf),colon:new Qp(":",tf),dot:new Qp("."),question:new Qp("?",tf),questionDot:new Qp("?."),arrow:new Qp("=>",tf),template:new Qp("template"),invalidTemplate:new Qp("invalidTemplate"),ellipsis:new Qp("...",tf),backQuote:new Qp("`",ef),dollarBraceL:new Qp("${",{beforeExpr:!0,startsExpr:!0}),eq:new Qp("=",{beforeExpr:!0,isAssign:!0}),assign:new Qp("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Qp("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Qp("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Zp("||",1),logicalAND:Zp("&&",2),bitwiseOR:Zp("|",3),bitwiseXOR:Zp("^",4),bitwiseAND:Zp("&",5),equality:Zp("==/!=/===/!==",6),relational:Zp("</>/<=/>=",7),bitShift:Zp("<</>>/>>>",8),plusMin:new Qp("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Zp("%",10),star:Zp("*",10),slash:Zp("/",10),starstar:new Qp("**",{beforeExpr:!0}),coalesce:Zp("??",1),_break:rf("break"),_case:rf("case",tf),_catch:rf("catch"),_continue:rf("continue"),_debugger:rf("debugger"),_default:rf("default",tf),_do:rf("do",{isLoop:!0,beforeExpr:!0}),_else:rf("else",tf),_finally:rf("finally"),_for:rf("for",{isLoop:!0}),_function:rf("function",ef),_if:rf("if"),_return:rf("return",tf),_switch:rf("switch"),_throw:rf("throw",tf),_try:rf("try"),_var:rf("var"),_const:rf("const"),_while:rf("while",{isLoop:!0}),_with:rf("with"),_new:rf("new",{beforeExpr:!0,startsExpr:!0}),_this:rf("this",ef),_super:rf("super",ef),_class:rf("class",ef),_extends:rf("extends",tf),_export:rf("export"),_import:rf("import",ef),_null:rf("null",ef),_true:rf("true",ef),_false:rf("false",ef),_in:rf("in",{beforeExpr:!0,binop:7}),_instanceof:rf("instanceof",{beforeExpr:!0,binop:7}),_typeof:rf("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:rf("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:rf("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},af=/\r\n?|\n|\u2028|\u2029/,of=new RegExp(af.source,"g");function cf(t){return 10===t||13===t||8232===t||8233===t}var hf=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,lf=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,uf=Object.prototype,df=uf.hasOwnProperty,pf=uf.toString;function ff(t,e){return df.call(t,e)}var gf=Array.isArray||function(t){return"[object Array]"===pf.call(t)};function mf(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var yf=function(t,e){this.line=t,this.column=e};yf.prototype.offset=function(t){return new yf(this.line,this.column+t)};var bf=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function _f(t,e){for(var i=1,n=0;;){of.lastIndex=n;var r=of.exec(t);if(!(r&&r.index<e))return new yf(i,e-n);++i,n=r.index+r[0].length}}var vf={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},xf=!1;function wf(t){var e={};for(var i in vf)e[i]=t&&ff(t,i)?t[i]:vf[i];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!xf&&"object"===typeof console&&console.warn&&(xf=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),gf(e.onToken)){var n=e.onToken;e.onToken=function(t){return n.push(t)}}return gf(e.onComment)&&(e.onComment=Sf(e,e.onComment)),e}function Sf(t,e){return function(i,n,r,s,a,o){var c={type:i?"Block":"Line",value:n,start:r,end:s};t.locations&&(c.loc=new bf(this,a,o)),t.ranges&&(c.range=[r,s]),e.push(c)}}var If=1,Af=2,kf=4,Tf=8,Mf=16,Of=32,Ef=64,Cf=128,Df=256,Bf=If|Af|Df;function Lf(t,e){return Af|(t?kf:0)|(e?Tf:0)}var Pf=0,Ff=1,Nf=2,Rf=3,Uf=4,Vf=5,jf=function(t,e,i){this.options=t=wf(t),this.sourceFile=t.sourceFile,this.keywords=mf(jp[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var n="";!0!==t.allowReserved&&(n=Up[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(n+=" await")),this.reservedWords=mf(n);var r=(n?n+" ":"")+Up.strict;this.reservedWordsStrict=mf(r),this.reservedWordsStrictBind=mf(r+" "+Up.strictBind),this.input=String(e),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(af).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=sf.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(If),this.regexpState=null,this.privateNameStack=[]},zf={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};jf.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},zf.inFunction.get=function(){return(this.currentVarScope().flags&Af)>0},zf.inGenerator.get=function(){return(this.currentVarScope().flags&Tf)>0&&!this.currentVarScope().inClassFieldInit},zf.inAsync.get=function(){return(this.currentVarScope().flags&kf)>0&&!this.currentVarScope().inClassFieldInit},zf.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&Df)return!1;if(e.flags&Af)return(e.flags&kf)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},zf.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&Ef)>0||i||this.options.allowSuperOutsideMethod},zf.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Cf)>0},zf.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},zf.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&(Af|Df))>0||i},zf.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Df)>0},jf.extend=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];for(var i=this,n=0;n<t.length;n++)i=t[n](i);return i},jf.parse=function(t,e){return new this(e,t).parse()},jf.parseExpressionAt=function(t,e,i){var n=new this(i,t,e);return n.nextToken(),n.parseExpression()},jf.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(jf.prototype,zf);var Wf=jf.prototype,$f=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function Hf(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}Wf.strictDirective=function(t){for(;;){lf.lastIndex=t,t+=lf.exec(this.input)[0].length;var e=$f.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){lf.lastIndex=t+e[0].length;var i=lf.exec(this.input),n=i.index+i[0].length,r=this.input.charAt(n);return";"===r||"}"===r||af.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||"!"===r&&"="===this.input.charAt(n+1))}t+=e[0].length,lf.lastIndex=t,t+=lf.exec(this.input)[0].length,";"===this.input[t]&&t++}},Wf.eat=function(t){return this.type===t&&(this.next(),!0)},Wf.isContextual=function(t){return this.type===sf.name&&this.value===t&&!this.containsEsc},Wf.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},Wf.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},Wf.canInsertSemicolon=function(){return this.type===sf.eof||this.type===sf.braceR||af.test(this.input.slice(this.lastTokEnd,this.start))},Wf.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Wf.semicolon=function(){this.eat(sf.semi)||this.insertSemicolon()||this.unexpected()},Wf.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},Wf.expect=function(t){this.eat(t)||this.unexpected()},Wf.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},Wf.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,"Parenthesized pattern")}},Wf.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,n=t.doubleProto;if(!e)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},Wf.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Wf.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var Yf=jf.prototype;Yf.parseTopLevel=function(t){var e=Object.create(null);t.body||(t.body=[]);while(this.type!==sf.eof){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var n=0,r=Object.keys(this.undefinedExports);n<r.length;n+=1){var s=r[n];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var qf={kind:"loop"},Gf={kind:"switch"};Yf.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;lf.lastIndex=this.pos;var e=lf.exec(this.input),i=this.pos+e[0].length,n=this.input.charCodeAt(i);if(91===n||92===n||n>55295&&n<56320)return!0;if(t)return!1;if(123===n)return!0;if(Xp(n,!0)){var r=i+1;while(Jp(n=this.input.charCodeAt(r),!0))++r;if(92===n||n>55295&&n<56320)return!0;var s=this.input.slice(i,r);if(!zp.test(s))return!0}return!1},Yf.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;lf.lastIndex=this.pos;var t,e=lf.exec(this.input),i=this.pos+e[0].length;return!af.test(this.input.slice(this.pos,i))&&"function"===this.input.slice(i,i+8)&&(i+8===this.input.length||!(Jp(t=this.input.charCodeAt(i+8))||t>55295&&t<56320))},Yf.parseStatement=function(t,e,i){var n,r=this.type,s=this.startNode();switch(this.isLet(t)&&(r=sf._var,n="let"),r){case sf._break:case sf._continue:return this.parseBreakContinueStatement(s,r.keyword);case sf._debugger:return this.parseDebuggerStatement(s);case sf._do:return this.parseDoStatement(s);case sf._for:return this.parseForStatement(s);case sf._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case sf._class:return t&&this.unexpected(),this.parseClass(s,!0);case sf._if:return this.parseIfStatement(s);case sf._return:return this.parseReturnStatement(s);case sf._switch:return this.parseSwitchStatement(s);case sf._throw:return this.parseThrowStatement(s);case sf._try:return this.parseTryStatement(s);case sf._const:case sf._var:return n=n||this.value,t&&"var"!==n&&this.unexpected(),this.parseVarStatement(s,n);case sf._while:return this.parseWhileStatement(s);case sf._with:return this.parseWithStatement(s);case sf.braceL:return this.parseBlock(!0,s);case sf.semi:return this.parseEmptyStatement(s);case sf._export:case sf._import:if(this.options.ecmaVersion>10&&r===sf._import){lf.lastIndex=this.pos;var a=lf.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(40===c||46===c)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===sf._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var h=this.value,l=this.parseExpression();return r===sf.name&&"Identifier"===l.type&&this.eat(sf.colon)?this.parseLabeledStatement(s,h,l,t):this.parseExpressionStatement(s,l)}},Yf.parseBreakContinueStatement=function(t,e){var i="break"===e;this.next(),this.eat(sf.semi)||this.insertSemicolon()?t.label=null:this.type!==sf.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var r=this.labels[n];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(i||"loop"===r.kind))break;if(t.label&&i)break}}return n===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},Yf.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},Yf.parseDoStatement=function(t){return this.next(),this.labels.push(qf),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(sf._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(sf.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},Yf.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(qf),this.enterScope(0),this.expect(sf.parenL),this.type===sf.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===sf._var||this.type===sf._const||i){var n=this.startNode(),r=i?"let":this.value;return this.next(),this.parseVar(n,!0,r),this.finishNode(n,"VariableDeclaration"),(this.type===sf._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===n.declarations.length?(this.options.ecmaVersion>=9&&(this.type===sf._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,n)):(e>-1&&this.unexpected(e),this.parseFor(t,n))}var s=this.isContextual("let"),a=!1,o=new Hf,c=this.parseExpression(!(e>-1)||"await",o);return this.type===sf._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===sf._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,o),this.checkLValPattern(c),this.parseForIn(t,c)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,c))},Yf.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,Xf|(i?0:Jf),!1,e)},Yf.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(sf._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},Yf.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(sf.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},Yf.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(sf.braceL),this.labels.push(Gf),this.enterScope(0);for(var i=!1;this.type!==sf.braceR;)if(this.type===sf._case||this.type===sf._default){var n=this.type===sf._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),n?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(sf.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},Yf.parseThrowStatement=function(t){return this.next(),af.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var Kf=[];Yf.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===sf._catch){var e=this.startNode();if(this.next(),this.eat(sf.parenL)){e.param=this.parseBindingAtom();var i="Identifier"===e.param.type;this.enterScope(i?Of:0),this.checkLValPattern(e.param,i?Uf:Nf),this.expect(sf.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(sf._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},Yf.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},Yf.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(qf),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},Yf.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},Yf.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},Yf.parseLabeledStatement=function(t,e,i,n){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===e&&this.raise(i.start,"Label '"+e+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===sf._switch?"switch":null,c=this.labels.length-1;c>=0;c--){var h=this.labels[c];if(h.statementStart!==t.start)break;h.statementStart=this.start,h.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},Yf.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},Yf.parseBlock=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(sf.braceL),t&&this.enterScope(0);while(this.type!==sf.braceR){var n=this.parseStatement(null);e.body.push(n)}return i&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},Yf.parseFor=function(t,e){return t.init=e,this.expect(sf.semi),t.test=this.type===sf.semi?null:this.parseExpression(),this.expect(sf.semi),t.update=this.type===sf.parenR?null:this.parseExpression(),this.expect(sf.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},Yf.parseForIn=function(t,e){var i=this.type===sf._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!i||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(sf.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")},Yf.parseVar=function(t,e,i){for(t.declarations=[],t.kind=i;;){var n=this.startNode();if(this.parseVarId(n,i),this.eat(sf.eq)?n.init=this.parseMaybeAssign(e):"const"!==i||this.type===sf._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===n.id.type||e&&(this.type===sf._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(sf.comma))break}return t},Yf.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?Ff:Nf,!1)};var Xf=1,Jf=2,Qf=4;function Zf(t,e){var i=e.key.name,n=t[i],r="true";return"MethodDefinition"!==e.type||"get"!==e.kind&&"set"!==e.kind||(r=(e.static?"s":"i")+e.kind),"iget"===n&&"iset"===r||"iset"===n&&"iget"===r||"sget"===n&&"sset"===r||"sset"===n&&"sget"===r?(t[i]="true",!1):!!n||(t[i]=r,!1)}function tg(t,e){var i=t.computed,n=t.key;return!i&&("Identifier"===n.type&&n.name===e||"Literal"===n.type&&n.value===e)}Yf.parseFunction=function(t,e,i,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===sf.star&&e&Jf&&this.unexpected(),t.generator=this.eat(sf.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&Xf&&(t.id=e&Qf&&this.type!==sf.name?null:this.parseIdent(),!t.id||e&Jf||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?Ff:Nf:Rf));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Lf(t.async,t.generator)),e&Xf||(t.id=this.type===sf.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&Xf?"FunctionDeclaration":"FunctionExpression")},Yf.parseFunctionParams=function(t){this.expect(sf.parenL),t.params=this.parseBindingList(sf.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Yf.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var n=this.enterClassBody(),r=this.startNode(),s=!1;r.body=[],this.expect(sf.braceL);while(this.type!==sf.braceR){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&Zf(n,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},Yf.parseClassElement=function(t){if(this.eat(sf.semi))return null;var e=this.options.ecmaVersion,i=this.startNode(),n="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(sf.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===sf.star?o=!0:n="static"}if(i.static=o,!n&&e>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==sf.star||this.canInsertSemicolon()?n="async":s=!0),!n&&(e>=9||!s)&&this.eat(sf.star)&&(r=!0),!n&&!s&&!r){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:n=c)}if(n?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=n,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),e<13||this.type===sf.parenL||"method"!==a||r||s){var h=!i.static&&tg(i,"constructor"),l=h&&t;h&&"method"!==a&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=h?"constructor":a,this.parseClassMethod(i,r,s,l)}else this.parseClassField(i);return i},Yf.isClassElementNameStart=function(){return this.type===sf.name||this.type===sf.privateId||this.type===sf.num||this.type===sf.string||this.type===sf.bracketL||this.type.keyword},Yf.parseClassElementName=function(t){this.type===sf.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},Yf.parseClassMethod=function(t,e,i,n){var r=t.key;"constructor"===t.kind?(e&&this.raise(r.start,"Constructor can't be a generator"),i&&this.raise(r.start,"Constructor can't be an async method")):t.static&&tg(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,i,n);return"get"===t.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===t.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},Yf.parseClassField=function(t){if(tg(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&tg(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(sf.eq)){var e=this.currentThisScope(),i=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=i}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},Yf.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;this.labels=[],this.enterScope(Df|Ef);while(this.type!==sf.braceR){var i=this.parseStatement(null);t.body.push(i)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")},Yf.parseClassId=function(t,e){this.type===sf.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,Nf,!1)):(!0===e&&this.unexpected(),t.id=null)},Yf.parseClassSuper=function(t){t.superClass=this.eat(sf._extends)?this.parseExprSubscripts(!1):null},Yf.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},Yf.exitClassBody=function(){for(var t=this.privateNameStack.pop(),e=t.declared,i=t.used,n=this.privateNameStack.length,r=0===n?null:this.privateNameStack[n-1],s=0;s<i.length;++s){var a=i[s];ff(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},Yf.parseExport=function(t,e){if(this.next(),this.eat(sf.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseIdent(!0),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==sf.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(sf._default)){var i;if(this.checkExport(e,"default",this.lastTokStart),this.type===sf._function||(i=this.isAsyncFunction())){var n=this.startNode();this.next(),i&&this.next(),t.declaration=this.parseFunction(n,Xf|Qf,!1,i)}else if(this.type===sf._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==sf.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},Yf.checkExport=function(t,e,i){t&&(ff(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},Yf.checkPatternExport=function(t,e){var i=e.type;if("Identifier"===i)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===i)for(var n=0,r=e.properties;n<r.length;n+=1){var s=r[n];this.checkPatternExport(t,s)}else if("ArrayPattern"===i)for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(t,c)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===i&&this.checkPatternExport(t,e.expression)},Yf.checkVariableExport=function(t,e){if(t)for(var i=0,n=e;i<n.length;i+=1){var r=n[i];this.checkPatternExport(t,r.id)}},Yf.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Yf.parseExportSpecifiers=function(t){var e=[],i=!0;this.expect(sf.braceL);while(!this.eat(sf.braceR)){if(i)i=!1;else if(this.expect(sf.comma),this.afterTrailingComma(sf.braceR))break;var n=this.startNode();n.local=this.parseIdent(!0),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,this.checkExport(t,n.exported.name,n.exported.start),e.push(this.finishNode(n,"ExportSpecifier"))}return e},Yf.parseImport=function(t){return this.next(),this.type===sf.string?(t.specifiers=Kf,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===sf.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},Yf.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===sf.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLValSimple(i.local,Nf),t.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(sf.comma))return t}if(this.type===sf.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLValSimple(n.local,Nf),t.push(this.finishNode(n,"ImportNamespaceSpecifier")),t}this.expect(sf.braceL);while(!this.eat(sf.braceR)){if(e)e=!1;else if(this.expect(sf.comma),this.afterTrailingComma(sf.braceR))break;var r=this.startNode();r.imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,Nf),t.push(this.finishNode(r,"ImportSpecifier"))}return t},Yf.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},Yf.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"===typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var eg=jf.prototype;eg.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},eg.toAssignableList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];r&&this.toAssignable(r,e)}if(i){var s=t[i-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},eg.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},eg.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==sf.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},eg.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case sf.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(sf.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case sf.braceL:return this.parseObj(!0)}return this.parseIdent()},eg.parseBindingList=function(t,e,i){var n=[],r=!0;while(!this.eat(t))if(r?r=!1:this.expect(sf.comma),e&&this.type===sf.comma)n.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===sf.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),n.push(s),this.type===sf.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),n.push(a)}return n},eg.parseBindingListItem=function(t){return t},eg.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(sf.eq))return i;var n=this.startNodeAt(t,e);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},eg.checkLValSimple=function(t,e,i){void 0===e&&(e=Pf);var n=e!==Pf;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(n?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(e===Nf&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),i&&(ff(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),e!==Vf&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":n&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return n&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,i);default:this.raise(t.start,(n?"Binding":"Assigning to")+" rvalue")}},eg.checkLValPattern=function(t,e,i){switch(void 0===e&&(e=Pf),t.type){case"ObjectPattern":for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.checkLValInnerPattern(s,e,i)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,e,i)}break;default:this.checkLValSimple(t,e,i)}},eg.checkLValInnerPattern=function(t,e,i){switch(void 0===e&&(e=Pf),t.type){case"Property":this.checkLValInnerPattern(t.value,e,i);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,i);break;case"RestElement":this.checkLValPattern(t.argument,e,i);break;default:this.checkLValPattern(t,e,i)}};var ig=function(t,e,i,n,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=n,this.generator=!!r},ng={b_stat:new ig("{",!1),b_expr:new ig("{",!0),b_tmpl:new ig("${",!1),p_stat:new ig("(",!1),p_expr:new ig("(",!0),q_tmpl:new ig("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new ig("function",!1),f_expr:new ig("function",!0),f_expr_gen:new ig("function",!0,!1,null,!0),f_gen:new ig("function",!1,!1,null,!0)},rg=jf.prototype;rg.initialContext=function(){return[ng.b_stat]},rg.curContext=function(){return this.context[this.context.length-1]},rg.braceIsBlock=function(t){var e=this.curContext();return e===ng.f_expr||e===ng.f_stat||(t!==sf.colon||e!==ng.b_stat&&e!==ng.b_expr?t===sf._return||t===sf.name&&this.exprAllowed?af.test(this.input.slice(this.lastTokEnd,this.start)):t===sf._else||t===sf.semi||t===sf.eof||t===sf.parenR||t===sf.arrow||(t===sf.braceL?e===ng.b_stat:t!==sf._var&&t!==sf._const&&t!==sf.name&&!this.exprAllowed):!e.isExpr)},rg.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},rg.updateContext=function(t){var e,i=this.type;i.keyword&&t===sf.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},rg.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},sf.parenR.updateContext=sf.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===ng.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},sf.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ng.b_stat:ng.b_expr),this.exprAllowed=!0},sf.dollarBraceL.updateContext=function(){this.context.push(ng.b_tmpl),this.exprAllowed=!0},sf.parenL.updateContext=function(t){var e=t===sf._if||t===sf._for||t===sf._with||t===sf._while;this.context.push(e?ng.p_stat:ng.p_expr),this.exprAllowed=!0},sf.incDec.updateContext=function(){},sf._function.updateContext=sf._class.updateContext=function(t){!t.beforeExpr||t===sf._else||t===sf.semi&&this.curContext()!==ng.p_stat||t===sf._return&&af.test(this.input.slice(this.lastTokEnd,this.start))||(t===sf.colon||t===sf.braceL)&&this.curContext()===ng.b_stat?this.context.push(ng.f_stat):this.context.push(ng.f_expr),this.exprAllowed=!1},sf.backQuote.updateContext=function(){this.curContext()===ng.q_tmpl?this.context.pop():this.context.push(ng.q_tmpl),this.exprAllowed=!1},sf.star.updateContext=function(t){if(t===sf._function){var e=this.context.length-1;this.context[e]===ng.f_expr?this.context[e]=ng.f_expr_gen:this.context[e]=ng.f_gen}this.exprAllowed=!0},sf.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==sf.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var sg=jf.prototype;function ag(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&ag(t.expression)}sg.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n,r=t.key;switch(r.type){case"Identifier":n=r.name;break;case"Literal":n=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===s&&(e.proto&&(i?i.doubleProto<0&&(i.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{n="$"+n;var a,o=e[n];if(o)a="init"===s?this.strict&&o.init||o.get||o.set:o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property");else o=e[n]={init:!1,get:!1,set:!1};o[s]=!0}}},sg.parseExpression=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===sf.comma){var s=this.startNodeAt(i,n);s.expressions=[r];while(this.eat(sf.comma))s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r},sg.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var n=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new Hf,n=!0);var o=this.start,c=this.startLoc;this.type!==sf.parenL&&this.type!==sf.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var h=this.parseMaybeConditional(t,e);if(i&&(h=i.call(this,h,o,c)),this.type.isAssign){var l=this.startNodeAt(o,c);return l.operator=this.value,this.type===sf.eq&&(h=this.toAssignable(h,!1,e)),n||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=h.start&&(e.shorthandAssign=-1),this.type===sf.eq?this.checkLValPattern(h):this.checkLValSimple(h),l.left=h,this.next(),l.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(l,"AssignmentExpression")}return n&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),h},sg.parseMaybeConditional=function(t,e){var i=this.start,n=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(sf.question)){var s=this.startNodeAt(i,n);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(sf.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},sg.parseExprOps=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===i&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,i,n,-1,t)},sg.parseExprOp=function(t,e,i,n,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==sf._in)&&s>n){var a=this.type===sf.logicalOR||this.type===sf.logicalAND,o=this.type===sf.coalesce;o&&(s=sf.logicalAND.binop);var c=this.value;this.next();var h=this.start,l=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),h,l,s,r),d=this.buildBinary(e,i,t,u,c,a||o);return(a&&this.type===sf.coalesce||o&&(this.type===sf.logicalOR||this.type===sf.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,e,i,n,r)}return t},sg.buildBinary=function(t,e,i,n,r,s){"PrivateIdentifier"===n.type&&this.raise(n.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=i,a.operator=r,a.right=n,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},sg.parseMaybeUnary=function(t,e,i,n){var r,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(n),e=!0;else if(this.type.prefix){var o=this.startNode(),c=this.type===sf.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,c,n),this.checkExpressionErrors(t,!0),c?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&ag(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,r=this.finishNode(o,c?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==sf.privateId){if(r=this.parseExprSubscripts(t,n),this.checkExpressionErrors(t))return r;while(this.type.postfix&&!this.canInsertSemicolon()){var h=this.startNodeAt(s,a);h.operator=this.value,h.prefix=!1,h.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(h,"UpdateExpression")}}else(n||0===this.privateNameStack.length)&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==sf._in&&this.unexpected();return i||!this.eat(sf.starstar)?r:e?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,r,this.parseMaybeUnary(null,!1,!1,n),"**",!1)},sg.parseExprSubscripts=function(t,e){var i=this.start,n=this.startLoc,r=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var s=this.parseSubscripts(r,i,n,!1,e);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s},sg.parseSubscripts=function(t,e,i,n,r){var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,a=!1;while(1){var o=this.parseSubscript(t,e,i,n,s,a,r);if(o.optional&&(a=!0),o===t||"ArrowFunctionExpression"===o.type){if(a){var c=this.startNodeAt(e,i);c.expression=o,o=this.finishNode(c,"ChainExpression")}return o}t=o}},sg.parseSubscript=function(t,e,i,n,r,s,a){var o=this.options.ecmaVersion>=11,c=o&&this.eat(sf.questionDot);n&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var h=this.eat(sf.bracketL);if(h||c&&this.type!==sf.parenL&&this.type!==sf.backQuote||this.eat(sf.dot)){var l=this.startNodeAt(e,i);l.object=t,h?(l.property=this.parseExpression(),this.expect(sf.bracketR)):this.type===sf.privateId&&"Super"!==t.type?l.property=this.parsePrivateIdent():l.property=this.parseIdent("never"!==this.options.allowReserved),l.computed=!!h,o&&(l.optional=c),t=this.finishNode(l,"MemberExpression")}else if(!n&&this.eat(sf.parenL)){var u=new Hf,d=this.yieldPos,p=this.awaitPos,f=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(sf.parenR,this.options.ecmaVersion>=8,!1,u);if(r&&!c&&!this.canInsertSemicolon()&&this.eat(sf.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=f,this.parseArrowExpression(this.startNodeAt(e,i),g,!0,a);this.checkExpressionErrors(u,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;var m=this.startNodeAt(e,i);m.callee=t,m.arguments=g,o&&(m.optional=c),t=this.finishNode(m,"CallExpression")}else if(this.type===sf.backQuote){(c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(e,i);y.tag=t,y.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(y,"TaggedTemplateExpression")}return t},sg.parseExprAtom=function(t,e){this.type===sf.slash&&this.readRegexp();var i,n=this.potentialArrowAt===this.start;switch(this.type){case sf._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type!==sf.parenL||this.allowDirectSuper||this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==sf.dot&&this.type!==sf.bracketL&&this.type!==sf.parenL&&this.unexpected(),this.finishNode(i,"Super");case sf._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case sf.name:var r=this.start,s=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(sf._function))return this.overrideContext(ng.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,e);if(n&&!this.canInsertSemicolon()){if(this.eat(sf.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1,e);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===sf.name&&!a&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(sf.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0,e)}return o;case sf.regexp:var c=this.value;return i=this.parseLiteral(c.value),i.regex={pattern:c.pattern,flags:c.flags},i;case sf.num:case sf.string:return this.parseLiteral(this.value);case sf._null:case sf._true:case sf._false:return i=this.startNode(),i.value=this.type===sf._null?null:this.type===sf._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case sf.parenL:var h=this.start,l=this.parseParenAndDistinguishExpression(n,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=h),t.parenthesizedBind<0&&(t.parenthesizedBind=h)),l;case sf.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(sf.bracketR,!0,!0,t),this.finishNode(i,"ArrayExpression");case sf.braceL:return this.overrideContext(ng.b_expr),this.parseObj(!1,t);case sf._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case sf._class:return this.parseClass(this.startNode(),!1);case sf._new:return this.parseNew();case sf.backQuote:return this.parseTemplate();case sf._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},sg.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case sf.parenL:return this.parseDynamicImport(t);case sf.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},sg.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(sf.parenR)){var e=this.start;this.eat(sf.comma)&&this.eat(sf.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},sg.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},sg.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},sg.parseParenExpression=function(){this.expect(sf.parenL);var t=this.parseExpression();return this.expect(sf.parenR),t},sg.parseParenAndDistinguishExpression=function(t,e){var i,n=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,c=this.startLoc,h=[],l=!0,u=!1,d=new Hf,p=this.yieldPos,f=this.awaitPos;this.yieldPos=0,this.awaitPos=0;while(this.type!==sf.parenR){if(l?l=!1:this.expect(sf.comma),s&&this.afterTrailingComma(sf.parenR,!0)){u=!0;break}if(this.type===sf.ellipsis){a=this.start,h.push(this.parseParenItem(this.parseRestBinding())),this.type===sf.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}h.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var g=this.lastTokEnd,m=this.lastTokEndLoc;if(this.expect(sf.parenR),t&&!this.canInsertSemicolon()&&this.eat(sf.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(n,r,h,e);h.length&&!u||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(d,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,h.length>1?(i=this.startNodeAt(o,c),i.expressions=h,this.finishNodeAt(i,"SequenceExpression",g,m)):i=h[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}return i},sg.parseParenItem=function(t){return t},sg.parseParenArrowList=function(t,e,i,n){return this.parseArrowExpression(this.startNodeAt(t,e),i,!1,n)};var og=[];sg.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(sf.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var n=this.start,r=this.startLoc,s=this.type===sf._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),n,r,!0,!1),s&&"ImportExpression"===t.callee.type&&this.raise(n,"Cannot use new with import()"),this.eat(sf.parenL)?t.arguments=this.parseExprList(sf.parenR,this.options.ecmaVersion>=8,!1):t.arguments=og,this.finishNode(t,"NewExpression")},sg.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===sf.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===sf.backQuote,this.finishNode(i,"TemplateElement")},sg.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var n=this.parseTemplateElement({isTagged:e});i.quasis=[n];while(!n.tail)this.type===sf.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(sf.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(sf.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},sg.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===sf.name||this.type===sf.num||this.type===sf.string||this.type===sf.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===sf.star)&&!af.test(this.input.slice(this.lastTokEnd,this.start))},sg.parseObj=function(t,e){var i=this.startNode(),n=!0,r={};i.properties=[],this.next();while(!this.eat(sf.braceR)){if(n)n=!1;else if(this.expect(sf.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(sf.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),i.properties.push(s)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},sg.parseProperty=function(t,e){var i,n,r,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(sf.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===sf.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===sf.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===sf.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(i=this.eat(sf.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(a)?(n=!0,i=this.options.ecmaVersion>=9&&this.eat(sf.star),this.parsePropertyName(a,e)):n=!1,this.parsePropertyValue(a,t,i,n,r,s,e,o),this.finishNode(a,"Property")},sg.parsePropertyValue=function(t,e,i,n,r,s,a,o){if((i||n)&&this.type===sf.colon&&this.unexpected(),this.eat(sf.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===sf.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,n);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===sf.comma||this.type===sf.braceR||this.type===sf.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||n)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===sf.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(i||n)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var c="get"===t.kind?0:1;if(t.value.params.length!==c){var h=t.value.start;"get"===t.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},sg.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(sf.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(sf.bracketR),t.key;t.computed=!1}return t.key=this.type===sf.num||this.type===sf.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},sg.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},sg.parseMethod=function(t,e,i){var n=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Lf(e,n.generator)|Ef|(i?Cf:0)),this.expect(sf.parenL),n.params=this.parseBindingList(sf.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")},sg.parseArrowExpression=function(t,e,i,n){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Lf(i,!1)|Mf),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,n),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},sg.parseFunctionBody=function(t,e,i,n){var r=e&&this.type!==sf.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(n),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!o||(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!i&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,Vf),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=c}this.exitScope()},sg.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if("Identifier"!==n.type)return!1}return!0},sg.checkParams=function(t,e){for(var i=Object.create(null),n=0,r=t.params;n<r.length;n+=1){var s=r[n];this.checkLValInnerPattern(s,Ff,e?null:i)}},sg.parseExprList=function(t,e,i,n){var r=[],s=!0;while(!this.eat(t)){if(s)s=!1;else if(this.expect(sf.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===sf.comma?a=null:this.type===sf.ellipsis?(a=this.parseSpread(n),n&&this.type===sf.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),r.push(a)}return r},sg.checkUnreserved=function(t){var e=t.start,i=t.end,n=t.name;if(this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===n&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==n&&"await"!==n||this.raise(e,"Cannot use "+n+" in class static initialization block"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),!(this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\"))){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))}},sg.parseIdent=function(t,e){var i=this.startNode();return this.type===sf.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(i,"Identifier"),t||(this.checkUnreserved(i),"await"!==i.name||this.awaitIdentPos||(this.awaitIdentPos=i.start)),i},sg.parsePrivateIdent=function(){var t=this.startNode();return this.type===sf.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t},sg.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===sf.semi||this.canInsertSemicolon()||this.type!==sf.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(sf.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},sg.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var cg=jf.prototype;cg.raise=function(t,e){var i=_f(this.input,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=this.pos,n},cg.raiseRecoverable=cg.raise,cg.curPosition=function(){if(this.options.locations)return new yf(this.curLine,this.pos-this.lineStart)};var hg=jf.prototype,lg=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};hg.enterScope=function(t){this.scopeStack.push(new lg(t))},hg.exitScope=function(){this.scopeStack.pop()},hg.treatFunctionsAsVarInScope=function(t){return t.flags&Af||!this.inModule&&t.flags&If},hg.declareName=function(t,e,i){var n=!1;if(e===Nf){var r=this.currentScope();n=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&r.flags&If&&delete this.undefinedExports[t]}else if(e===Uf){var s=this.currentScope();s.lexical.push(t)}else if(e===Rf){var a=this.currentScope();n=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var c=this.scopeStack[o];if(c.lexical.indexOf(t)>-1&&!(c.flags&Of&&c.lexical[0]===t)||!this.treatFunctionsAsVarInScope(c)&&c.functions.indexOf(t)>-1){n=!0;break}if(c.var.push(t),this.inModule&&c.flags&If&&delete this.undefinedExports[t],c.flags&Bf)break}n&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},hg.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},hg.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},hg.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&Bf)return e}},hg.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&Bf&&!(e.flags&Mf))return e}};var ug=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new bf(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},dg=jf.prototype;function pg(t,e,i,n){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=i),t}dg.startNode=function(){return new ug(this,this.start,this.startLoc)},dg.startNodeAt=function(t,e){return new ug(this,t,e)},dg.finishNode=function(t,e){return pg.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},dg.finishNodeAt=function(t,e,i,n){return pg.call(this,t,e,i,n)},dg.copyNode=function(t){var e=new ug(this,t.start,this.startLoc);for(var i in t)e[i]=t[i];return e};var fg="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",gg=fg+" Extended_Pictographic",mg=gg,yg=mg+" EBase EComp EMod EPres ExtPict",bg={9:fg,10:gg,11:mg,12:yg},_g="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",vg="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",xg=vg+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",wg=xg+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Sg=wg+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ig={9:vg,10:xg,11:wg,12:Sg},Ag={};function kg(t){var e=Ag[t]={binary:mf(bg[t]+" "+_g),nonBinary:{General_Category:mf(_g),Script:mf(Ig[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}kg(9),kg(10),kg(11),kg(12);var Tg=jf.prototype,Mg=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Ag[t.options.ecmaVersion>=12?12:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Og(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Eg(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Cg(t){return Xp(t,!0)||36===t||95===t}function Dg(t){return Jp(t,!0)||36===t||95===t||8204===t||8205===t}function Bg(t){return t>=65&&t<=90||t>=97&&t<=122}function Lg(t){return t>=0&&t<=1114111}function Pg(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function Fg(t){return Bg(t)||95===t}function Ng(t){return Fg(t)||Rg(t)}function Rg(t){return t>=48&&t<=57}function Ug(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Vg(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function jg(t){return t>=48&&t<=55}Mg.prototype.reset=function(t,e,i){var n=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9},Mg.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Mg.prototype.at=function(t,e){void 0===e&&(e=!1);var i=this.source,n=i.length;if(t>=n)return-1;var r=i.charCodeAt(t);if(!e&&!this.switchU||r<=55295||r>=57344||t+1>=n)return r;var s=i.charCodeAt(t+1);return s>=56320&&s<=57343?(r<<10)+s-56613888:r},Mg.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var i=this.source,n=i.length;if(t>=n)return n;var r,s=i.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=n||(r=i.charCodeAt(t+1))<56320||r>57343?t+1:t+2},Mg.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Mg.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Mg.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Mg.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},Tg.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,n=0;n<i.length;n++){var r=i.charAt(n);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(r,n+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Tg.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Tg.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var n=i[e];-1===t.groupNames.indexOf(n)&&t.raise("Invalid named capture referenced")}},Tg.regexp_disjunction=function(t){this.regexp_alternative(t);while(t.eat(124))this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Tg.regexp_alternative=function(t){while(t.pos<t.source.length&&this.regexp_eatTerm(t));},Tg.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Tg.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},Tg.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Tg.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Tg.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var n=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<n&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},Tg.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Tg.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Tg.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Tg.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Tg.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Tg.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Tg.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Eg(e)&&(t.lastIntValue=e,t.advance(),!0)},Tg.regexp_eatPatternCharacters=function(t){var e=t.pos,i=0;while(-1!==(i=t.current())&&!Eg(i))t.advance();return t.pos!==e},Tg.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Tg.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Tg.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Tg.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){t.lastStringValue+=Og(t.lastIntValue);while(this.regexp_eatRegExpIdentifierPart(t))t.lastStringValue+=Og(t.lastIntValue);return!0}return!1},Tg.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),Cg(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Tg.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),Dg(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Tg.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Tg.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},Tg.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Tg.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Tg.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Tg.regexp_eatZero=function(t){return 48===t.current()&&!Rg(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Tg.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Tg.regexp_eatControlLetter=function(t){var e=t.current();return!!Bg(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Tg.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var i=t.pos,n=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(n&&r>=55296&&r<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(r-55296)+(a-56320)+65536,!0}t.pos=s,t.lastIntValue=r}return!0}if(n&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&Lg(t.lastIntValue))return!0;n&&t.raise("Invalid unicode escape"),t.pos=i}return!1},Tg.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Tg.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Tg.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Pg(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Tg.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,n),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},Tg.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){ff(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},Tg.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Tg.regexp_eatUnicodePropertyName=function(t){var e=0;t.lastStringValue="";while(Fg(e=t.current()))t.lastStringValue+=Og(e),t.advance();return""!==t.lastStringValue},Tg.regexp_eatUnicodePropertyValue=function(t){var e=0;t.lastStringValue="";while(Ng(e=t.current()))t.lastStringValue+=Og(e),t.advance();return""!==t.lastStringValue},Tg.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Tg.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Tg.regexp_classRanges=function(t){while(this.regexp_eatClassAtom(t)){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},Tg.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||jg(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var n=t.current();return 93!==n&&(t.lastIntValue=n,t.advance(),!0)},Tg.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Tg.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Rg(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Tg.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Tg.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;t.lastIntValue=0;while(Rg(i=t.current()))t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},Tg.regexp_eatHexDigits=function(t){var e=t.pos,i=0;t.lastIntValue=0;while(Ug(i=t.current()))t.lastIntValue=16*t.lastIntValue+Vg(i),t.advance();return t.pos!==e},Tg.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*i+t.lastIntValue:t.lastIntValue=8*e+i}else t.lastIntValue=e;return!0}return!1},Tg.regexp_eatOctalDigit=function(t){var e=t.current();return jg(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Tg.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var n=0;n<e;++n){var r=t.current();if(!Ug(r))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+Vg(r),t.advance()}return!0};var zg=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new bf(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Wg=jf.prototype;function $g(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function Hg(t){return"function"!==typeof BigInt?null:BigInt(t.replace(/_/g,""))}function Yg(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Wg.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new zg(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Wg.getToken=function(){return this.next(),new zg(this)},"undefined"!==typeof Symbol&&(Wg[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===sf.eof,value:e}}}}),Wg.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(sf.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Wg.readToken=function(t){return Xp(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Wg.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},Wg.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations){var n;of.lastIndex=e;while((n=of.exec(this.input))&&n.index<this.pos)++this.curLine,this.lineStart=n.index+n[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,i),e,this.pos,t,this.curPosition())},Wg.skipLineComment=function(t){var e=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);while(this.pos<this.input.length&&!cf(n))n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},Wg.skipSpace=function(){t:while(this.pos<this.input.length){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&hf.test(String.fromCharCode(t))))break t;++this.pos}}},Wg.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},Wg.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(sf.ellipsis)):(++this.pos,this.finishToken(sf.dot))},Wg.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(sf.assign,2):this.finishOp(sf.slash,1)},Wg.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,n=42===t?sf.star:sf.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,n=sf.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(sf.assign,i+1):this.finishOp(n,i)},Wg.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var i=this.input.charCodeAt(this.pos+2);if(61===i)return this.finishOp(sf.assign,3)}return this.finishOp(124===t?sf.logicalOR:sf.logicalAND,2)}return 61===e?this.finishOp(sf.assign,2):this.finishOp(124===t?sf.bitwiseOR:sf.bitwiseAND,1)},Wg.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(sf.assign,2):this.finishOp(sf.bitwiseXOR,1)},Wg.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!af.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(sf.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(sf.assign,2):this.finishOp(sf.plusMin,1)},Wg.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(sf.assign,i+1):this.finishOp(sf.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(sf.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Wg.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(sf.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(sf.arrow)):this.finishOp(61===t?sf.eq:sf.prefix,1)},Wg.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(sf.questionDot,2)}if(63===e){if(t>=12){var n=this.input.charCodeAt(this.pos+2);if(61===n)return this.finishOp(sf.assign,3)}return this.finishOp(sf.coalesce,2)}}return this.finishOp(sf.question,1)},Wg.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),Xp(e,!0)||92===e))return this.finishToken(sf.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Yg(e)+"'")},Wg.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(sf.parenL);case 41:return++this.pos,this.finishToken(sf.parenR);case 59:return++this.pos,this.finishToken(sf.semi);case 44:return++this.pos,this.finishToken(sf.comma);case 91:return++this.pos,this.finishToken(sf.bracketL);case 93:return++this.pos,this.finishToken(sf.bracketR);case 123:return++this.pos,this.finishToken(sf.braceL);case 125:return++this.pos,this.finishToken(sf.braceR);case 58:return++this.pos,this.finishToken(sf.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(sf.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(sf.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Yg(t)+"'")},Wg.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},Wg.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(af.test(n)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===n)e=!0;else if("]"===n&&e)e=!1;else if("/"===n&&!e)break;t="\\"===n}++this.pos}var r=this.input.slice(i,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Mg(this));o.reset(i,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(r,a)}catch(h){}return this.finishToken(sf.regexp,{pattern:r,flags:a,value:c})},Wg.readInt=function(t,e,i){for(var n=this.options.ecmaVersion>=12&&void 0===e,r=i&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,c=0,h=null==e?1/0:e;c<h;++c,++this.pos){var l=this.input.charCodeAt(this.pos),u=void 0;if(n&&95===l)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;else{if(u=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0,u>=t)break;o=l,a=a*t+u}}return n&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},Wg.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return null==i&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(i=Hg(this.input.slice(e,this.pos)),++this.pos):Xp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(sf.num,i)},Wg.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number");var n=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&110===n){var r=Hg(this.input.slice(e,this.pos));return++this.pos,Xp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(sf.num,r)}i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1),46!==n||i||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||i||(n=this.input.charCodeAt(++this.pos),43!==n&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),Xp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=$g(this.input.slice(e,this.pos),i);return this.finishToken(sf.num,s)},Wg.readCodePoint=function(){var t,e=this.input.charCodeAt(this.pos);if(123===e){this.options.ecmaVersion<6&&this.unexpected();var i=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(i,"Code point out of bounds")}else t=this.readHexChar(4);return t},Wg.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;92===n?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):8232===n||8233===n?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(cf(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(sf.string,e)};var qg={};Wg.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==qg)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Wg.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw qg;this.raise(t,e)},Wg.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==sf.template&&this.type!==sf.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(sf.template,t)):36===i?(this.pos+=2,this.finishToken(sf.dollarBraceL)):(++this.pos,this.finishToken(sf.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(cf(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Wg.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(sf.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Wg.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yg(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var i=this.pos-1;return this.invalidStringToken(i,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return cf(e)?"":String.fromCharCode(e)}},Wg.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},Wg.readWord1=function(){this.containsEsc=!1;var t="",e=!0,i=this.pos,n=this.options.ecmaVersion>=6;while(this.pos<this.input.length){var r=this.fullCharCodeAtPos();if(Jp(r,n))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?Xp:Jp)(a,n)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=Yg(a),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},Wg.readWord=function(){var t=this.readWord1(),e=sf.name;return this.keywords.test(t)&&(e=nf[t]),this.finishToken(e,t)};var Gg="8.6.0";function Kg(t,e){return jf.parse(t,e)}jf.acorn={Parser:jf,version:Gg,defaultOptions:vf,Position:yf,SourceLocation:bf,getLineInfo:_f,Node:ug,TokenType:Qp,tokTypes:sf,keywordTypes:nf,TokContext:ig,tokContexts:ng,isIdentifierChar:Jp,isIdentifierStart:Xp,Token:zg,isNewLine:cf,lineBreak:af,lineBreakG:of,nonASCIIwhitespace:hf};var Xg={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};const Jg={ecmaVersion:11},Qg="$",Zg="d",tm="d1",em="d2",im=t=>(e,i)=>i.error(e,t+" not allowed"),nm=im("Aggregate function"),rm=im("Window function"),sm="Invalid argument",am="Invalid column reference",om=am+" (must be input to an aggregate function)",cm="Invalid function call",hm="Invalid member expression",lm="Invalid operator parameter",um="Invalid param reference",dm="Invalid variable reference",pm="Variable not accessible in operator call",fm="Unsupported variable declaration",gm="Unsupported destructuring pattern",mm="Table expressions do not support closures",ym="Use aq.escape(fn) to use a function as-is (including closures)",bm="use table.params({ name: value }) to define dynamic parameters",_m="use aq.addFunction(name, fn) to add new op functions",vm=`\nNote: ${mm}. ${ym}, or ${bm}.`,xm=`\nNote: ${mm}. ${ym}, or ${_m}.`,wm=`The ${Le} method is not valid in multi-table expressions.`;function Sm(t,e){const i=Im(e);let n=t.root=i;return t.spec=e,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,Pp(n)?(Om(n,t),n=n.body):t.join?(t.scope.add(t.tuple1=tm),t.scope.add(t.tuple2=em),t.scope.add(t.$param=Qg)):(t.scope.add(t.tuple=Zg),t.scope.add(t.$param=Qg)),Sp(n,t,km),t.root}function Im(t){try{const e=t.field?Am(t):c(t)?At(t):t;return Kg(`expr=(${e})`,Jg).body[0].expression.right}catch(e){p("Expression parse error: "+(t+""),e)}}function Am(t){const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`}const km={FunctionDeclaration:im("Function definitions"),ForStatement:im("For loops"),ForOfStatement:im("For-of loops"),ForInStatement:im("For-in loops"),WhileStatement:im("While loops"),DoWhileStatement:im("Do-while loops"),AwaitExpression:im("Await expressions"),ArrowFunctionExpression:im("Function definitions"),AssignmentExpression:im("Assignments"),FunctionExpression:im("Function definitions"),NewExpression:im('Use of "new"'),UpdateExpression:im("Update expressions"),VariableDeclarator(t,e){zm(t.id,e)},Identifier(t,e,i){Pm(t,e,i)&&!e.scope.has(t.name)&&e.error(t,dm,vm)},CallExpression(t,e){const i=Dm(t.callee),n=ke(i)||Te(i);if(n){if((e.join||!1===e.aggregate)&&Se(n)&&nm(t,e),(e.join||!1===e.window)&&Ie(n)&&rm(t,e),e.$op=1,e.ast)jm(t,i,e),t.arguments.forEach(t=>Sp(t,e,Mm));else{const r=e.op(Cm(e,n,i,t.arguments));Object.assign(t,{type:Zt,name:r.id})}return e.$op=0,!1}Ae(i)?jm(t,i,e):e.error(t,cm,xm)},MemberExpression(t,e,i){const{object:n,property:r}=t;if(!Lp(zt,n))return;const{name:s}=n;if(Bm(t)&&Lp(zt,r)&&O(Xg,r.name))return void Vm(t,r.name);const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;return a>=0?Tm(t,a,e,Fm,i):s===e.$param?Tm(t,a,e,Rm):void(e.paramsRef.has(s)?Um(t,e.paramsRef.get(s)):e.columnRef.has(s)?Nm(n,s,e,t):O(e.params,s)&&Um(n,s))}};function Tm(t,e,i,n,r){const{property:s,computed:a}=t;let o;if(a)if(Lp(Wt,s))o=s.value;else try{o=i.param(s)}catch(c){i.error(t,hm)}else o=s.name;return n(t,o,e,i,r),!1}const Mm={...km,VariableDeclarator:im("Variable declaration in operator call"),Identifier(t,e,i){Pm(t,e,i)&&e.error(t,pm)},CallExpression(t,e){const i=Dm(t.callee);Ae(i)?jm(t,i,e):e.error(t,cm,xm)}};function Om(t,e){t.generator&&im("Generator functions")(t,e),t.async&&im("Async functions")(t,e);const{params:i}=t,n=i.length,r=t=>(i,n)=>e.columnRef.set(i,[n,t]),s=(t,i)=>e.paramsRef.set(t,i);n&&(e.join?(Em(e,i[0],"tuple1",r(1)),n>1&&Em(e,i[1],"tuple2",r(2)),n>2&&Em(e,i[2],"$param",s)):(Em(e,i[0],"tuple",r(0)),n>1&&Em(e,i[1],"$param",s))),e.root=t.body}function Em(t,e,i,n){Lp(zt,e)?(t.scope.add(e.name),t[i]=e.name):Lp(Yt,e)&&e.properties.forEach(e=>{const i=Lp(zt,e.key)?e.key.name:Lp(Wt,e.key)?e.key.value:t.error(e,sm);Lp(zt,e.value)||t.error(e.value,gm),n(e.value.name,i)})}function Cm(t,e,i,n){const r=[],s=[],a=e.param[0]||0,o=a+(e.param[1]||0);return n.forEach((e,i)=>{i<a?(Sp(e,t,Mm),r.push(t.field(e))):i<o?(Sp(e,t,Mm),s.push(t.param(e))):t.error(e,lm)}),{name:i,fields:r,params:s,...t.spec.window||{}}}function Dm(t){return Lp(zt,t)?t.name:Lp($t,t)?Bm(t)?Lm(t.property.name):t.property.name:null}function Bm(t){return Lp(zt,t.object)&&"Math"===t.object.name}function Lm(t){return"max"===t?"greatest":"min"===t?"least":t}function Pm(t,e,i){const{name:n}=t;if(Lp($t,i)&&i.property===t);else if(Lp(qt,i)&&i.key===t);else if(e.paramsRef.has(n))Um(t,e.paramsRef.get(n));else if(e.columnRef.has(n))Nm(t,n,e,i);else if(O(e.params,n))Um(t,n);else{if(!O(Xg,n))return!0;Vm(t,n)}}function Fm(t,e,i,n,r){const s=0===i?n.table:i>0?n.join[i-1]:null,a=s&&s.column(e);s&&!a&&n.error(t,am),n.aggronly&&!n.$op&&n.error(t,om),Ce(t,e,i,a,r)}function Nm(t,e,i,n){const[r,s]=i.columnRef.get(e);Fm(t,r,s,i,n)}function Rm(t,e,i,n){n.params&&!O(n.params,e)&&n.error(t,um),Um(t,e)}function Um(t,e){t.type=Qt,t.name=e}function Vm(t,e){t.type=Kt,t.name=e,t.raw=Xg[e]}function jm(t,e,i){if(e===Le){const e=i.table;e||i.error(t,wm),Pe(t,t.arguments.length?t.arguments.map(t=>{const n=i.param(t),r=f(n)?e.columnName(n):n;return e.column(r)||i.error(t,am),r}):e.columnNames())}else t.callee={type:Jt,name:e}}function zm(t,e){Lp(zt,t)?e.scope.add(t.name):Lp(Ut,t)?t.elements.forEach(t=>zm(t,e)):Lp(Yt,t)?t.properties.forEach(t=>zm(t.value,e)):e.error(t.id,fm)}const Wm={[Gt]:1,[Zt]:1};var $m=function(t,e={}){const i=e.generate||ce,n=e.compiler||Oe,r=Ym(e),s={},a={},o=[],c=[];let h=0,l=-1;const u=e.join?n.join:1==e.index?n.expr2:n.expr,d={op(t){const e=Hm(t);return a[e]||(t.id=++l,a[e]=t)},field(t){const e=i(t);return s[e]||(s[e]=++h)},param(t){return Lp(Wt,t)?t.value:n.param(i(t),r)},value(t,n){o.push(t);const s=n.escape||(e.ast?Bp(n):u(i(n),r));c.push(s),Wm[n.type]&&s!==n&&x(s)&&(s.field=n.name)},error(t,e,i=""){const n=t.start-6,r=t.end-6,s=String(d.spec).slice(n,r);p(`${e}: "${s}"${i}`)}};Object.assign(d,e,{params:r});for(const[p,m]of Be(t))d.value(p+"",m.escape?Rp(d,m,r):Sm(d,m));if(e.ast)return{names:o,exprs:c};const f=[];for(const p in s)f[s[p]]=n.expr(p,r);const g=Object.values(a);return g.forEach(t=>t.fields=t.fields.map(t=>f[t])),{names:o,exprs:c,ops:g}};function Hm(t){let e=`${t.name}(${t.fields.concat(t.params).join(",")})`;if(t.frame){const i=t.frame.map(t=>Number.isFinite(t)?Math.abs(t):-1);e+=`[${i},${!!t.peers}]`}return e}function Ym(t){return(t.table?qm(t.table):t.join?{...qm(t.join[1]),...qm(t.join[0])}:{})||{}}function qm(t){return t&&g(t.params)?t.params():{}}const Gm="Expr",Km="ExprList",Xm="ExprNumber",Jm="ExprObject",Qm="JoinKeys",Zm="JoinValues",ty="Options",ey="OrderKeys",iy="SelectionList",ny="TableRef",ry="TableRefList",sy="Descending",ay="Query",oy="Selection",cy="Verb",hy="Window";var ly=function(t,e){return t&&t.expr?new uy({...t,...e}):new uy(e,t)};class uy{constructor(t,e){this.expr=e,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...g(this.expr)?{func:!0}:{}}}}var dy=function(t){return ly(t,{desc:!0})},py=function(t,e,i=0){const n=i?{field:!0,table:i}:{field:!0};return ly(t,e?{expr:e,...n}:n)},fy=function(t,e,i){return ly(t,{window:{frame:e||[-1/0,0],peers:!!i}})};function gy(t){const e=t=>t;return e.toString=()=>t,e}function my(t,e){return e=e&&g(e.query)?e.query():e,e&&g(e.evaluate)?e.evaluate(null,t):t(e)}function yy(t){return x(t)&&(c(t.all)||c(t.matches)||c(t.not)||c(t.range))}function by(t){return t&&g(t.toObject)?t.toObject():g(t)?{expr:String(t),func:!0}:c(t)?t.map(by):x(t)?np(t,t=>by(t)):t}function _y(t){return c(t)?t.map(_y):x(t)?c(t.verbs)?Yy.from(t):c(t.all)?gp():c(t.range)?yp(...t.range):c(t.match)?bp(RegExp(...t.match)):c(t.not)?mp(t.not.map(by)):vy(t):t}function vy(t){let e=t,i=t.expr;if(null!=i){if(!0===t.field?e=i=py(i):!0===t.func&&(e=i=gy(i)),x(t.window)){const{frame:n,peers:r}=t.window;e=i=fy(i,n,r)}!0===t.desc&&(e=dy(i))}return t===e?np(t,t=>_y(t)):e}function xy(t){return c(t)?t.map(wy):t}function wy(t){const e=[];return h(t).forEach(t=>{f(t)?e.push(t):S(t)?e.push(py(t,null)):x(t)&&t.expr||g(t)?e.push(t):p("Invalid key value: "+(t+""))}),e}function Sy(t){return c(t)?t.map(Iy):t}function Iy(t,e){return e<2?h(t):t}function Ay(t){const e=[];return t.forEach(t=>{const i=null!=t.expr?t.expr:t;if(x(i)&&!g(i))for(const n in i)e.push(i[n]);else t=f(i)?i:S(i)?py(t):g(i)?t:p("Invalid orderby field: "+(t+"")),e.push(t)}),e}const ky={[Gm]:Ny,[Km]:Ry,[Xm]:Uy,[Jm]:By,[Qm]:Vy,[Zm]:jy,[ey]:Ry,[iy]:Py};var Ty=function(t,e,i){return e===ny?zy(t):e===ry?t.map(zy):My(by(t),e,i)};function My(t,e,i){return e===ty?t?Oy(t,i):t:ky[e](t)}function Oy(t,e={}){const i={};for(const n in t){const r=t[n];i[n]=e[n]?My(r,e[n]):r}return i}function Ey(t,e){return $m({expr:t},{...e,ast:!0}).exprs[0]}function Cy(t){return{type:Gt,name:t}}function Dy(t){return{type:Gt,index:t}}function By(t,e){if(S(t))return Ey(t,e);if(t.expr){let i;if(!0===t.field?i=Cy(t.expr):!0===t.func&&(i=By(t.expr,e)),i)return t.desc&&(i={type:sy,expr:i}),t.window&&(i={type:hy,expr:i,...t.window}),i}return Object.keys(t).map(i=>({...By(t[i],e),as:i}))}function Ly(t){const e=oy;return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:Ry(t.not)}:t.range?{type:e,operator:"range",arguments:Ry(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:p("Invalid input")}function Py(t){return h(t).map(Fy).flat()}function Fy(t){return yy(t)?Ly(t):f(t)?Dy(t):S(t)?Cy(t):x(t)?Object.keys(t).map(e=>({type:Gt,name:e,as:t[e]})):p("Invalid input")}function Ny(t){return yy(t)?Ly(t):f(t)?Dy(t):S(t)?Cy(t):x(t)?By(t):p("Invalid input")}function Ry(t){return h(t).map(Ny).flat()}function Uy(t){return f(t)?t:By(t)}function Vy(t){return c(t)?t.map(Ry):By(t,{join:!0})}function jy(t){return c(t)?t.map((t,e)=>e<2?Ry(t):By(t,{join:!0})):By(t,{join:!0})}function zy(t){return t&&g(t.toAST)?t.toAST():t}class Wy{constructor(t,e=[],i=[]){this.verb=t,this.schema=e,e.forEach((t,e)=>{const n=t.type,r=i[e],s=n===Qm?xy(r):n===Zm?Sy(r):n===ey?Ay(r):r;this[t.name]=void 0!==s?s:t.default})}static from(t){const e=Hy[t.verb],i=(e.schema||[]).map(({name:e})=>_y(t[e]));return e(...i)}evaluate(t,e){const i=this.schema.map(({name:t,type:i})=>{const n=this[t];return i===ny?my(e,n):i===ry?n.map(t=>my(e,t)):n});return t[this.verb](...i)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:e})=>{t[e]=by(this[e])}),t}toAST(){const t={type:cy,verb:this.verb};return this.schema.forEach(({name:e,type:i,props:n})=>{t[e]=Ty(this[e],i,n)}),t}}function $y(t,e){return Object.assign((...i)=>new Wy(t,e,i),{schema:e})}const Hy={count:$y("count",[{name:"options",type:ty}]),derive:$y("derive",[{name:"values",type:Jm},{name:"options",type:ty,props:{before:iy,after:iy}}]),filter:$y("filter",[{name:"criteria",type:Jm}]),groupby:$y("groupby",[{name:"keys",type:Km}]),orderby:$y("orderby",[{name:"keys",type:ey}]),relocate:$y("relocate",[{name:"columns",type:iy},{name:"options",type:ty,props:{before:iy,after:iy}}]),rename:$y("rename",[{name:"columns",type:iy}]),rollup:$y("rollup",[{name:"values",type:Jm}]),sample:$y("sample",[{name:"size",type:Xm},{name:"options",type:ty,props:{weight:Gm}}]),select:$y("select",[{name:"columns",type:iy}]),ungroup:$y("ungroup"),unorder:$y("unorder"),reify:$y("reify"),dedupe:$y("dedupe",[{name:"keys",type:Km,default:[]}]),impute:$y("impute",[{name:"values",type:Jm},{name:"options",type:ty,props:{expand:Km}}]),fold:$y("fold",[{name:"values",type:Km},{name:"options",type:ty}]),pivot:$y("pivot",[{name:"keys",type:Km},{name:"values",type:Km},{name:"options",type:ty}]),spread:$y("spread",[{name:"values",type:Km},{name:"options",type:ty}]),unroll:$y("unroll",[{name:"values",type:Km},{name:"options",type:ty,props:{drop:Km}}]),lookup:$y("lookup",[{name:"table",type:ny},{name:"on",type:Qm},{name:"values",type:Km}]),join:$y("join",[{name:"table",type:ny},{name:"on",type:Qm},{name:"values",type:Zm},{name:"options",type:ty}]),cross:$y("cross",[{name:"table",type:ny},{name:"values",type:Zm},{name:"options",type:ty}]),semijoin:$y("semijoin",[{name:"table",type:ny},{name:"on",type:Qm}]),antijoin:$y("antijoin",[{name:"table",type:ny},{name:"on",type:Qm}]),concat:$y("concat",[{name:"tables",type:ry}]),union:$y("union",[{name:"tables",type:ry}]),intersect:$y("intersect",[{name:"tables",type:ry}]),except:$y("except",[{name:"tables",type:ry}])};class Yy extends d{constructor(t,e,i){super(e),this._verbs=t||[],this._table=i}static from({verbs:t,table:e,params:i}){return new Yy(t.map(Wy.from),i,e)}get[Symbol.toStringTag](){if(!this._verbs)return"Object";const t=this._verbs.length;return`Query: ${t} verbs`+(this._table?` on '${this._table}'`:"")}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,e){t=t||e(this._table);for(const i of this._verbs)t=i.evaluate(t.params(this._params),e);return t}toObject(){return qy(this,"toObject")}toJSON(){return this.toObject()}toAST(){return qy(this,"toAST",{type:ay})}}function qy(t,e,i){return{...i,verbs:t._verbs.map(t=>t[e]()),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function Gy(t,e){return new Yy(t._verbs.concat(e),t._params,t._table)}for(const rv in Hy){const t=Hy[rv];Yy.prototype["__"+rv]=function(e,...i){return Gy(e,t(...i))}}i("0f36");var Ky=function(t,e,...i){const n=["_","$"],r=n.slice(0,i.length);return r.push('"use strict"; const '+i.map((t,e)=>t.map((t,i)=>`${n[e]}${i} = ${n[e]}[${i}]`).join(", ")).join(", ")+`; return (${t}) => ${e};`),Function(...r)(...i)};const Xy=2147483648,Jy=4294967295;class Qy{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let e=0;for(let i=0;i<t;++i)for(let t=this._bits[i];t;++e)t&=t-1;return e}get(t){return this._bits[t>>5]&Xy>>>t}set(t){this._bits[t>>5]|=Xy>>>t}clear(t){this._bits[t>>5]&=~(Xy>>>t)}scan(t){for(let e=this.next(0);e>=0;e=this.next(e+1))t(e)}next(t){const e=this._bits,i=e.length;let n=t>>5,r=e[n]&Jy>>>t;for(;n<i;r=e[++n])if(0!==r)return(n<<5)+Math.clz32(r);return-1}nth(t){let e=this.next(0);while(t--&&e>=0)e=this.next(e+1);return e}not(){const t=this._bits,e=t.length;for(let n=0;n<e;++n)t[n]=~t[n];const i=this._size%32;return i&&(t[e-1]&=Xy>>i-1),this}and(t){if(t){const e=this._bits,i=t._bits,n=e.length;for(let t=0;t<n;++t)e[t]&=i[t]}return this}or(t){if(t){const e=this._bits,i=t._bits,n=e.length;for(let t=0;t<n;++t)e[t]|=i[t]}return this}}var Zy=function(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").ungroup().reify()},tb=function(t,e){const i=E();return e.forEach((e,n)=>{const r=S(e)?e:n;if(r){const e=t.column(n)||p("Unrecognized column: "+n);i.add(r,e)}}),t.create(i)},eb=function(t,e,{before:i,after:n}={}){const r=null!=i,s=null!=n;r||s||p("relocate requires a before or after option."),r&&s&&p("relocate accepts only one of the before or after options."),e=dp(t,e);const a=[...dp(t,r?i:n).keys()],o=r?a[0]:a.pop(),c=new Map;return t.columnNames().forEach(t=>{const i=!e.has(t);if(t===o){s&&i&&c.set(t,t);for(const[t,i]of e)c.set(t,i);if(s)return}i&&c.set(t,t)}),tb(t,c)},ib=function(t,e=(t=>t),i=""){const n=t.length;if(!n)return"";let r=e(t[0],0);for(let s=1;s<n;++s)r+=i+e(t[s],s);return r},nb=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},rb=function(t,e=0,i=t.length){let n=i?t[e++]:D;for(let r=e;r<i;++r)n>t[r]&&(n=t[r]);return n},sb=function(t,e=0,i=t.length){let n=i?t[e++]:D;for(let r=e;r<i;++r)n<t[r]&&(n=t[r]);return n},ab=function(t){return It(t)?t:+t};function ob(t,e){const i=t.length;if(!i)return D;if((e=+e)<=0||i<2)return ab(t[0]);if(e>=1)return ab(t[i-1]);const n=(i-1)*e,r=Math.floor(n),s=ab(t[r]);return It(s)?s:s+(ab(t[r+1])-s)*(n-r)}class cb{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:rb(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:sb(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(nb)),ob(this._sorted,t)}}const hb=(t,e,i)=>Ky(e,"{"+ib(t,(t,n)=>`_${n}.${i}(${e});`)+"}",t);var lb=function(t,e){const{ops:i,output:n}=ub(t,e),r=t[0].fields,s=r.length,a=0===s?db:1===s?pb:2===s?fb:p("Unsupported field count: "+s);return new a(r,i,n,e)};function ub(t,e){const i={},n=[];function r(t,s=[]){const a=t+":"+s;if(i[a])return i[a];const o=ke(t),c=o.create(...s);return e<0&&o.stream&&o.stream.forEach(t=>r(t,[])),o.req&&o.req.forEach(t=>r(t,[])),i[a]=c,n.push(c),c}const s=t.map(t=>{const e=r(t.name,t.params);return e.output=t.id,e});return{ops:n,output:s}}class db extends wp{constructor(t,e,i,n){super(i),this._op=e,this._fields=t,this._stream=!!n}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(e=>e.init(t)),t.values&&(t.list=new cb),t}write(t,e,i){const n=this._outputs,r=n.length;for(let s=0;s<r;++s)e[n[s].output][i]=n[s].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class pb extends db{constructor(t,e,i,n){super(t,e,i,n);const r=["state","v1","v2"];this._add=hb(e,r,"add"),this._rem=hb(e,r,"rem")}add(t,e,i){const n=this._fields[0](e,i);++t.count,F(n)&&(++t.valid,t.list&&t.list.add(n),this._add(t,n))}rem(t,e,i){const n=this._fields[0](e,i);--t.count,F(n)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,n))}}class fb extends db{constructor(t,e,i,n){super(t,e,i,n);const r=["state","v1","v2"];this._add=hb(e,r,"add"),this._rem=hb(e,r,"rem")}add(t,e,i){const n=this._fields[0](e,i),r=this._fields[1](e,i);++t.count,F(n)&&F(r)&&(++t.valid,t.list&&t.list.add([n,r]),this._add(t,n,r))}rem(t,e,i){const n=this._fields[0](e,i),r=this._fields[1](e,i);--t.count,F(n)&&F(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,n,r))}}function gb(t,e,i){if(e.length){const n=t.data(),{keys:r}=t.groups()||{},s=mb(t,e),a=r?(t,e)=>s[t][r[e]]:t=>s[t][0];i=i.map(t=>e=>t(e,n,a))}return i}function mb(t,e,i){if(!e.length)return i;const n=yb(e),r=t.groups(),s=r?r.size:1;return i=i||m(e.length,()=>Array(s)),s>1?n.forEach(e=>{const n=_b(t,e,r);for(let t=0;t<s;++t)e.write(n[t],i,t)}):n.forEach(e=>{const n=bb(t,e);e.write(n,i,0)}),i}function yb(t,e){const i=[],n={};for(const r of t){const t=r.fields.map(t=>t+"").join(",");(n[t]||(n[t]=[])).push(r)}for(const r in n)i.push(lb(n[r],e));return i}function bb(t,e){const i=e.init(),n=t.totalRows(),r=t.data(),s=t.mask();if(t.isOrdered()){const s=t.indices();for(let t=0;t<n;++t)e.add(i,s[t],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))e.add(i,a,r);else for(let a=0;a<n;++a)e.add(i,a,r);return i}function _b(t,e,i){const{keys:n,size:r}=i,s=m(r,()=>e.init()),a=t.data();if(t.isOrdered()){const i=t.indices(),r=i.length;for(let t=0;t<r;++t){const r=i[t];e.add(s[n[r]],r,a)}}else if(t.isFiltered()){const i=t.mask();for(let t=i.next(0);t>=0;t=i.next(t+1))e.add(s[n[t]],t,a)}else{const i=t.totalRows();for(let t=0;t<i;++t)e.add(s[n[t]],t,a)}return s}function vb(t,e){const{get:i,names:n,rows:r,size:s}=e,a=n.length;for(let o=0;o<a;++o){const e=t.add(n[o],Array(s)),a=i[o];for(let t=0;t<s;++t)e[t]=a(r[t])}}var xb=function(t){return{left(e,i,n,r){null==n&&(n=0),null==r&&(r=e.length);while(n<r){const s=n+r>>>1;t(e[s],i)<0?n=s+1:r=s}return n},right(e,i,n,r){null==n&&(n=0),null==r&&(r=e.length);while(n<r){const s=n+r>>>1;t(e[s],i)>0?r=s:n=s+1}return n}}};const wb=xb(nb);var Sb=function(t,e,i,n,r){let s,a,o,c,h;const l=t=>a[t-1]===a[t],u=n.length,d=r.length,p=n.length?Ky(["w","r","k"],"{"+ib(n,(t,e)=>`r[_${e}.id][k]=_${e}.value(w,_${e}.get);`)+"}",n):()=>{},f={i0:0,i1:0,index:0,size:0,peer:l,init(t,e,i,l){f.index=f.i0=f.i1=0,f.size=e.length,s=t,a=e,c=i,h=l,o=r?r.map(t=>t.init()):null;for(let r=0;r<u;++r)n[r].init();return f},value(e,i){return i(s[e],t)},step(n){const[u,g]=e,m=f.size,y=f.i0,b=f.i1;f.i0=null!=u?Math.max(0,n-Math.abs(u)):0,f.i1=null!=g?Math.min(m,n+Math.abs(g)+1):m,f.index=n,i&&(f.i0>0&&l(f.i0)&&(f.i0=wb.left(a,a[f.i0])),f.i1<m&&l(f.i1)&&(f.i1=wb.right(a,a[f.i1-1])));for(let e=0;e<d;++e){const i=r[e],n=o[e];for(let e=y;e<f.i0;++e)i.rem(n,s[e],t);for(let e=b;e<f.i1;++e)i.add(n,s[e],t);i.write(n,c,h)}return p(f,c,h),c}};return f};const Ib=t=>(t.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),Ab=t=>!!t.peers;function kb(t){const{id:e,name:i,fields:n=[],params:r=[]}=t,s=Te(i).create(...r);return n.length&&(s.get=n[0]),s.id=e,s}function Tb(t,e,i,n={},r){const s=t.data(),a=Mb(r,s),o=a.length,c=Ky(["r","d","op"],"{"+ib(e,(t,e)=>`_${e}[r] = $${e}(r, d, op);`)+"}",e,i);t.partitions().forEach((e,i)=>{const r=e.length,h=Ob(t,e);for(let t=0;t<o;++t)a[t].init(e,h,n,i);const l=t=>n[t][i];for(let t=0;t<r;++t){for(let e=0;e<o;++e)a[e].step(t);c(e[t],s,l)}})}function Mb(t,e){const i={};return t.forEach(t=>{const e=Ib(t),n=Ab(t),r=`${e},${n}`,{aggOps:s,winOps:a}=i[r]||(i[r]={frame:e,peers:n,aggOps:[],winOps:[]});Se(t.name)?s.push(t):a.push(kb(t))}),Object.values(i).map(t=>Sb(e,t.frame,t.peers,t.winOps,yb(t.aggOps,null!=t.frame[0]?-1:1)))}function Ob(t,e){if(t.isOrdered()){const i=t.comparator(),n=t.data(),r=e.length,s=new Uint32Array(r);for(let t=1,a=0;t<r;++t)s[t]=i(e[t-1],e[t],n)?++a:a;return s}return e}function Eb(t){return Ie(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}var Cb=function(t,{names:e,exprs:i,ops:n},r={}){const s=t.totalRows(),a=E(r.drop?null:t),o=e.map(t=>a.add(t,Array(s))),[c,h]=Db(n),l=t.isGrouped()?t.groups().size:1,u=mb(t,c,m(n.length,()=>Array(l)));return h.length?Tb(t,o,i,u,h):Bb(t,o,i,u),t.create(a)};function Db(t){const e=[],i=[],n=t.length;for(let r=0;r<n;++r){const n=t[r];n.id=r,(Eb(n)?i:e).push(n)}return[e,i]}function Bb(t,e,i,n){const r=t.mask(),s=t.data(),{keys:a}=t.groups()||{},o=a?(t,e)=>n[t][a[e]]:t=>n[t][0],c=e.length;for(let h=0;h<c;++h){const n=i[h],a=e[h];if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))a[t]=n(t,s,o);else{const e=t.totalRows();for(let t=0;t<e;++t)a[t]=n(t,s,o)}}}var Lb=function(t,e,i={}){const n=Cb(t,$m(e,{table:t}),i);return i.drop||null==i.before&&null==i.after?n:eb(n,Object.keys(e).filter(e=>!t.column(e)),i)},Pb=function(t,e){if(0===e.length)return t;const i=t.columnNames();return e.reduce((t,e)=>t.antijoin(e.select(i)),t).dedupe()},Fb=function(t,e){const i=t.totalRows(),n=t.mask(),r=t.data(),s=new Qy(i);if(n)for(let a=n.next(0);a>=0;a=n.next(a+1))e(a,r)&&s.set(a);else for(let a=0;a<i;++a)e(a,r)&&s.set(a);return t.create({filter:s})},Nb=function(t,e){const i=$m({p:e},{table:t});let n=i.exprs[0];if(i.ops.length){const{data:e}=Cb(t,i,{drop:!0}).column("p");n=t=>e[t]}return Fb(t,n)},Rb=function(t,{names:e=[],exprs:i=[],ops:n=[]},r={}){if(!e.length)return t;const s=r.limit>0?+r.limit:1/0,a=r.index?!0===r.index?"index":r.index+"":null,o=new Set(r.drop),c=gb(t,n,i),l=E(),u=new Set(e),d=[],p=[],f=[];t.columnNames().forEach(e=>{if(!o.has(e)){const i=l.add(e,[]);u.has(e)||(d.push(t.column(e)),p.push(i))}}),e.forEach(t=>{o.has(t)||(l.has(t)||l.add(t,[]),f.push(l.data[t]))});const g=a?l.add(a,[]):null;let m=0;const y=d.length,b=f.length,_=(t,e)=>{for(let i=0;i<y;++i)p[i].length=m+e,p[i].fill(d[i].get(t),m,m+e)},v=g?(t,e)=>{for(let i=0;i<e;++i)g[t+i]=i}:()=>{};if(1===b){const e=c[0],i=f[0];t.scan((t,n)=>{const r=h(e(t,n)),a=Math.min(r.length,s);_(t,a);for(let e=0;e<a;++e)i[m+e]=r[e];v(m,a),m+=a})}else t.scan((t,e)=>{let i=0;const n=c.map(n=>{const r=h(n(t,e));return i=Math.min(Math.max(i,r.length),s),r});_(t,i);for(let r=0;r<b;++r){const t=f[r],e=n[r];for(let n=0;n<i;++n)t[m+n]=e[n]}v(m,i),m+=i});return t.create(l.new())},Ub=function(t,{names:e=[],exprs:i=[],ops:n=[]},r={}){if(0===e.length)return t;const[s="key",a="value"]=r.as||[],o=gb(t,n,i);return Rb(t,{names:[s,a],exprs:[()=>e,(t,e)=>o.map(i=>i(t,e))]},{...r,drop:e})},Vb=function(t,e,i,n={window:!1}){const r=new Map,s=i=>{i=f(i)?e.columnName(i):i,S(i)?r.set(i,py(i)):g(i)?dp(e,i).forEach(s):x(i)?lp(r,i):p(`Invalid ${t} value: ${i+""}`)};return h(i).forEach(s),n.preparse&&n.preparse(r),$m(r,{table:e,...n})},jb=function(t,e,i){return Ub(t,Vb("fold",t,e),i)},zb=function(t,e,i,n){const r=i&&i.length;return Wb(r?$b(t,i,n):t,e,r)};function Wb(t,{names:e,exprs:i,ops:n},r){const s=gb(t,n,i),a=r?null:E(t),o=t.totalRows();return e.forEach((e,i)=>{const n=t.column(e),c=r?n.data:a.add(e,Array(o)),h=s[i];t.scan(t=>{const e=n.get(t);c[t]=F(e)?e:h(t)})}),r?t:t.create(a)}function $b(t,e,i){const n=t.groups(),r=t.data(),s=(n?n.names:[]).concat(e),a=(n?n.get:[]).concat(e.map(e=>t.getter(e))),o=new Set,c=de(a);t.scan((t,e)=>o.add(c(t,e)));const h=t.columnNames(),l=E(),u=h.map(t=>l.add(t,[]));h.forEach((e,i)=>{const n=r[e],s=u[i];t.scan(t=>s.push(n.get(t)))});const d=de(a.map((t,e)=>t=>t[e])),p=Ky("v","{"+u.map((t,e)=>`_${e}.push(v[$${e}]);`).join("")+"}",u,h.map(t=>s.indexOf(t)));if(n){let t=n.keys.length;const e=i.reduce((t,e)=>t*e.length,n.size),r=new Uint32Array(e+(t-o.size));r.set(n.keys),Hb(n,i,(e,i)=>{o.has(d(e))||(p(e),r[t++]=i[0])}),l.groupby({...n,keys:r})}else Hb(n,i,t=>{o.has(d(t))||p(t)});return t.create(l.new())}function Hb(t,e,i){const n=t?t.get.length:0,r=t?1:0,s=r+e.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(t){const{get:e,rows:i,size:r}=t;a[0]=r,c.push((t,r)=>{const s=i[r];for(let i=0;i<n;++i)t[i]=e[i](s)})}e.forEach((t,e)=>{const i=e+n;a[e+r]=t.length,c.push((e,n)=>e[i]=t[n])});const h=Array(n+e.length);for(let l=0;l<s;++l)c[l](h,0);i(h,o);for(let l=s-1;l>=0;){const t=++o[l];t<a[l]?(c[l](h,t),i(h,o),l=s-1):(o[l]=0,c[l](h,0),--l)}}var Yb=function(t,{names:e,exprs:i,ops:n}){const r=E(),s=t.groups();return s&&vb(r,s),qb(e,i,s,mb(t,n),r),t.create(r.new())};function qb(t,e,i,n=[],r){if(!e.length)return;const s=i?i.size:1,a=(t,e)=>n[t][e],o=t.length;for(let c=0;c<o;++c){const i=e[c];if(null!=i.field)r.add(t[c],n[i.field]);else if(s>1){const e=r.add(t[c],Array(s));for(let t=0;t<s;++t)e[t]=i(t,null,a)}else r.add(t[c],[i(0,null,a)])}}var Gb=function(t,e,i={}){if(e=$m(e,{table:t}),e.names.forEach(e=>t.column(e)?0:p("Invalid impute column "+At(e))),i.expand){const n={preparse:Kb,aggronly:!0},r=Vb("impute",t,i.expand,n),s=Yb(t.ungroup(),r);return zb(t,e,r.names,r.names.map(t=>s.get(t,0)))}return zb(t,e)};function Kb(t){t.forEach((e,i)=>e.field?t.set(i,Ct(e+"")):0)}var Xb=function(t,e){const i=t.columnNames();return e.length?e.reduce((t,e)=>t.semijoin(e.select(i)),t).dedupe():t.reify([])};function Jb(t,e){const i=new Map;return t.scan((t,n)=>{const r=e(t,n);null!=r&&r===r&&i.set(r,t)}),i}function Qb(t,e,i){const n=new Map,r=t.length;for(let s=0;s<r;++s){const r=t[s],a=i(r,e);null!=a&&a===a&&(n.has(a)?n.get(a).push(s):n.set(a,[s]))}return n}function Zb(t,e){const i=["i","a","j","b"];return Ky(i,"{"+ib(t,(t,e)=>`_${e}.push($${e}(${i}));`)+"}",t,e)}var t_=function(t,e,i,{names:n,exprs:r},s={}){const a=t.data(),o=t.indices(!1),h=o.length,l=new Int32Array(h),u=e.data(),d=e.indices(!1),p=d.length,f=new Int32Array(p),g=n.length,m=E(),y=Array(g),b=Array(g);for(let c=0;c<n.length;++c)y[c]=m.add(n[c],[]),b[c]=r[c];const _=Zb(y,b),v=c(i)?i_:e_;if(v(_,i,a,u,o,d,l,f,h,p),s.left)for(let c=0;c<h;++c)l[c]||_(o[c],a,-1,u);if(s.right)for(let c=0;c<p;++c)f[c]||_(-1,a,d[c],u);return t.create(m.new())};function e_(t,e,i,n,r,s,a,o,c,h){for(let l=0;l<c;++l){const c=r[l];for(let r=0;r<h;++r){const h=s[r];e(c,i,h,n)&&(t(c,i,h,n),a[l]=1,o[r]=1)}}}function i_(t,[e,i],n,r,s,a,o,c,h,l){let u,d,p,f,g,m,y,b,_=t;h>=l?(u=n,d=e,p=o,f=s,g=r,m=i,y=c,b=a):(u=r,d=i,p=c,f=a,g=n,m=e,y=o,b=s,_=(e,i,n,r)=>t(n,r,e,i));const v=Qb(b,g,m),x=f.length;for(let w=0;w<x;++w){const t=f[w],e=v.get(d(t,u));if(e){const i=e.length;for(let n=0;n<i;++n){const i=e[n];_(t,u,b[i],g),y[i]=1}p[w]=1}}}var n_=function(t,e,i){const n=new Map;h(i).forEach((i,r)=>{i=f(i)?e.columnName(i):i,S(i)?n.set(r,py(i)):g(i)||x(i)&&i.expr?n.set(r,i):p(`Invalid ${t} key value: ${i+""}`)});const r=$m(n,{table:e,aggregate:!1,window:!1});return de(r.exprs,!0)};function r_(t,e){const i=new Set(e);return t.filter(t=>i.has(t))}function s_(t,e,i){if(i)S(i)?i=[i,i]:c(i)&&1===i.length&&(i=[i[0],i[0]]);else{const n=r_(t.columnNames(),e.columnNames());n.length||p("Natural join requires shared column names."),i=[n,n]}return i}function a_(t,e,i,n){return i.length!==n.length&&p("Mismatched number of join keys"),[n_("join",t,i),n_("join",e,n)]}const o_={aggregate:!1,window:!1},c_={...o_,index:1};var h_=function(t,e,i,n,r={}){i=s_(t,e,i);const s={join:[t,e]};let a;if(c(i)){const[s,o]=i.map(h);a=a_(t,e,s,o),n||(n=l_(t,s,o,r))}else a=$m({on:i},s).exprs[0],n||(n=[gp(),gp()]);return t_(t,e,a,u_(t,e,n,s,r&&r.suffix),r)};function l_(t,e,i,n){const r=[];e.forEach((t,e)=>S(t)&&t===i[e]?r.push(t):0);const s=mp(r);if(n.left&&n.right){const e=new Set(r);return[t.columnNames().map(t=>{const i=`[${At(t)}]`;return e.has(t)?{[t]:`(a, b) => a${i} == null ? b${i} : a${i}`}:t}),s]}return n.right?[s,gp()]:[gp(),s]}function u_(t,e,i,n,r=[]){if(c(i)){let s,a,o,c=i.length;s=a=o={names:[],exprs:[]},c--&&(s=Vb("join",t,i[0],n)),c--&&(a=Vb("join",e,i[1],c_)),c--&&(o=$m(i[2],n));const h=new Set,l=new Set(s.names);return a.names.forEach(t=>{l.has(t)&&h.add(t)}),h.size&&(d_(s.names,h,r[0]||"_1"),d_(a.names,h,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}return $m(i,n)}function d_(t,e,i){t.forEach((n,r)=>e.has(n)?t[r]=n+i:0)}var p_=function(t,e,i,n={}){const r=new Qy(t.totalRows()),s=c(i)?f_:g_;return s(r,t,e,i),n.anti&&r.not().and(t.mask()),t.create({filter:r})};function f_(t,e,i,[n,r]){const s=Jb(i,r);e.scan((e,i)=>{const r=s.get(n(e,i));r>=0&&t.set(e)})}function g_(t,e,i,n){const r=e.numRows(),s=i.numRows(),a=e.data(),o=i.data();if(e.isFiltered()||i.isFiltered()){const c=e.indices(!1),h=i.indices(!1);for(let e=0;e<r;++e){const i=c[e];for(let e=0;e<s;++e)if(n(i,a,h[e],o)){t.set(i);break}}}else for(let c=0;c<r;++c)for(let e=0;e<s;++e)if(n(c,a,e,o)){t.set(c);break}}var m_=function(t,e,i,n){i=s_(t,e,i);const r=c(i)?a_(t,e,...i.map(h)):$m({on:i},{join:[t,e]}).exprs[0];return p_(t,e,r,n)},y_=function(t,e,[i,n],{names:r,exprs:s,ops:a}){const o=E(t),c=t.totalRows();r.forEach(t=>o.add(t,Array(c).fill(D)));const h=Jb(e,n),l=Ky(["lr","rr","data"],"{"+ib(r,(t,e)=>`_[${e}][lr] = $[${e}](rr, data);`)+"}",r.map(t=>o.data[t]),gb(e,a,s)),u=e.data();return t.scan((t,e)=>{const n=h.get(i(t,e));n>=0&&l(t,n,u)}),t.create(o)},b_=function(t,e,i,n){return i=s_(t,e,i),y_(t,e,[n_("lookup",t,i[0]),n_("lookup",e,i[1])],Vb("lookup",e,n))};const __=(t,e)=>null!=t?t:e;var v_=function(t,e,i,n={}){const{keys:r,keyColumn:s}=x_(t,e,n),a=__(n.valueSeparator,"_"),o=i.names.length>1?(t,e)=>e+a+r[t]:t=>r[t],c=r.map(e=>mb(t,i.ops.map(t=>{const i=t.fields.map(t=>{const i=(i,n)=>e===s[i]?t(i,n):NaN;return i.toString=()=>e+":"+t,i});return{...t,fields:i}})));return t.create(w_(i,o,t.groups(),c))};function x_(t,e,i){const n=i.limit>0?+i.limit:1/0,r=__(i.sort,!0),s=__(i.keySeparator,"_"),a=gb(t,e.ops,e.exprs),o=1===a.length?a[0]:(t,e)=>a.map(i=>i(t,e)).join(s),c=Array(t.totalRows());t.scan((t,e)=>c[t]=o(t,e));const h=mb(t.ungroup(),[{id:0,name:"array_agg_distinct",fields:[t=>c[t]],params:[]}])[0][0],l=r?h.sort():h;return{keys:Number.isFinite(n)?l.slice(0,n):l,keyColumn:c}}function w_({names:t,exprs:e},i,n,r){const s=n?n.size:1,a=E(),o=r.length,c=t.length;let h;const l=(t,e)=>h[t][e];n&&vb(a,n);for(let u=0;u<c;++u){const n=e[u];if(null!=n.field)for(let e=0;e<o;++e)a.add(i(e,t[u]),r[e][n.field]);else if(s>1)for(let e=0;e<o;++e){h=r[e];const o=a.add(i(e,t[u]),Array(s));for(let t=0;t<s;++t)o[t]=n(t,null,l)}else for(let e=0;e<o;++e)h=r[e],a.add(i(e,t[u]),[n(0,null,l)])}return a.new()}var S_=function(t,e,i,n){return v_(t,Vb("fold",t,e),Vb("fold",t,i,{preparse:I_,aggronly:!0}),n)};function I_(t){t.forEach((e,i)=>e.field?t.set(i,Mt(e+"")):0)}var A_=function(t,e){const i=new Map;return t.columnNames(t=>(i.set(t,t),0)),tb(t,dp(t,e,i))},k_=function(t,e){return Yb(t,$m(e,{table:t,aggronly:!0}))},T_=function(t,e,i,n){return(e?n?O_:M_:n?C_:E_)(t.length,t,i,n)};function M_(t,e,i){const n=i.length;for(let r=0;r<t;++r)e[r]=i[n*pt()|0];return e}function O_(t,e,i,n){const r=i.length,s=new Float64Array(r);let a=0;for(let c=0;c<r;++c)s[c]=a+=n(i[c]);const o=xb(nb).right;for(let c=0;c<t;++c)e[c]=i[o(s,a*pt())];return e}function E_(t,e,i){const n=i.length;if(t>=n)return i;for(let r=0;r<t;++r)e[r]=i[r];for(let r=t;r<n;++r){const n=r*pt();n<t&&(e[0|n]=i[r])}return e}function C_(t,e,i,n){const r=i.length;if(t>=r)return i;const s=new Float32Array(r),a=new Uint32Array(r);for(let o=0;o<r;++o)a[o]=o,s[o]=-Math.log(pt())/n(i[o]);a.sort((t,e)=>s[t]-s[e]);for(let o=0;o<t;++o)e[o]=i[a[o]];return e}var D_=function(t,e=0,i=t.length){let n=i-(e=+e);while(n){const i=pt()*n--|0,r=t[n+e];t[n+e]=t[i+e],t[i+e]=r}return t},B_=function(t,e,i,n={}){const{replace:r,shuffle:s}=n,a=t.partitions(!1);let o=0;e=a.map((t,i)=>{let n=e(i);return o+=n=r?n:Math.min(t.length,n),n});const c=new Uint32Array(o);let h=0;return a.forEach((t,n)=>{const s=e[n],a=c.subarray(h,h+=s);r||s!==t.length?T_(a,r,t,i):a.set(t)}),!1!==s&&(a.length>1||!r)&&D_(c),t.reify(c)},L_=function(t,e,i={}){return B_(t,F_(t,e),N_(t,i.weight),i)};const P_=t=>e=>t.get(e)||0;function F_(t,e){return f(e)?()=>e:P_(Yb(t,$m({size:e},{table:t})).column("size"))}function N_(t,e){return null==e?null:(e=f(e)?t.columnName(e):e,P_(S(e)?t.column(e):Cb(t,$m({w:e},{table:t}),{drop:!0}).column("w")))}var R_=function(t,e){return tb(t,dp(t,e))},U_=function(t,{names:e,exprs:i,ops:n=[]},r={}){if(0===e.length)return t;const s=1===e.length&&r.as||[],a=null==r.drop||!!r.drop,o=null==r.limit?s.length||1/0:Math.max(1,+r.limit||1),c=gb(t,n,i),h=E(),l=e.reduce((t,e,i)=>t.set(e,i),new Map),u=(e,i)=>{const n=V_(t,c[e],o),r=n.length;for(let t=0;t<r;++t)h.add(s[t]||`${i}_${t+1}`,n[t])};return t.columnNames().forEach(e=>{l.has(e)?(a||h.add(e,t.column(e)),u(l.get(e),e),l.delete(e)):h.add(e,t.column(e))}),l.forEach(u),t.create(h)};function V_(t,e,i){const n=t.totalRows(),r=[];return t.scan((t,s)=>{const a=h(e(t,s)),o=Math.min(a.length,i);while(r.length<o)r.push(Array(n).fill(D));for(let e=0;e<o;++e)r[e][t]=a[e]}),r}var j_=function(t,e,i){return U_(t,Vb("spread",t,e),i)},z_=function(t,e){return t.concat(e).dedupe()},W_=function(t,e,i){return Rb(t,Vb("unroll",t,e),i&&i.drop?{...i,drop:Vb("unroll",t,i.drop).names}:i)},$_=function(t,e){return t.create({groups:H_(t,e)})};function H_(t,{names:e=[],exprs:i=[],ops:n=[]}){const r=e.length;if(0===r)return null;if(1===r&&!t.isFiltered()&&i[0].field){const n=t.column(i[0].field);if(n.groups)return n.groups(e)}let s=gb(t,n,i);const a=de(s),o=t.totalRows(),c=new Uint32Array(o),h={},l=[],u=t.data(),d=t.mask();if(d)for(let p=d.next(0);p>=0;p=d.next(p+1)){const t=a(p,u)+"",e=h[t];c[p]=null!=e?e:h[t]=l.push(p)-1}else for(let p=0;p<o;++p){const t=a(p,u)+"",e=h[t];c[p]=null!=e?e:h[t]=l.push(p)-1}return n.length||(s=s.map(t=>e=>t(e,u))),{keys:c,get:s,names:e,rows:l,size:l.length}}var Y_=function(t,e){return $_(t,Vb("groupby",t,e))},q_=function(t,e){return t.create({order:e})};const G_=(t,e,i,n)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${i}\n    : (u > v || v == null) && u != null ? ${n}\n    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${i}\n    : v !== v && u === u ? ${n} : `;var K_=function(t,e){const i=[],n=[],r=[];let s=null,a="0",o="0";t.isGrouped()&&(s=t.groups().keys,a="ka",o="kb");const{ops:c}=$m(e,{table:t,value:(t,e)=>{if(i.push(t),e.escape){const t=t=>`fn[${r.length}](${t}, data)`;n.push([t("a"),t("b")]),r.push(e.escape)}else n.push([ce(e,{index:"a",op:a}),ce(e,{index:"b",op:o})])},window:!1}),h=mb(t,c),l=(t,e)=>h[t][e],u=i.length;let d="return (a, b) => {"+(l&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let p=0;p<u;++p){const t=e.get(i[p]).desc?-1:1,[r,s]=n[p];d+=G_(r,s,-t,t)}return d+="0;};",Function("op","keys","fn","data",d)(l,s,r,t.data())},X_=function(t,e){return q_(t,J_(t,e))};function J_(t,e){let i=-1;const n=new Map,r=t=>n.set(++i+"",t);return e.forEach(e=>{const i=null!=e.expr?e.expr:e;if(x(i)&&!g(i))for(const t in i)r(i[t]);else r(f(i)?py(e,t.columnName(i)):S(i)?py(e):g(i)?e:p("Invalid orderby field: "+(e+"")))}),K_(t,n)}var Q_=function(t,e){const i=t.numRows(),n=i+e.reduce((t,e)=>t+e.numRows(),0);if(i===n)return t;const r=[t,...e],s=E();return t.columnNames().forEach(t=>{const e=Array(n);let i=0;r.forEach(n=>{const r=n.column(t)||{get:()=>D};n.scan(t=>e[i++]=r.get(t))}),s.add(t,e)}),t.create(s.new())},Z_=function(t,e){const i=E(),n=t.groups(),{get:r,names:s=[],rows:a,size:o=1}=n||{},c=new Uint32Array(o+1);s.forEach(t=>i.add(t,null));const h=n?_b(t,e,n):[bb(t,e)];e.outputs().map(t=>i.add(t,[]));const l=c.length-1;let u=0;for(let d=0;d<l;++d)u+=c[d+1]=e.write(h[d],i.data,c[d]);if(n){const e=t.data();s.forEach((t,n)=>{const s=i.data[t]=Array(u),h=r[n];for(let i=0,r=0;i<o;++i)s.fill(h(a[i],e),r,r+=c[i+1])})}return t.create(i.new())},tv=function(t){return t.isGrouped()?t.create({groups:null}):t},ev=function(t){return t.isOrdered()?t.create({order:null}):t},iv={__antijoin:(t,e,i)=>m_(t,e,i,{anti:!0}),__count:(t,e={})=>k_(t,{[e.as||"count"]:Ot()}),__cross:(t,e,i,n)=>h_(t,e,()=>!0,i,{...n,left:!0,right:!0}),__concat:Q_,__dedupe:Zy,__derive:Lb,__except:Pb,__filter:Nb,__fold:jb,__impute:Gb,__intersect:Xb,__join:h_,__lookup:b_,__pivot:S_,__relocate:eb,__rename:A_,__rollup:k_,__sample:L_,__select:R_,__semijoin:m_,__spread:j_,__union:z_,__unroll:W_,__groupby:Y_,__orderby:X_,__ungroup:tv,__unorder:ev,__reduce:Z_};function nv(t,e){return vp.from(t,e)}Object.assign(vp.prototype,iv);vp.prototype},"6bfb":function(t,e,i){"use strict";var n=i("3eea");e["a"]={fromIterable(t){return r(s(t))},fromAsyncIterable(t){return r(a(t))},fromDOMStream(t){return r(o(t))},fromNodeStream(t){return r(u(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const r=t=>(t.next(),t);function*s(t){let e,i,r,s,a=!1,o=[],c=0;function h(){return"peek"===r?Object(n["joinUint8Arrays"])(o,s)[0]:([i,o,c]=Object(n["joinUint8Arrays"])(o,s),i)}({cmd:r,size:s}=yield null);let l=Object(n["toUint8ArrayIterator"])(t)[Symbol.iterator]();try{do{if(({done:e,value:i}=isNaN(s-c)?l.next(void 0):l.next(s-c)),!e&&i.byteLength>0&&(o.push(i),c+=i.byteLength),e||s<=c)do{({cmd:r,size:s}=yield h())}while(s<c)}while(!e)}catch(u){(a=!0)&&"function"===typeof l.throw&&l.throw(u)}finally{!1===a&&"function"===typeof l.return&&l.return(null)}return null}async function*a(t){let e,i,r,s,a=!1,o=[],c=0;function h(){return"peek"===r?Object(n["joinUint8Arrays"])(o,s)[0]:([i,o,c]=Object(n["joinUint8Arrays"])(o,s),i)}({cmd:r,size:s}=yield null);let l=Object(n["toUint8ArrayAsyncIterator"])(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:i}=isNaN(s-c)?await l.next(void 0):await l.next(s-c)),!e&&i.byteLength>0&&(o.push(i),c+=i.byteLength),e||s<=c)do{({cmd:r,size:s}=yield h())}while(s<c)}while(!e)}catch(u){(a=!0)&&"function"===typeof l.throw&&await l.throw(u)}finally{!1===a&&"function"===typeof l.return&&await l.return(new Uint8Array(0))}return null}async function*o(t){let e,i,r,s=!1,a=!1,o=[],h=0;function l(){return"peek"===i?Object(n["joinUint8Arrays"])(o,r)[0]:([e,o,h]=Object(n["joinUint8Arrays"])(o,r),e)}({cmd:i,size:r}=yield null);let u=new c(t);try{do{if(({done:s,value:e}=isNaN(r-h)?await u["read"](void 0):await u["read"](r-h)),!s&&e.byteLength>0&&(o.push(Object(n["toUint8Array"])(e)),h+=e.byteLength),s||r<=h)do{({cmd:i,size:r}=yield l())}while(r<h)}while(!s)}catch(d){(a=!0)&&await u["cancel"](d)}finally{!1===a?await u["cancel"]():t["locked"]&&u.releaseLock()}return null}class c{constructor(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(e){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader["closed"].catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}async cancel(t){const{reader:e,source:i}=this;e&&await e["cancel"](t).catch(()=>{}),i&&i["locked"]&&this.releaseLock()}async read(t){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=this.supportsBYOB&&"number"===typeof t?await this.readFromBYOBReader(t):await this.getDefaultReader().read();return!e.done&&(e.value=Object(n["toUint8Array"])(e)),e}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source["getReader"](),this.defaultReader["closed"].catch(()=>{})),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source["getReader"]({mode:"byob"}),this.byobReader["closed"].catch(()=>{})),this.reader=this.byobReader}async readFromBYOBReader(t){return await h(this.getBYOBReader(),new ArrayBuffer(t),0,t)}}async function h(t,e,i,n){if(i>=n)return{done:!1,value:new Uint8Array(e,0,n)};const{done:r,value:s}=await t.read(new Uint8Array(e,i,n-i));return(i+=s.byteLength)<n&&!r?await h(t,s.buffer,i,n):{done:r,value:new Uint8Array(s.buffer,0,i)}}const l=(t,e)=>{let i,n=t=>i([e,t]);return[e,n,new Promise(r=>(i=r)&&t["once"](e,n))]};async function*u(t){let e,i,r,s=[],a="error",o=!1,c=null,h=0,u=[];function d(){return"peek"===e?Object(n["joinUint8Arrays"])(u,i)[0]:([r,u,h]=Object(n["joinUint8Arrays"])(u,i),r)}if(({cmd:e,size:i}=yield null),t["isTTY"])return yield new Uint8Array(0),null;try{s[0]=l(t,"end"),s[1]=l(t,"error");do{if(s[2]=l(t,"readable"),[a,c]=await Promise.race(s.map(t=>t[2])),"error"===a)break;if((o="end"===a)||(isFinite(i-h)?(r=Object(n["toUint8Array"])(t["read"](i-h)),r.byteLength<i-h&&(r=Object(n["toUint8Array"])(t["read"](void 0)))):r=Object(n["toUint8Array"])(t["read"](void 0)),r.byteLength>0&&(u.push(r),h+=r.byteLength)),o||i<=h)do{({cmd:e,size:i}=yield d())}while(i<h)}while(!o)}finally{await p(s,"error"===a?c:null)}return null;function p(e,i){return r=u=null,new Promise(async(n,r)=>{for(const[i,a]of e)t["off"](i,a);try{const e=t["destroy"];e&&e.call(t,i),i=void 0}catch(s){i=s||i}finally{null!=i?r(i):n()}})}}},"841f":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"d",(function(){return c})),i.d(e,"k",(function(){return p})),i.d(e,"l",(function(){return f})),i.d(e,"i",(function(){return g})),i.d(e,"f",(function(){return m})),i.d(e,"e",(function(){return y})),i.d(e,"j",(function(){return b})),i.d(e,"h",(function(){return _})),i.d(e,"g",(function(){return v})),i.d(e,"o",(function(){return x})),i.d(e,"m",(function(){return w})),i.d(e,"p",(function(){return S})),i.d(e,"n",(function(){return I}));var n=i("f673");const[r,s]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!==typeof BigInt?[BigInt,!0]:[e,!1]})(),[a,o]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return"undefined"!==typeof BigInt64Array?[BigInt64Array,!0]:[e,!1]})(),[c,h]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return"undefined"!==typeof BigUint64Array?[BigUint64Array,!0]:[e,!1]})(),l=t=>"number"===typeof t,u=t=>"boolean"===typeof t,d=t=>"function"===typeof t,p=t=>null!=t&&Object(t)===t,f=t=>p(t)&&d(t.then),g=t=>p(t)&&d(t[Symbol.iterator]),m=t=>p(t)&&d(t[Symbol.asyncIterator]),y=t=>p(t)&&p(t["schema"]),b=t=>p(t)&&"done"in t&&"value"in t,_=t=>p(t)&&d(t["stat"])&&l(t["fd"]),v=t=>p(t)&&w(t["body"]),x=t=>p(t)&&d(t["abort"])&&d(t["getWriter"])&&!(t instanceof n["d"]),w=t=>p(t)&&d(t["cancel"])&&d(t["getReader"])&&!(t instanceof n["d"]),S=t=>p(t)&&d(t["end"])&&d(t["write"])&&u(t["writable"])&&!(t instanceof n["d"]),I=t=>p(t)&&d(t["read"])&&d(t["pipe"])&&u(t["readable"])&&!(t instanceof n["d"])},"90c5":function(t,e,i){},"910a":function(t,e,i){"use strict";i("90c5")},9152:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,i,n,r){var s,a,o=8*r-n-1,c=(1<<o)-1,h=c>>1,l=-7,u=i?r-1:0,d=i?-1:1,p=t[e+u];for(u+=d,s=p&(1<<-l)-1,p>>=-l,l+=o;l>0;s=256*s+t[e+u],u+=d,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=n;l>0;a=256*a+t[e+u],u+=d,l-=8);if(0===s)s=1-h;else{if(s===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),s-=h}return(p?-1:1)*a*Math.pow(2,s-n)},e.write=function(t,e,i,n,r,s){var a,o,c,h=8*s-r-1,l=(1<<h)-1,u=l>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),e+=a+u>=1?d/c:d*Math.pow(2,1-u),e*c>=2&&(a++,c/=2),a+u>=l?(o=0,a=l):a+u>=1?(o=(e*c-1)*Math.pow(2,r),a+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,r),a=0));r>=8;t[i+p]=255&o,p+=f,o/=256,r-=8);for(a=a<<r|o,h+=r;h>0;t[i+p]=255&a,p+=f,a/=256,h-=8);t[i+p-f]|=128*g}},a640:function(t,e,i){"use strict";var n=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},a6b2:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n={};n.Offset,n.Table,n.SIZEOF_SHORT=2,n.SIZEOF_INT=4,n.FILE_IDENTIFIER_LENGTH=4,n.Encoding={UTF8_BYTES:1,UTF16_STRING:2},n.int32=new Int32Array(2),n.float32=new Float32Array(n.int32.buffer),n.float64=new Float64Array(n.int32.buffer),n.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],n.Long=function(t,e){this.low=0|t,this.high=0|e},n.Long.create=function(t,e){return 0==t&&0==e?n.Long.ZERO:new n.Long(t,e)},n.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},n.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},n.Long.ZERO=new n.Long(0,0),n.Builder=function(t){if(t)e=t;else var e=1024;this.bb=n.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},n.Builder.prototype.dataBuffer=function(){return this.bb},n.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},n.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);var i=1+~(this.bb.capacity()-this.space+e)&t-1;while(this.space<i+t+e){var r=this.bb.capacity();this.bb=n.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)},n.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},n.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},n.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},n.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},n.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},n.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},n.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},n.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},n.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},n.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},n.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},n.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},n.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},n.Builder.prototype.addFieldInt8=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt8(e),this.slot(t))},n.Builder.prototype.addFieldInt16=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt16(e),this.slot(t))},n.Builder.prototype.addFieldInt32=function(t,e,i){(this.force_defaults||e!=i)&&(this.addInt32(e),this.slot(t))},n.Builder.prototype.addFieldInt64=function(t,e,i){!this.force_defaults&&e.equals(i)||(this.addInt64(e),this.slot(t))},n.Builder.prototype.addFieldFloat32=function(t,e,i){(this.force_defaults||e!=i)&&(this.addFloat32(e),this.slot(t))},n.Builder.prototype.addFieldFloat64=function(t,e,i){(this.force_defaults||e!=i)&&(this.addFloat64(e),this.slot(t))},n.Builder.prototype.addFieldOffset=function(t,e,i){(this.force_defaults||e!=i)&&(this.addOffset(e),this.slot(t))},n.Builder.prototype.addFieldStruct=function(t,e,i){e!=i&&(this.nested(e),this.slot(t))},n.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},n.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},n.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},n.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},n.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var i=e<<1,r=n.ByteBuffer.allocate(i);return r.setPosition(i-e),r.bytes().set(t.bytes(),i-e),r},n.Builder.prototype.addOffset=function(t){this.prep(n.SIZEOF_INT,0),this.writeInt32(this.offset()-t+n.SIZEOF_INT)},n.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},n.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var i=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);var r=2;this.addInt16(t-this.object_start);var s=(i+r)*n.SIZEOF_SHORT;this.addInt16(s);var a=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var c=this.bb.capacity()-this.vtables[e];if(s==this.bb.readInt16(c)){for(var h=n.SIZEOF_SHORT;h<s;h+=n.SIZEOF_SHORT)if(this.bb.readInt16(o+h)!=this.bb.readInt16(c+h))continue t;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},n.Builder.prototype.finish=function(t,e){if(e){var i=e;if(this.prep(this.minalign,n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH),i.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var r=n.FILE_IDENTIFIER_LENGTH-1;r>=0;r--)this.writeInt8(i.charCodeAt(r))}this.prep(this.minalign,n.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},n.Builder.prototype.requiredField=function(t,e){var i=this.bb.capacity()-t,n=i-this.bb.readInt32(i),r=0!=this.bb.readInt16(n+e);if(!r)throw new Error("FlatBuffers: field "+e+" must be set")},n.Builder.prototype.startVector=function(t,e,i){this.notNested(),this.vector_num_elems=e,this.prep(n.SIZEOF_INT,t*e),this.prep(i,t*e)},n.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},n.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];var i=0;while(i<t.length){var n,r=t.charCodeAt(i++);if(r<55296||r>=56320)n=r;else{var s=t.charCodeAt(i++);n=(r<<10)+s+-56613888}n<128?e.push(n):(n<2048?e.push(n>>6&31|192):(n<65536?e.push(n>>12&15|224):e.push(n>>18&7|240,n>>12&63|128),e.push(n>>6&63|128)),e.push(63&n|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);i=0;for(var a=this.space,o=this.bb.bytes();i<e.length;i++)o[a++]=e[i];return this.endVector()},n.Builder.prototype.createLong=function(t,e){return n.Long.create(t,e)},n.ByteBuffer=function(t){this.bytes_=t,this.position_=0},n.ByteBuffer.allocate=function(t){return new n.ByteBuffer(new Uint8Array(t))},n.ByteBuffer.prototype.clear=function(){this.position_=0},n.ByteBuffer.prototype.bytes=function(){return this.bytes_},n.ByteBuffer.prototype.position=function(){return this.position_},n.ByteBuffer.prototype.setPosition=function(t){this.position_=t},n.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},n.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},n.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},n.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},n.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},n.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},n.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},n.ByteBuffer.prototype.readInt64=function(t){return new n.Long(this.readInt32(t),this.readInt32(t+4))},n.ByteBuffer.prototype.readUint64=function(t){return new n.Long(this.readUint32(t),this.readUint32(t+4))},n.ByteBuffer.prototype.readFloat32=function(t){return n.int32[0]=this.readInt32(t),n.float32[0]},n.ByteBuffer.prototype.readFloat64=function(t){return n.int32[n.isLittleEndian?0:1]=this.readInt32(t),n.int32[n.isLittleEndian?1:0]=this.readInt32(t+4),n.float64[0]},n.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},n.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},n.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},n.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},n.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},n.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},n.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},n.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},n.ByteBuffer.prototype.writeFloat32=function(t,e){n.float32[0]=e,this.writeInt32(t,n.int32[0])},n.ByteBuffer.prototype.writeFloat64=function(t,e){n.float64[0]=e,this.writeInt32(t,n.int32[n.isLittleEndian?0:1]),this.writeInt32(t+4,n.int32[n.isLittleEndian?1:0])},n.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<n.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+n.SIZEOF_INT+e));return t},n.ByteBuffer.prototype.__offset=function(t,e){var i=t-this.readInt32(t);return e<this.readInt16(i)?this.readInt16(i+e):0},n.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},n.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var i=this.readInt32(t),r="",s=0;if(t+=n.SIZEOF_INT,e===n.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+i);while(s<i){var a,o=this.readUint8(t+s++);if(o<192)a=o;else{var c=this.readUint8(t+s++);if(o<224)a=(31&o)<<6|63&c;else{var h=this.readUint8(t+s++);if(o<240)a=(15&o)<<12|(63&c)<<6|63&h;else{var l=this.readUint8(t+s++);a=(7&o)<<18|(63&c)<<12|(63&h)<<6|63&l}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return r},n.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},n.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+n.SIZEOF_INT},n.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},n.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var e=0;e<n.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+n.SIZEOF_INT+e))return!1;return!0},n.ByteBuffer.prototype.createLong=function(t,e){return n.Long.create(t,e)}},addb:function(t,e,i){var n=i("f36a"),r=Math.floor,s=function(t,e){var i=t.length,c=r(i/2);return i<8?a(t,e):o(t,s(n(t,0,c),e),s(n(t,c),e),e)},a=function(t,e){var i,n,r=t.length,s=1;while(s<r){n=s,i=t[s];while(n&&e(t[n-1],i)>0)t[n]=t[--n];n!==s++&&(t[n]=i)}return t},o=function(t,e,i,n){var r=e.length,s=i.length,a=0,o=0;while(a<r||o<s)t[a+o]=a<r&&o<s?n(e[a],i[o])<=0?e[a++]:i[o++]:a<r?e[a++]:i[o++];return t};t.exports=s},b4b6:function(t,e,i){"use strict";function n(t,e,i){return e<=t&&t<=i}function r(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function s(t){var e=String(t),i=e.length,n=0,r=[];while(n<i){var s=e.charCodeAt(n);if(s<55296||s>57343)r.push(s);else if(56320<=s&&s<=57343)r.push(65533);else if(55296<=s&&s<=56319)if(n===i-1)r.push(65533);else{var a=t.charCodeAt(n+1);if(56320<=a&&a<=57343){var o=1023&s,c=1023&a;r.push(65536+(o<<10)+c),n+=1}else r.push(65533)}n+=1}return r}function a(t){for(var e="",i=0;i<t.length;++i){var n=t[i];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}i.d(e,"b",(function(){return g})),i.d(e,"a",(function(){return f}));var o=-1;function c(t){this.tokens=[].slice.call(t)}c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():o},prepend:function(t){if(Array.isArray(t)){var e=t;while(e.length)this.tokens.unshift(e.pop())}else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t)){var e=t;while(e.length)this.tokens.push(e.shift())}else this.tokens.push(t)}};var h=-1;function l(t,e){if(t)throw TypeError("Decoder error");return e||65533}function u(){}function d(){}u.prototype={handler:function(t,e){}},d.prototype={handler:function(t,e){}};var p="utf-8";function f(t,e){if(!(this instanceof f))return new f(t,e);if(t=void 0!==t?String(t).toLowerCase():p,t!==p)throw new Error("Encoding not supported. Only utf-8 is supported");e=r(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e["fatal"]),this._ignoreBOM=Boolean(e["ignoreBOM"]),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function g(t,e){if(!(this instanceof g))return new g(t,e);if(t=void 0!==t?String(t).toLowerCase():p,t!==p)throw new Error("Encoding not supported. Only utf-8 is supported");e=r(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e["fatal"])},Object.defineProperty(this,"encoding",{value:"utf-8"})}function m(t){var e=t.fatal,i=0,r=0,s=0,a=128,c=191;this.handler=function(t,u){if(u===o&&0!==s)return s=0,l(e);if(u===o)return h;if(0===s){if(n(u,0,127))return u;if(n(u,194,223))s=1,i=u-192;else if(n(u,224,239))224===u&&(a=160),237===u&&(c=159),s=2,i=u-224;else{if(!n(u,240,244))return l(e);240===u&&(a=144),244===u&&(c=143),s=3,i=u-240}return i<<=6*s,null}if(!n(u,a,c))return i=s=r=0,a=128,c=191,t.prepend(u),l(e);if(a=128,c=191,r+=1,i+=u-128<<6*(s-r),r!==s)return null;var d=i;return i=s=r=0,d}}function y(t){t.fatal;this.handler=function(t,e){if(e===o)return h;if(n(e,0,127))return e;var i,r;n(e,128,2047)?(i=1,r=192):n(e,2048,65535)?(i=2,r=224):n(e,65536,1114111)&&(i=3,r=240);var s=[(e>>6*i)+r];while(i>0){var a=e>>6*(i-1);s.push(128|63&a),i-=1}return s}}f.prototype={decode:function(t,e){var i;i="object"===typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"===typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=r(e),this._streaming||(this._decoder=new m({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e["stream"]);var n,s=new c(i),o=[];while(!s.endOfStream()){if(n=this._decoder.handler(s,s.read()),n===h)break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}if(!this._streaming){do{if(n=this._decoder.handler(s,s.read()),n===h)break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}while(!s.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),a(o)}},g.prototype={encode:function(t,e){t=t?String(t):"",e=r(e),this._streaming||(this._encoder=new y(this._options)),this._streaming=Boolean(e["stream"]);var i,n=[],a=new c(s(t));while(!a.endOfStream()){if(i=this._encoder.handler(a,a.read()),i===h)break;Array.isArray(i)?n.push.apply(n,i):n.push(i)}if(!this._streaming){while(1){if(i=this._encoder.handler(a,a.read()),i===h)break;Array.isArray(i)?n.push.apply(n,i):n.push(i)}this._encoder=null}return new Uint8Array(n)}}},b639:function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i("1fb5"),r=i("9152"),s=i("e3db");function a(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function o(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=h.prototype):(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,i){if(!h.TYPED_ARRAY_SUPPORT&&!(this instanceof h))return new h(t,e,i);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,i)}function l(t,e,i,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?m(t,e,i,n):"string"===typeof e?f(t,e,i):y(t,e)}function u(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e,i,n){return u(e),e<=0?c(t,e):void 0!==i?"string"===typeof n?c(t,e).fill(i,n):c(t,e).fill(i):c(t,e)}function p(t,e){if(u(e),t=c(t,e<0?0:0|b(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function f(t,e,i){if("string"===typeof i&&""!==i||(i="utf8"),!h.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(e,i);t=c(t,n);var r=t.write(e,i);return r!==n&&(t=t.slice(0,r)),t}function g(t,e){var i=e.length<0?0:0|b(e.length);t=c(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function m(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),h.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=h.prototype):t=g(t,e),t}function y(t,e){if(h.isBuffer(e)){var i=0|b(e.length);return t=c(t,i),0===t.length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?c(t,0):g(t,e);if("Buffer"===e.type&&s(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function v(t,e){if(h.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Z(t).length;default:if(n)return X(t).length;e=(""+e).toLowerCase(),n=!0}}function x(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,e>>>=0,i<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return N(this,e,i);case"utf8":case"utf-8":return D(this,e,i);case"ascii":return P(this,e,i);case"latin1":case"binary":return F(this,e,i);case"base64":return C(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function S(t,e,i,n,r){if(0===t.length)return-1;if("string"===typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:I(t,e,i,n,r);if("number"===typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):I(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function I(t,e,i,n,r){var s,a=1,o=t.length,c=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,o/=2,c/=2,i/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var l=-1;for(s=i;s<o;s++)if(h(t,s)===h(e,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===c)return l*a}else-1!==l&&(s-=s-l),l=-1}else for(i+c>o&&(i=o-c),s=i;s>=0;s--){for(var u=!0,d=0;d<c;d++)if(h(t,s+d)!==h(e,d)){u=!1;break}if(u)return s}return-1}function A(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))return a;t[i+a]=o}return a}function k(t,e,i,n){return tt(X(e,t.length-i),t,i,n)}function T(t,e,i,n){return tt(J(e),t,i,n)}function M(t,e,i,n){return T(t,e,i,n)}function O(t,e,i,n){return tt(Z(e),t,i,n)}function E(t,e,i,n){return tt(Q(e,t.length-i),t,i,n)}function C(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function D(t,e,i){i=Math.min(t.length,i);var n=[],r=e;while(r<i){var s,a,o,c,h=t[r],l=null,u=h>239?4:h>223?3:h>191?2:1;if(r+u<=i)switch(u){case 1:h<128&&(l=h);break;case 2:s=t[r+1],128===(192&s)&&(c=(31&h)<<6|63&s,c>127&&(l=c));break;case 3:s=t[r+1],a=t[r+2],128===(192&s)&&128===(192&a)&&(c=(15&h)<<12|(63&s)<<6|63&a,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:s=t[r+1],a=t[r+2],o=t[r+3],128===(192&s)&&128===(192&a)&&128===(192&o)&&(c=(15&h)<<18|(63&s)<<12|(63&a)<<6|63&o,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,u=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),r+=u}return L(n)}e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:a(),e.kMaxLength=o(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return l(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,i){return d(null,t,e,i)},h.allocUnsafe=function(t){return p(null,t)},h.allocUnsafeSlow=function(t){return p(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);r<s;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=h.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var a=t[i];if(!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},h.byteLength=v,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?D(this,0,t):x.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,n,r){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,r>>>=0,this===t)return 0;for(var s=r-n,a=i-e,o=Math.min(s,a),c=this.slice(n,r),l=t.slice(e,i),u=0;u<o;++u)if(c[u]!==l[u]){s=c[u],a=l[u];break}return s<a?-1:a<s?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return S(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return S(this,t,e,i,!1)},h.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"===typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return A(this,t,e,i);case"utf8":case"utf-8":return k(this,t,e,i);case"ascii":return T(this,t,e,i);case"latin1":case"binary":return M(this,t,e,i);case"base64":return O(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;function L(t){var e=t.length;if(e<=B)return String.fromCharCode.apply(String,t);var i="",n=0;while(n<e)i+=String.fromCharCode.apply(String,t.slice(n,n+=B));return i}function P(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function F(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function N(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",s=e;s<i;++s)r+=K(t[s]);return r}function R(t,e,i){for(var n=t.slice(e,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function U(t,e,i){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function V(t,e,i,n,r,s){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function j(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-i,2);r<s;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function z(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-i,4);r<s;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function W(t,e,i,n,r,s){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function $(t,e,i,n,s){return s||W(t,e,i,4,34028234663852886e22,-34028234663852886e22),r.write(t,e,i,n,23,4),i+4}function H(t,e,i,n,s){return s||W(t,e,i,8,17976931348623157e292,-17976931348623157e292),r.write(t,e,i,n,52,8),i+8}h.prototype.slice=function(t,e){var i,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=h.prototype;else{var r=e-t;i=new h(r,void 0);for(var s=0;s<r;++s)i[s]=this[s+t]}return i},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||U(t,e,this.length);var n=this[t],r=1,s=0;while(++s<e&&(r*=256))n+=this[t+s]*r;return n},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||U(t,e,this.length);var n=this[t+--e],r=1;while(e>0&&(r*=256))n+=this[t+--e]*r;return n},h.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||U(t,e,this.length);var n=this[t],r=1,s=0;while(++s<e&&(r*=256))n+=this[t+s]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||U(t,e,this.length);var n=e,r=1,s=this[t+--n];while(n>0&&(r*=256))s+=this[t+--n]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),r.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),r.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),r.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),r.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,n){if(t=+t,e|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;V(this,t,e,i,r,0)}var s=1,a=0;this[e]=255&t;while(++a<i&&(s*=256))this[e+a]=t/s&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,n){if(t=+t,e|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;V(this,t,e,i,r,0)}var s=i-1,a=1;this[e+s]=255&t;while(--s>=0&&(a*=256))this[e+s]=t/a&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):z(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);V(this,t,e,i,r-1,-r)}var s=0,a=1,o=0;this[e]=255&t;while(++s<i&&(a*=256))t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},h.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);V(this,t,e,i,r-1,-r)}var s=i-1,a=1,o=0;this[e+s]=255&t;while(--s>=0&&(a*=256))t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):z(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||V(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return $(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return $(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return H(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return H(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,s=n-i;if(this===t&&i<e&&e<n)for(r=s-1;r>=0;--r)t[r+e]=this[r+i];else if(s<1e3||!h.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),e);return s},h.prototype.fill=function(t,e,i,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,i=this.length):"string"===typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var s;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"===typeof t)for(s=e;s<i;++s)this[s]=t;else{var a=h.isBuffer(t)?t:X(new h(t,n).toString()),o=a.length;for(s=0;s<i-e;++s)this[s+e]=a[s%o]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function q(t){if(t=G(t).replace(Y,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function K(t){return t<16?"0"+t.toString(16):t.toString(16)}function X(t,e){var i;e=e||1/0;for(var n=t.length,r=null,s=[],a=0;a<n;++a){if(i=t.charCodeAt(a),i>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function J(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function Q(t,e){for(var i,n,r,s=[],a=0;a<t.length;++a){if((e-=2)<0)break;i=t.charCodeAt(a),n=i>>8,r=i%256,s.push(r),s.push(n)}return s}function Z(t){return n.toByteArray(q(t))}function tt(t,e,i,n){for(var r=0;r<n;++r){if(r+i>=e.length||r>=t.length)break;e[r+i]=t[r]}return r}function et(t){return t!==t}}).call(this,i("c8ba"))},c862:function(t,e,i){},c929:function(t,e,i){"use strict";var n=i("7a23"),r=function(t){return Object(n["u"])("data-v-36bcf268"),t=t(),Object(n["s"])(),t},s=r((function(){return Object(n["g"])("canvas",{id:"theme-chart"},null,-1)})),a=[s];function o(t,e,i,r,s,o){return Object(n["r"])(),Object(n["f"])("div",null,a)}i("4de4"),i("d3b7"),i("d81d"),i("159b");var c=i("d549"),h=i("a536"),l=i("5d5d"),u={name:"ThemeChart",data:function(){return this.chart=null,{actions:this.$store.state.filteredData,filterMode:!1,clicked:!1}},computed:{actionsCount:function(){var t=this.countActions();return t},filterCode:function(){return this.$store.state.filterCode}},watch:{filterCode:function(){var t=this;this.actions=h.filter((function(e){return e.code_cv==t.filterCode})),this.actionsCount=this.countActions();var e=this.actionsCount.map((function(t){return t.count})),i=this.actionsCount.map((function(t){return t.theme}));console.log(this.actionsCount),this.chart.data.datasets[0].data=e,this.chart.data.labels=i,this.chart.update(),this.$store.commit("updateNbActions")}},mounted:function(){this.createDoghnut()},methods:{getbgColors:function(){var t=[],e=this.actionsCount.map((function(t){return t.theme}));return e.forEach((function(e){switch(e){case"1 - Pilier coh√©sion sociale":t.push("#DA837B");break;case"2- Pilier d√©veloppement √©conomique et emploi":t.push("#6F2481");break;case"3-Pilier cadre de vie et renouvellement urbain":t.push("#399AD2");break;case"4-Pilotage, ing√©nierie, ressources et √©valuations":t.push("#A3934C");break}})),t},createDoghnut:function(){var t=this,e=this.actionsCount.map((function(t){return t.theme})),i=this.actionsCount.map((function(t){return t.count})),n=document.getElementById("theme-chart"),r={type:"doughnut",data:{labels:e,datasets:[{label:"actionsCount",data:i,labels:e,backgroundColor:this.getbgColors(),hoverOffset:5,hoverBorderColor:"red",hoverBorderWidth:3}]},options:{onClick:function(e,i,n){var r=n.getElementsAtEventForMode(e,"point",{intersect:!0},!0);if(r.length){n.data.datasets[r[0].datasetIndex].backgroundColor=t.getbgColors();var s=n.data.datasets[r[0].datasetIndex].labels[r[0].index],a=n.data.datasets[r[0].datasetIndex].backgroundColor[r[0].index];t.$store.state.filterKey=s,t.$store.commit("updateThemeColor",a),t.$store.commit("crossFilter",{type:"theme",value:s});for(var o=n.data.datasets[r[0].datasetIndex].backgroundColor,c=0;c<o.length;c++)o[c]!=a?o[c]="lightgrey":o[c]=t.getbgColors()[c];t.chart.update()}},onHover:function(t,e){e.length>0?t.chart.canvas.style.cursor="pointer":t.chart.canvas.style.cursor="default"},plugins:{legend:{display:!0,position:"bottom",direction:"horizontal",align:"start",labels:{usePointStyle:!0},onClick:null},title:{display:!1,text:"coucou",options:{fullSize:!1}},tooltip:{position:"nearest"}},layout:{padding:10},responsive:!0,maintainAspectRatio:!1}},s=new c["a"](n,r);this.chart=s},countActions:function(){return l["a"](this.actions).groupby("theme").count().orderby("theme").objects()}}},d=(i("146e"),i("6b0d")),p=i.n(d);const f=p()(u,[["render",o],["__scopeId","data-v-36bcf268"]]);e["a"]=f},d549:function(t,e,i){"use strict";
/*!
 * Chart.js v3.6.2
 * https://www.chartjs.org
 * (c) 2021 Chart.js Contributors
 * Released under the MIT License
 */const n=function(){return"undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame}();function r(t,e,i){const r=i||(t=>Array.prototype.slice.call(t));let s=!1,a=[];return function(...i){a=r(i),s||(s=!0,n.call(window,()=>{s=!1,t.apply(e,a)}))}}function s(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const a=t=>"start"===t?"left":"end"===t?"right":"center",o=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,c=(t,e,i,n)=>{const r=n?"left":"right";return t===r?i:"center"===t?(e+i)/2:e};function h(){}const l=function(){let t=0;return function(){return t++}}();function u(t){return null===t||"undefined"===typeof t}function d(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function p(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const f=t=>("number"===typeof t||t instanceof Number)&&isFinite(+t);function g(t,e){return f(t)?t:e}function m(t,e){return"undefined"===typeof t?e:t}const y=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e,b=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function _(t,e,i){if(t&&"function"===typeof t.call)return t.apply(i,e)}function v(t,e,i,n){let r,s,a;if(d(t))if(s=t.length,n)for(r=s-1;r>=0;r--)e.call(i,t[r],r);else for(r=0;r<s;r++)e.call(i,t[r],r);else if(p(t))for(a=Object.keys(t),s=a.length,r=0;r<s;r++)e.call(i,t[a[r]],a[r])}function x(t,e){let i,n,r,s;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(r=t[i],s=e[i],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function w(t){if(d(t))return t.map(w);if(p(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let r=0;for(;r<n;++r)e[i[r]]=w(t[i[r]]);return e}return t}function S(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function I(t,e,i,n){if(!S(t))return;const r=e[t],s=i[t];p(r)&&p(s)?A(r,s,n):e[t]=w(s)}function A(t,e,i){const n=d(e)?e:[e],r=n.length;if(!p(t))return t;i=i||{};const s=i.merger||I;for(let a=0;a<r;++a){if(e=n[a],!p(e))continue;const r=Object.keys(e);for(let n=0,a=r.length;n<a;++n)s(r[n],t,e,i)}return t}function k(t,e){return A(t,e,{merger:T})}function T(t,e,i){if(!S(t))return;const n=e[t],r=i[t];p(n)&&p(r)?k(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=w(r))}const M="",O=".";function E(t,e){const i=t.indexOf(O,e);return-1===i?t.length:i}function C(t,e){if(e===M)return t;let i=0,n=E(e,i);while(t&&n>i)t=t[e.substr(i,n-i)],i=n+1,n=E(e,i);return t}function D(t){return t.charAt(0).toUpperCase()+t.slice(1)}const B=t=>"undefined"!==typeof t,L=t=>"function"===typeof t,P=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0},F=Math.PI,N=2*F,R=N+F,U=Number.POSITIVE_INFINITY,V=F/180,j=F/2,z=F/4,W=2*F/3,$=Math.log10,H=Math.sign;function Y(t){const e=Math.round(t);t=K(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor($(t))),n=t/i,r=n<=1?1:n<=2?2:n<=5?5:10;return r*i}function q(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n===0&&(e.push(n),e.push(t/n));return i===(0|i)&&e.push(i),e.sort((t,e)=>t-e).pop(),e}function G(t){return!isNaN(parseFloat(t))&&isFinite(t)}function K(t,e,i){return Math.abs(t-e)<i}function X(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function J(t,e,i){let n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n][i],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Q(t){return t*(F/180)}function Z(t){return t*(180/F)}function tt(t){if(!f(t))return;let e=1,i=0;while(Math.round(t*e)/e!==t)e*=10,i++;return i}function et(t,e){const i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(i*i+n*n);let s=Math.atan2(n,i);return s<-.5*F&&(s+=N),{angle:s,distance:r}}function it(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function nt(t,e){return(t-e+R)%N-F}function rt(t){return(t%N+N)%N}function st(t,e,i,n){const r=rt(t),s=rt(e),a=rt(i),o=rt(s-r),c=rt(a-r),h=rt(r-s),l=rt(r-a);return r===s||r===a||n&&s===a||o>c&&h<l}function at(t,e,i){return Math.max(e,Math.min(i,t))}function ot(t){return at(t,-32768,32767)}function ct(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}const ht=t=>0===t||1===t,lt=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*N/i),ut=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*N/i)+1,dt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*j),easeOutSine:t=>Math.sin(t*j),easeInOutSine:t=>-.5*(Math.cos(F*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>ht(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ht(t)?t:lt(t,.075,.3),easeOutElastic:t=>ht(t)?t:ut(t,.075,.3),easeInOutElastic(t){const e=.1125,i=.45;return ht(t)?t:t<.5?.5*lt(2*t,e,i):.5+.5*ut(2*t-1,e,i)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-dt.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*dt.easeInBounce(2*t):.5*dt.easeOutBounce(2*t-1)+.5},pt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ft="0123456789ABCDEF",gt=t=>ft[15&t],mt=t=>ft[(240&t)>>4]+ft[15&t],yt=t=>(240&t)>>4===(15&t);function bt(t){return yt(t.r)&&yt(t.g)&&yt(t.b)&&yt(t.a)}function _t(t){var e,i=t.length;return"#"===t[0]&&(4===i||5===i?e={r:255&17*pt[t[1]],g:255&17*pt[t[2]],b:255&17*pt[t[3]],a:5===i?17*pt[t[4]]:255}:7!==i&&9!==i||(e={r:pt[t[1]]<<4|pt[t[2]],g:pt[t[3]]<<4|pt[t[4]],b:pt[t[5]]<<4|pt[t[6]],a:9===i?pt[t[7]]<<4|pt[t[8]]:255})),e}function vt(t){var e=bt(t)?gt:mt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t}function xt(t){return t+.5|0}const wt=(t,e,i)=>Math.max(Math.min(t,i),e);function St(t){return wt(xt(2.55*t),0,255)}function It(t){return wt(xt(255*t),0,255)}function At(t){return wt(xt(t/2.55)/100,0,1)}function kt(t){return wt(xt(100*t),0,100)}const Tt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Mt(t){const e=Tt.exec(t);let i,n,r,s=255;if(e){if(e[7]!==i){const t=+e[7];s=255&(e[8]?St(t):255*t)}return i=+e[1],n=+e[3],r=+e[5],i=255&(e[2]?St(i):i),n=255&(e[4]?St(n):n),r=255&(e[6]?St(r):r),{r:i,g:n,b:r,a:s}}}function Ot(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${At(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Et=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ct(t,e,i){const n=e*Math.min(i,1-i),r=(e,r=(e+t/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function Dt(t,e,i){const n=(n,r=(n+t/60)%6)=>i-i*e*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Bt(t,e,i){const n=Ct(t,1,.5);let r;for(e+i>1&&(r=1/(e+i),e*=r,i*=r),r=0;r<3;r++)n[r]*=1-e-i,n[r]+=e;return n}function Lt(t){const e=255,i=t.r/e,n=t.g/e,r=t.b/e,s=Math.max(i,n,r),a=Math.min(i,n,r),o=(s+a)/2;let c,h,l;return s!==a&&(l=s-a,h=o>.5?l/(2-s-a):l/(s+a),c=s===i?(n-r)/l+(n<r?6:0):s===n?(r-i)/l+2:(i-n)/l+4,c=60*c+.5),[0|c,h||0,o]}function Pt(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(It)}function Ft(t,e,i){return Pt(Ct,t,e,i)}function Nt(t,e,i){return Pt(Bt,t,e,i)}function Rt(t,e,i){return Pt(Dt,t,e,i)}function Ut(t){return(t%360+360)%360}function Vt(t){const e=Et.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?St(+e[5]):It(+e[5]));const r=Ut(+e[2]),s=+e[3]/100,a=+e[4]/100;return i="hwb"===e[1]?Nt(r,s,a):"hsv"===e[1]?Rt(r,s,a):Ft(r,s,a),{r:i[0],g:i[1],b:i[2],a:n}}function jt(t,e){var i=Lt(t);i[0]=Ut(i[0]+e),i=Ft(i),t.r=i[0],t.g=i[1],t.b=i[2]}function zt(t){if(!t)return;const e=Lt(t),i=e[0],n=kt(e[1]),r=kt(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${r}%, ${At(t.a)})`:`hsl(${i}, ${n}%, ${r}%)`}const Wt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$t={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ht(){const t={},e=Object.keys($t),i=Object.keys(Wt);let n,r,s,a,o;for(n=0;n<e.length;n++){for(a=o=e[n],r=0;r<i.length;r++)s=i[r],o=o.replace(s,Wt[s]);s=parseInt($t[a],16),t[o]=[s>>16&255,s>>8&255,255&s]}return t}let Yt;function qt(t){Yt||(Yt=Ht(),Yt.transparent=[0,0,0,0]);const e=Yt[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}function Gt(t,e,i){if(t){let n=Lt(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,0===e?360:1)),n=Ft(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Kt(t,e){return t?Object.assign(e||{},t):t}function Xt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=It(t[3]))):(e=Kt(t,{r:0,g:0,b:0,a:1}),e.a=It(e.a)),e}function Jt(t){return"r"===t.charAt(0)?Mt(t):Vt(t)}class Qt{constructor(t){if(t instanceof Qt)return t;const e=typeof t;let i;"object"===e?i=Xt(t):"string"===e&&(i=_t(t)||qt(t)||Jt(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Kt(this._rgb);return t&&(t.a=At(t.a)),t}set rgb(t){this._rgb=Xt(t)}rgbString(){return this._valid?Ot(this._rgb):this._rgb}hexString(){return this._valid?vt(this._rgb):this._rgb}hslString(){return this._valid?zt(this._rgb):this._rgb}mix(t,e){const i=this;if(t){const n=i.rgb,r=t.rgb;let s;const a=e===s?.5:e,o=2*a-1,c=n.a-r.a,h=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;s=1-h,n.r=255&h*n.r+s*r.r+.5,n.g=255&h*n.g+s*r.g+.5,n.b=255&h*n.b+s*r.b+.5,n.a=a*n.a+(1-a)*r.a,i.rgb=n}return i}clone(){return new Qt(this.rgb)}alpha(t){return this._rgb.a=It(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=xt(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Gt(this._rgb,2,t),this}darken(t){return Gt(this._rgb,2,-t),this}saturate(t){return Gt(this._rgb,1,t),this}desaturate(t){return Gt(this._rgb,1,-t),this}rotate(t){return jt(this._rgb,t),this}}function Zt(t){return new Qt(t)}const te=t=>t instanceof CanvasGradient||t instanceof CanvasPattern;function ee(t){return te(t)?t:Zt(t)}function ie(t){return te(t)?t:Zt(t).saturate(.5).darken(.1).hexString()}const ne=Object.create(null),re=Object.create(null);function se(t,e){if(!e)return t;const i=e.split(".");for(let n=0,r=i.length;n<r;++n){const e=i[n];t=t[e]||(t[e]=Object.create(null))}return t}function ae(t,e,i){return"string"===typeof e?A(se(t,e),i):A(se(t,""),e)}class oe{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ie(e.backgroundColor),this.hoverBorderColor=(t,e)=>ie(e.borderColor),this.hoverColor=(t,e)=>ie(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(t)}set(t,e){return ae(this,t,e)}get(t){return se(this,t)}describe(t,e){return ae(re,t,e)}override(t,e){return ae(ne,t,e)}route(t,e,i,n){const r=se(this,t),s=se(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=s[n];return p(t)?Object.assign({},e,t):m(t,e)},set(t){this[a]=t}}})}}var ce=new oe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function he(t){return!t||u(t.size)||u(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function le(t,e,i,n,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,i.push(r)),s>n&&(n=s),n}function ue(t,e,i,n){n=n||{};let r=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},s=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0;const o=i.length;let c,h,l,u,p;for(c=0;c<o;c++)if(u=i[c],void 0!==u&&null!==u&&!0!==d(u))a=le(t,r,s,a,u);else if(d(u))for(h=0,l=u.length;h<l;h++)p=u[h],void 0===p||null===p||d(p)||(a=le(t,r,s,a,p));t.restore();const f=s.length/2;if(f>i.length){for(c=0;c<f;c++)delete r[s[c]];s.splice(0,f)}return a}function de(t,e,i){const n=t.currentDevicePixelRatio,r=0!==i?Math.max(i/2,.5):0;return Math.round((e-r)*n)/n+r}function pe(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function fe(t,e,i,n){let r,s,a,o,c;const h=e.pointStyle,l=e.rotation,u=e.radius;let d=(l||0)*V;if(h&&"object"===typeof h&&(r=h.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(i,n),t.rotate(d),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),void t.restore();if(!(isNaN(u)||u<=0)){switch(t.beginPath(),h){default:t.arc(i,n,u,0,N),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(d)*u,n-Math.cos(d)*u),d+=W,t.lineTo(i+Math.sin(d)*u,n-Math.cos(d)*u),d+=W,t.lineTo(i+Math.sin(d)*u,n-Math.cos(d)*u),t.closePath();break;case"rectRounded":c=.516*u,o=u-c,s=Math.cos(d+z)*o,a=Math.sin(d+z)*o,t.arc(i-s,n-a,c,d-F,d-j),t.arc(i+a,n-s,c,d-j,d),t.arc(i+s,n+a,c,d,d+j),t.arc(i-a,n+s,c,d+j,d+F),t.closePath();break;case"rect":if(!l){o=Math.SQRT1_2*u,t.rect(i-o,n-o,2*o,2*o);break}d+=z;case"rectRot":s=Math.cos(d)*u,a=Math.sin(d)*u,t.moveTo(i-s,n-a),t.lineTo(i+a,n-s),t.lineTo(i+s,n+a),t.lineTo(i-a,n+s),t.closePath();break;case"crossRot":d+=z;case"cross":s=Math.cos(d)*u,a=Math.sin(d)*u,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a),t.moveTo(i+a,n-s),t.lineTo(i-a,n+s);break;case"star":s=Math.cos(d)*u,a=Math.sin(d)*u,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a),t.moveTo(i+a,n-s),t.lineTo(i-a,n+s),d+=z,s=Math.cos(d)*u,a=Math.sin(d)*u,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a),t.moveTo(i+a,n-s),t.lineTo(i-a,n+s);break;case"line":s=Math.cos(d)*u,a=Math.sin(d)*u,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(d)*u,n+Math.sin(d)*u);break}t.fill(),e.borderWidth>0&&t.stroke()}}function ge(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function me(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ye(t){t.restore()}function be(t,e,i,n,r){if(!e)return t.lineTo(i.x,i.y);if("middle"===r){const n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else"after"===r!==!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function _e(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function ve(t,e,i,n,r,s={}){const a=d(e)?e:[e],o=s.strokeWidth>0&&""!==s.strokeColor;let c,h;for(t.save(),t.font=r.string,xe(t,s),c=0;c<a.length;++c)h=a[c],o&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),u(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(h,i,n,s.maxWidth)),t.fillText(h,i,n,s.maxWidth),we(t,i,n,h,s),n+=r.lineHeight;t.restore()}function xe(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),u(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function we(t,e,i,n,r){if(r.strikethrough||r.underline){const s=t.measureText(n),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,c=i-s.actualBoundingBoxAscent,h=i+s.actualBoundingBoxDescent,l=r.strikethrough?(c+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,l),t.lineTo(o,l),t.stroke()}}function Se(t,e){const{x:i,y:n,w:r,h:s,radius:a}=e;t.arc(i+a.topLeft,n+a.topLeft,a.topLeft,-j,F,!0),t.lineTo(i,n+s-a.bottomLeft),t.arc(i+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,F,j,!0),t.lineTo(i+r-a.bottomRight,n+s),t.arc(i+r-a.bottomRight,n+s-a.bottomRight,a.bottomRight,j,0,!0),t.lineTo(i+r,n+a.topRight),t.arc(i+r-a.topRight,n+a.topRight,a.topRight,0,-j,!0),t.lineTo(i+a.topLeft,n)}const Ie=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Ae=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ke(t,e){const i=(""+t).match(Ie);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const Te=t=>+t||0;function Me(t,e){const i={},n=p(e),r=n?Object.keys(e):e,s=p(t)?n?i=>m(t[i],t[e[i]]):e=>t[e]:()=>t;for(const a of r)i[a]=Te(s(a));return i}function Oe(t){return Me(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ee(t){return Me(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ce(t){const e=Oe(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function De(t,e){t=t||{},e=e||ce.font;let i=m(t.size,e.size);"string"===typeof i&&(i=parseInt(i,10));let n=m(t.style,e.style);n&&!(""+n).match(Ae)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:m(t.family,e.family),lineHeight:ke(m(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:m(t.weight,e.weight),string:""};return r.string=he(r),r}function Be(t,e,i,n){let r,s,a,o=!0;for(r=0,s=t.length;r<s;++r)if(a=t[r],void 0!==a&&(void 0!==e&&"function"===typeof a&&(a=a(e),o=!1),void 0!==i&&d(a)&&(a=a[i%a.length],o=!1),void 0!==a))return n&&!o&&(n.cacheable=!1),a}function Le(t,e,i){const{min:n,max:r}=t,s=b(e,(r-n)/2),a=(t,e)=>i&&0===t?0:t+e;return{min:a(n,-Math.abs(s)),max:a(r,s)}}function Pe(t,e){return Object.assign(Object.create(t),e)}function Fe(t,e,i){i=i||(i=>t[i]<e);let n,r=t.length-1,s=0;while(r-s>1)n=s+r>>1,i(n)?s=n:r=n;return{lo:s,hi:r}}const Ne=(t,e,i)=>Fe(t,i,n=>t[n][e]<i),Re=(t,e,i)=>Fe(t,i,n=>t[n][e]>=i);function Ue(t,e,i){let n=0,r=t.length;while(n<r&&t[n]<e)n++;while(r>n&&t[r-1]>i)r--;return n>0||r<t.length?t.slice(n,r):t}const Ve=["push","pop","shift","splice","unshift"];function je(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Ve.forEach(e=>{const i="_onData"+D(e),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const r=n.apply(this,e);return t._chartjs.listeners.forEach(t=>{"function"===typeof t[i]&&t[i](...e)}),r}})}))}function ze(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,r=n.indexOf(e);-1!==r&&n.splice(r,1),n.length>0||(Ve.forEach(e=>{delete t[e]}),delete t._chartjs)}function We(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}function $e(t,e=[""],i=t,n,r=(()=>t[0])){B(n)||(n=ai("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>$e([r,...t],e,i,n)};return new Proxy(s,{deleteProperty(e,i){return delete e[i],delete e._keys,delete t[0][i],!0},get(i,n){return Ke(i,n,()=>si(n,e,t,i))},getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(t._scopes[0],e)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(t,e){return oi(t).includes(e)},ownKeys(t){return oi(t)},set(t,e,i){const n=t._storage||(t._storage=r());return t[e]=n[e]=i,delete t._keys,!0}})}function He(t,e,i,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Ye(t,n),setContext:e=>He(t,e,i,n),override:r=>He(t.override(r),e,i,n)};return new Proxy(r,{deleteProperty(e,i){return delete e[i],delete t[i],!0},get(t,e,i){return Ke(t,e,()=>Xe(t,e,i))},getOwnPropertyDescriptor(e,i){return e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(e,i){return Reflect.has(t,i)},ownKeys(){return Reflect.ownKeys(t)},set(e,i,n){return t[i]=n,delete e[i],!0}})}function Ye(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:i,indexable:n,isScriptable:L(i)?i:()=>i,isIndexable:L(n)?n:()=>n}}const qe=(t,e)=>t?t+D(e):e,Ge=(t,e)=>p(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Ke(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=i();return t[e]=n,n}function Xe(t,e,i){const{_proxy:n,_context:r,_subProxy:s,_descriptors:a}=t;let o=n[e];return L(o)&&a.isScriptable(e)&&(o=Je(e,o,t,i)),d(o)&&o.length&&(o=Qe(e,o,t,a.isIndexable)),Ge(e,o)&&(o=He(o,r,s&&s[e],a)),o}function Je(t,e,i,n){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=i;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);return o.add(t),e=e(s,a||n),o.delete(t),Ge(t,e)&&(e=ii(r._scopes,r,t,e)),e}function Qe(t,e,i,n){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=i;if(B(s.index)&&n(t))e=e[s.index%e.length];else if(p(e[0])){const i=e,n=r._scopes.filter(t=>t!==i);e=[];for(const c of i){const i=ii(n,r,t,c);e.push(He(i,s,a&&a[t],o))}}return e}function Ze(t,e,i){return L(t)?t(e,i):t}const ti=(t,e)=>!0===t?e:"string"===typeof t?C(e,t):void 0;function ei(t,e,i,n){for(const r of e){const e=ti(i,r);if(e){t.add(e);const r=Ze(e._fallback,i,e);if(B(r)&&r!==i&&r!==n)return r}else if(!1===e&&B(n)&&i!==n)return null}return!1}function ii(t,e,i,n){const r=e._rootScopes,s=Ze(e._fallback,i,n),a=[...t,...r],o=new Set;o.add(n);let c=ni(o,a,i,s||i);return null!==c&&((!B(s)||s===i||(c=ni(o,a,s,c),null!==c))&&$e(Array.from(o),[""],r,s,()=>ri(e,i,n)))}function ni(t,e,i,n){while(i)i=ei(t,e,i,n);return i}function ri(t,e,i){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return d(r)&&p(i)?i:r}function si(t,e,i,n){let r;for(const s of e)if(r=ai(qe(s,t),i),B(r))return Ge(t,r)?ii(i,n,t,r):r}function ai(t,e){for(const i of e){if(!i)continue;const e=i[t];if(B(e))return e}}function oi(t){let e=t._keys;return e||(e=t._keys=ci(t._scopes)),e}function ci(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}const hi=Number.EPSILON||1e-14,li=(t,e)=>e<t.length&&!t[e].skip&&t[e],ui=t=>"x"===t?"y":"x";function di(t,e,i,n){const r=t.skip?e:t,s=e,a=i.skip?e:i,o=it(s,r),c=it(a,s);let h=o/(o+c),l=c/(o+c);h=isNaN(h)?0:h,l=isNaN(l)?0:l;const u=n*h,d=n*l;return{previous:{x:s.x-u*(a.x-r.x),y:s.y-u*(a.y-r.y)},next:{x:s.x+d*(a.x-r.x),y:s.y+d*(a.y-r.y)}}}function pi(t,e,i){const n=t.length;let r,s,a,o,c,h=li(t,0);for(let l=0;l<n-1;++l)c=h,h=li(t,l+1),c&&h&&(K(e[l],0,hi)?i[l]=i[l+1]=0:(r=i[l]/e[l],s=i[l+1]/e[l],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),i[l]=r*a*e[l],i[l+1]=s*a*e[l])))}function fi(t,e,i="x"){const n=ui(i),r=t.length;let s,a,o,c=li(t,0);for(let h=0;h<r;++h){if(a=o,o=c,c=li(t,h+1),!o)continue;const r=o[i],l=o[n];a&&(s=(r-a[i])/3,o["cp1"+i]=r-s,o["cp1"+n]=l-s*e[h]),c&&(s=(c[i]-r)/3,o["cp2"+i]=r+s,o["cp2"+n]=l+s*e[h])}}function gi(t,e="x"){const i=ui(e),n=t.length,r=Array(n).fill(0),s=Array(n);let a,o,c,h=li(t,0);for(a=0;a<n;++a)if(o=c,c=h,h=li(t,a+1),c){if(h){const t=h[e]-c[e];r[a]=0!==t?(h[i]-c[i])/t:0}s[a]=o?h?H(r[a-1])!==H(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}pi(t,r,s),fi(t,s,e)}function mi(t,e,i){return Math.max(Math.min(t,i),e)}function yi(t,e){let i,n,r,s,a,o=ge(t[0],e);for(i=0,n=t.length;i<n;++i)a=s,s=o,o=i<n-1&&ge(t[i+1],e),s&&(r=t[i],a&&(r.cp1x=mi(r.cp1x,e.left,e.right),r.cp1y=mi(r.cp1y,e.top,e.bottom)),o&&(r.cp2x=mi(r.cp2x,e.left,e.right),r.cp2y=mi(r.cp2y,e.top,e.bottom)))}function bi(t,e,i,n,r){let s,a,o,c;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)gi(t,r);else{let i=n?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)o=t[s],c=di(i,o,t[Math.min(s+1,a-(n?0:1))%a],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,i=o}e.capBezierPoints&&yi(t,i)}function _i(){return"undefined"!==typeof window&&"undefined"!==typeof document}function vi(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function xi(t,e,i){let n;return"string"===typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}const wi=t=>window.getComputedStyle(t,null);function Si(t,e){return wi(t).getPropertyValue(e)}const Ii=["top","right","bottom","left"];function Ai(t,e,i){const n={};i=i?"-"+i:"";for(let r=0;r<4;r++){const s=Ii[r];n[s]=parseFloat(t[e+"-"+s+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const ki=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function Ti(t,e){const i=t.native||t,n=i.touches,r=n&&n.length?n[0]:i,{offsetX:s,offsetY:a}=r;let o,c,h=!1;if(ki(s,a,i.target))o=s,c=a;else{const t=e.getBoundingClientRect();o=r.clientX-t.left,c=r.clientY-t.top,h=!0}return{x:o,y:c,box:h}}function Mi(t,e){const{canvas:i,currentDevicePixelRatio:n}=e,r=wi(i),s="border-box"===r.boxSizing,a=Ai(r,"padding"),o=Ai(r,"border","width"),{x:c,y:h,box:l}=Ti(t,i),u=a.left+(l&&o.left),d=a.top+(l&&o.top);let{width:p,height:f}=e;return s&&(p-=a.width+o.width,f-=a.height+o.height),{x:Math.round((c-u)/p*i.width/n),y:Math.round((h-d)/f*i.height/n)}}function Oi(t,e,i){let n,r;if(void 0===e||void 0===i){const s=vi(t);if(s){const t=s.getBoundingClientRect(),a=wi(s),o=Ai(a,"border","width"),c=Ai(a,"padding");e=t.width-c.width-o.width,i=t.height-c.height-o.height,n=xi(a.maxWidth,s,"clientWidth"),r=xi(a.maxHeight,s,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:n||U,maxHeight:r||U}}const Ei=t=>Math.round(10*t)/10;function Ci(t,e,i,n){const r=wi(t),s=Ai(r,"margin"),a=xi(r.maxWidth,t,"clientWidth")||U,o=xi(r.maxHeight,t,"clientHeight")||U,c=Oi(t,e,i);let{width:h,height:l}=c;if("content-box"===r.boxSizing){const t=Ai(r,"border","width"),e=Ai(r,"padding");h-=e.width+t.width,l-=e.height+t.height}return h=Math.max(0,h-s.width),l=Math.max(0,n?Math.floor(h/n):l-s.height),h=Ei(Math.min(h,a,c.maxWidth)),l=Ei(Math.min(l,o,c.maxHeight)),h&&!l&&(l=Ei(h/2)),{width:h,height:l}}function Di(t,e,i){const n=e||1,r=Math.floor(t.height*n),s=Math.floor(t.width*n);t.height=r/n,t.width=s/n;const a=t.canvas;return a.style&&(i||!a.style.height&&!a.style.width)&&(a.style.height=t.height+"px",a.style.width=t.width+"px"),(t.currentDevicePixelRatio!==n||a.height!==r||a.width!==s)&&(t.currentDevicePixelRatio=n,a.height=r,a.width=s,t.ctx.setTransform(n,0,0,n,0,0),!0)}const Bi=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return t}();function Li(t,e){const i=Si(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Pi(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function Fi(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:"middle"===n?i<.5?t.y:e.y:"after"===n?i<1?t.y:e.y:i>0?e.y:t.y}}function Ni(t,e,i,n){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=Pi(t,r,i),o=Pi(r,s,i),c=Pi(s,e,i),h=Pi(a,o,i),l=Pi(o,c,i);return Pi(h,l,i)}const Ri=new Map;function Ui(t,e){e=e||{};const i=t+JSON.stringify(e);let n=Ri.get(i);return n||(n=new Intl.NumberFormat(t,e),Ri.set(i,n)),n}function Vi(t,e,i){return Ui(e,i).format(t)}const ji=function(t,e){return{x(i){return t+t+e-i},setWidth(t){e=t},textAlign(t){return"center"===t?t:"right"===t?"left":"right"},xPlus(t,e){return t-e},leftForLtr(t,e){return t-e}}},zi=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Wi(t,e,i){return t?ji(e,i):zi()}function $i(t,e){let i,n;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Hi(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Yi(t){return"angle"===t?{between:st,compare:nt,normalize:rt}:{between:ct,compare:(t,e)=>t-e,normalize:t=>t}}function qi({start:t,end:e,count:i,loop:n,style:r}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i===0,style:r}}function Gi(t,e,i){const{property:n,start:r,end:s}=i,{between:a,normalize:o}=Yi(n),c=e.length;let h,l,{start:u,end:d,loop:p}=t;if(p){for(u+=c,d+=c,h=0,l=c;h<l;++h){if(!a(o(e[u%c][n]),r,s))break;u--,d--}u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:p,style:t.style}}function Ki(t,e,i){if(!i)return[t];const{property:n,start:r,end:s}=i,a=e.length,{compare:o,between:c,normalize:h}=Yi(n),{start:l,end:u,loop:d,style:p}=Gi(t,e,i),f=[];let g,m,y,b=!1,_=null;const v=()=>c(r,y,g)&&0!==o(r,y),x=()=>0===o(s,g)||c(s,y,g),w=()=>b||v(),S=()=>!b||x();for(let I=l,A=l;I<=u;++I)m=e[I%a],m.skip||(g=h(m[n]),g!==y&&(b=c(g,r,s),null===_&&w()&&(_=0===o(g,r)?I:A),null!==_&&S()&&(f.push(qi({start:_,end:I,loop:d,count:a,style:p})),_=null),A=I,y=g));return null!==_&&f.push(qi({start:_,end:u,loop:d,count:a,style:p})),f}function Xi(t,e){const i=[],n=t.segments;for(let r=0;r<n.length;r++){const s=Ki(n[r],t.points,e);s.length&&i.push(...s)}return i}function Ji(t,e,i,n){let r=0,s=e-1;if(i&&!n)while(r<e&&!t[r].skip)r++;while(r<e&&t[r].skip)r++;r%=e,i&&(s+=r);while(s>r&&t[s%e].skip)s--;return s%=e,{start:r,end:s}}function Qi(t,e,i,n){const r=t.length,s=[];let a,o=e,c=t[e];for(a=e+1;a<=i;++a){const i=t[a%r];i.skip||i.stop?c.skip||(n=!1,s.push({start:e%r,end:(a-1)%r,loop:n}),e=o=i.stop?a:null):(o=a,c.skip&&(e=a)),c=i}return null!==o&&s.push({start:e%r,end:o%r,loop:n}),s}function Zi(t,e){const i=t.points,n=t.options.spanGaps,r=i.length;if(!r)return[];const s=!!t._loop,{start:a,end:o}=Ji(i,r,s,n);if(!0===n)return tn(t,[{start:a,end:o,loop:s}],i,e);const c=o<a?o+r:o,h=!!t._fullLoop&&0===a&&o===r-1;return tn(t,Qi(i,a,c,h),i,e)}function tn(t,e,i,n){return n&&n.setContext&&i?en(t,e,i,n):e}function en(t,e,i,n){const r=t._chart.getContext(),s=nn(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,c=i.length,h=[];let l=s,u=e[0].start,d=u;function p(t,e,n,r){const s=o?-1:1;if(t!==e){t+=c;while(i[t%c].skip)t-=s;while(i[e%c].skip)e+=s;t%c!==e%c&&(h.push({start:t%c,end:e%c,loop:n,style:r}),l=r,u=e%c)}}for(const f of e){u=o?u:f.start;let t,e=i[u%c];for(d=u+1;d<=f.end;d++){const s=i[d%c];t=nn(n.setContext(Pe(r,{type:"segment",p0:e,p1:s,p0DataIndex:(d-1)%c,p1DataIndex:d%c,datasetIndex:a}))),rn(t,l)&&p(u,d-1,f.loop,l),e=s,l=t}u<d-1&&p(u,d-1,f.loop,l)}return h}function nn(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function rn(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}
/*!
 * Chart.js v3.6.2
 * https://www.chartjs.org
 * (c) 2021 Chart.js Contributors
 * Released under the MIT License
 */class sn{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const r=e.listeners[n],s=e.duration;r.forEach(n=>n({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(i-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=n.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const r=i.items;let s,a=r.length-1,o=!1;for(;a>=0;--a)s=r[a],s._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),o=!0):(r[a]=r[r.length-1],r.pop());o&&(n.draw(),this._notify(n,i,t,"progress")),r.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var an=new sn;const on="transparent",cn={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const n=ee(t||on),r=n.valid&&ee(e||on);return r&&r.valid?r.mix(n,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class hn{constructor(t,e,i,n){const r=e[i];n=Be([t.to,n,r,t.from]);const s=Be([t.from,r,n]);this._active=!0,this._fn=t.fn||cn[t.type||typeof s],this._easing=dt[t.easing]||dt.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=s,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],r=i-this._start,s=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Be([t.to,e,n,t.from]),this._from=Be([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,r=this._from,s=this._loop,a=this._to;let o;if(this._active=r!==a&&(s||e<i),!this._active)return this._target[n]=a,void this._notify(!0);e<0?this._target[n]=r:(o=e/i%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[n]=this._fn(r,a,o))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][e]()}}const ln=["x","y","borderWidth","radius","tension"],un=["color","borderColor","backgroundColor"];ce.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const dn=Object.keys(ce.animation);ce.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),ce.set("animations",{colors:{type:"color",properties:un},numbers:{type:"number",properties:ln}}),ce.describe("animations",{_fallback:"animation"}),ce.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class pn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!p(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const n=t[i];if(!p(n))return;const r={};for(const t of dn)r[t]=n[t];(d(n.properties)&&n.properties||[i]).forEach(t=>{t!==i&&e.has(t)||e.set(t,r)})})}_animateOptions(t,e){const i=e.options,n=gn(t,i);if(!n)return[];const r=this._createAnimations(n,i);return i.$shared&&fn(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,n=[],r=t.$animations||(t.$animations={}),s=Object.keys(e),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const c=s[o];if("$"===c.charAt(0))continue;if("options"===c){n.push(...this._animateOptions(t,e));continue}const h=e[c];let l=r[c];const u=i.get(c);if(l){if(u&&l.active()){l.update(u,h,a);continue}l.cancel()}u&&u.duration?(r[c]=l=new hn(u,t,c,h),n.push(l)):t[c]=h}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(an.add(this._chart,i),!0):void 0}}function fn(t,e){const i=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const e=t[n[r]];e&&e.active()&&i.push(e.wait())}return Promise.all(i)}function gn(t,e){if(!e)return;let i=t.options;if(i)return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i;t.options=e}function mn(t,e){const i=t&&t.options||{},n=i.reverse,r=void 0===i.min?e:0,s=void 0===i.max?e:0;return{start:n?s:r,end:n?r:s}}function yn(t,e,i){if(!1===i)return!1;const n=mn(t,i),r=mn(e,i);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function bn(t){let e,i,n,r;return p(t)?(e=t.top,i=t.right,n=t.bottom,r=t.left):e=i=n=r=t,{top:e,right:i,bottom:n,left:r,disabled:!1===t}}function _n(t,e){const i=[],n=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=n.length;r<s;++r)i.push(n[r].index);return i}function vn(t,e,i,n={}){const r=t.keys,s="single"===n.mode;let a,o,c,h;if(null!==e){for(a=0,o=r.length;a<o;++a){if(c=+r[a],c===i){if(n.all)continue;break}h=t.values[c],f(h)&&(s||0===e||H(e)===H(h))&&(e+=h)}return e}}function xn(t){const e=Object.keys(t),i=new Array(e.length);let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],i[n]={x:s,y:t[s]};return i}function wn(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function Sn(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function In(t){const{min:e,max:i,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?i:Number.POSITIVE_INFINITY}}function An(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function kn(t,e,i,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const e=t[r.index];if(i&&e>0||!i&&e<0)return r.index}return null}function Tn(t,e){const{chart:i,_cachedMeta:n}=t,r=i._stacks||(i._stacks={}),{iScale:s,vScale:a,index:o}=n,c=s.axis,h=a.axis,l=Sn(s,a,n),u=e.length;let d;for(let p=0;p<u;++p){const t=e[p],{[c]:i,[h]:s}=t,u=t._stacks||(t._stacks={});d=u[h]=An(r,l,i),d[o]=s,d._top=kn(d,a,!0,n.type),d._bottom=kn(d,a,!1,n.type)}}function Mn(t,e){const i=t.scales;return Object.keys(i).filter(t=>i[t].axis===e).shift()}function On(t,e){return Pe(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function En(t,e,i){return Pe(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function Cn(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[n]||void 0===e[n][i])return;delete e[n][i]}}}const Dn=t=>"reset"===t||"none"===t,Bn=(t,e)=>e?t:Object.assign({},t),Ln=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:_n(i,!0),values:null};class Pn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=wn(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Cn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),n=(t,e,i,n)=>"x"===t?e:"r"===t?n:i,r=e.xAxisID=m(i.xAxisID,Mn(t,"x")),s=e.yAxisID=m(i.yAxisID,Mn(t,"y")),a=e.rAxisID=m(i.rAxisID,Mn(t,"r")),o=e.indexAxis,c=e.iAxisID=n(o,r,s,a),h=e.vAxisID=n(o,s,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ze(this._data,this),t._stacked&&Cn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(p(e))this._data=xn(e);else if(i!==e){if(i){ze(i,this);const t=this._cachedMeta;Cn(t),t._parsed=[]}e&&Object.isExtensible(e)&&je(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const r=e._stacked;e._stacked=wn(e.vScale,e),e.stack!==i.stack&&(n=!0,Cn(e),e.stack=i.stack),this._resyncElements(t),(n||r!==e._stacked)&&Tn(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:n}=this,{iScale:r,_stacked:s}=i,a=r.axis;let o,c,h,l=0===t&&e===n.length||i._sorted,u=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=n,i._sorted=!0,h=n;else{h=d(n[t])?this.parseArrayData(i,n,t,e):p(n[t])?this.parseObjectData(i,n,t,e):this.parsePrimitiveData(i,n,t,e);const r=()=>null===c[a]||u&&c[a]<u[a];for(o=0;o<e;++o)i._parsed[o+t]=c=h[o],l&&(r()&&(l=!1),u=c);i._sorted=l}s&&Tn(this,h)}parsePrimitiveData(t,e,i,n){const{iScale:r,vScale:s}=t,a=r.axis,o=s.axis,c=r.getLabels(),h=r===s,l=new Array(n);let u,d,p;for(u=0,d=n;u<d;++u)p=u+i,l[u]={[a]:h||r.parse(c[p],p),[o]:s.parse(e[p],p)};return l}parseArrayData(t,e,i,n){const{xScale:r,yScale:s}=t,a=new Array(n);let o,c,h,l;for(o=0,c=n;o<c;++o)h=o+i,l=e[h],a[o]={x:r.parse(l[0],h),y:s.parse(l[1],h)};return a}parseObjectData(t,e,i,n){const{xScale:r,yScale:s}=t,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,c=new Array(n);let h,l,u,d;for(h=0,l=n;h<l;++h)u=h+i,d=e[u],c[h]={x:r.parse(C(d,a),u),y:s.parse(C(d,o),u)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,r=this._cachedMeta,s=e[t.axis],a={keys:_n(n,!0),values:e._stacks[t.axis]};return vn(a,s,r.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const r=i[e.axis];let s=null===r?NaN:r;const a=n&&i._stacks[e.axis];n&&a&&(n.values=a,s=vn(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const i=this._cachedMeta,n=i._parsed,r=i._sorted&&t===i.iScale,s=n.length,a=this._getOtherScale(t),o=Ln(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:l}=In(a);let u,d;function p(){d=n[u];const e=d[a.axis];return!f(d[t.axis])||h>e||l<e}for(u=0;u<s;++u)if(!p()&&(this.updateRangeFromParsed(c,t,d,o),r))break;if(r)for(u=s-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(c,t,d,o);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n][t.axis],f(s)&&i.push(s);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=bn(m(this.options.clip,yn(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],r=e.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||n.length-a;let c;for(i.dataset&&i.dataset.draw(t,r,a,o),c=a;c<a+o;++c){const e=n[c];e.hidden||(e.active?s.push(e):e.draw(t,r))}for(c=0;c<s.length;++c)s[c].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=En(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=n.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=On(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n="active"===e,r=this._cachedDataOpts,s=t+"-"+e,a=r[s],o=this.enableOptionSharing&&B(i);if(a)return Bn(a,o);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),l=n?[t+"Hover","hover",t,""]:[t,""],u=c.getOptionScopes(this.getDataset(),h),d=Object.keys(ce.elements[t]),p=()=>this.getContext(i,n),f=c.resolveNamedOptions(u,d,p,l);return f.$shared&&(f.$shared=o,r[s]=Object.freeze(Bn(f,o))),f}_resolveAnimations(t,e,i){const n=this.chart,r=this._cachedDataOpts,s="animation-"+e,a=r[s];if(a)return a;let o;if(!1!==n.options.animation){const n=this.chart.config,r=n.datasetAnimationScopeKeys(this._type,e),s=n.getOptionScopes(this.getDataset(),r);o=n.createResolver(s,this.getContext(t,i,e))}const c=new pn(n,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Dn(t)||this.chart._animationsDisabled}updateElement(t,e,i,n){Dn(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!Dn(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const r=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,o,c]of this._syncList)this[a](o,c);this._syncList=[];const n=i.length,r=e.length,s=Math.min(r,n);s&&this.parse(0,s),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,e,i=!0){const n=this._cachedMeta,r=n.data,s=t+e;let a;const o=t=>{for(t.length+=e,a=t.length-1;a>=s;a--)t[a]=t[a-e]};for(o(r),a=t;a<s;++a)r[a]=new this.dataElementType;this._parsing&&o(n._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&Cn(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Fn(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let e=0,r=i.length;e<r;e++)n=n.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=We(n.sort((t,e)=>t-e))}return t._cache.$bar}function Nn(t){const e=t.iScale,i=Fn(e,t.type);let n,r,s,a,o=e._length;const c=()=>{32767!==s&&-32768!==s&&(B(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(n=0,r=i.length;n<r;++n)s=e.getPixelForValue(i[n]),c();for(a=void 0,n=0,r=e.ticks.length;n<r;++n)s=e.getPixelForTick(n),c();return o}function Rn(t,e,i,n){const r=i.barThickness;let s,a;return u(r)?(s=e.min*i.categoryPercentage,a=i.barPercentage):(s=r*n,a=1),{chunk:s/n,ratio:a,start:e.pixels[t]-s/2}}function Un(t,e,i,n){const r=e.pixels,s=r[t];let a=t>0?r[t-1]:null,o=t<r.length-1?r[t+1]:null;const c=i.categoryPercentage;null===a&&(a=s-(null===o?e.end-e.start:o-s)),null===o&&(o=s+s-a);const h=s-(s-Math.min(a,o))/2*c,l=Math.abs(o-a)/2*c;return{chunk:l/n,ratio:i.barPercentage,start:h}}function Vn(t,e,i,n){const r=i.parse(t[0],n),s=i.parse(t[1],n),a=Math.min(r,s),o=Math.max(r,s);let c=a,h=o;Math.abs(a)>Math.abs(o)&&(c=o,h=a),e[i.axis]=h,e._custom={barStart:c,barEnd:h,start:r,end:s,min:a,max:o}}function jn(t,e,i,n){return d(t)?Vn(t,e,i,n):e[i.axis]=i.parse(t,n),e}function zn(t,e,i,n){const r=t.iScale,s=t.vScale,a=r.getLabels(),o=r===s,c=[];let h,l,u,d;for(h=i,l=i+n;h<l;++h)d=e[h],u={},u[r.axis]=o||r.parse(a[h],h),c.push(jn(d,u,s,h));return c}function Wn(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function $n(t,e,i){return 0!==t?H(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function Hn(t){let e,i,n,r,s;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(r="end",s="start"):(r="start",s="end"),{start:i,end:n,reverse:e,top:r,bottom:s}}function Yn(t,e,i,n){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);const{start:a,end:o,reverse:c,top:h,bottom:l}=Hn(t);"middle"===r&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?r=h:(i._bottom||0)===n?r=l:(s[qn(l,a,o,c)]=!0,r=h)),s[qn(r,a,o,c)]=!0,t.borderSkipped=s}function qn(t,e,i,n){return n?(t=Gn(t,e,i),t=Kn(t,i,e)):t=Kn(t,e,i),t}function Gn(t,e,i){return t===e?i:t===i?e:t}function Kn(t,e,i){return"start"===t?e:"end"===t?i:t}function Xn(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}Pn.defaults={},Pn.prototype.datasetElementType=null,Pn.prototype.dataElementType=null;class Jn extends Pn{parsePrimitiveData(t,e,i,n){return zn(t,e,i,n)}parseArrayData(t,e,i,n){return zn(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:r,vScale:s}=t,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,c="x"===r.axis?a:o,h="x"===s.axis?a:o,l=[];let u,d,p,f;for(u=i,d=i+n;u<d;++u)f=e[u],p={},p[r.axis]=r.parse(C(f,c),u),l.push(jn(C(f,h),p,s,u));return l}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,r=this.getParsed(t),s=r._custom,a=Wn(s)?"["+s.start+", "+s.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const r="reset"===n,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),l=this.resolveDataElementOptions(e,n),d=this.getSharedOptions(l),p=this.includeOptions(n,d);this.updateSharedOptions(d,n,l);for(let f=e;f<e+i;f++){const e=this.getParsed(f),i=r||u(e[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(f),l=this._calculateBarIndexPixels(f,h),g=(e._stacks||{})[a.axis],m={horizontal:c,base:i.base,enableBorderRadius:!g||Wn(e._custom)||s===g._top||s===g._bottom,x:c?i.head:l.center,y:c?l.center:i.head,height:c?l.size:Math.abs(i.size),width:c?Math.abs(i.size):l.size};p&&(m.options=d||this.resolveDataElementOptions(f,t[f].active?"active":n));const y=m.options||t[f].options;Yn(m,y,g,s),Xn(m,y,h.ratio),this.updateElement(t[f],f,m,n)}}_getStacks(t,e){const i=this._cachedMeta,n=i.iScale,r=n.getMatchingVisibleMetas(this._type),s=n.options.stacked,a=r.length,o=[];let c,h;for(c=0;c<a;++c)if(h=r[c],h.controller.options.grouped){if("undefined"!==typeof e){const t=h.controller.getParsed(e)[h.controller._cachedMeta.vScale.axis];if(u(t)||isNaN(t))continue}if((!1===s||-1===o.indexOf(h.stack)||void 0===s&&void 0===h.stack)&&o.push(h.stack),h.index===t)break}return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),r=void 0!==e?n.indexOf(e):-1;return-1===r?n.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,n=[];let r,s;for(r=0,s=e.data.length;r<s;++r)n.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=t.barThickness,o=a||Nn(e);return{min:o,pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i},options:{base:n,minBarLength:r}}=this,s=n||0,a=this.getParsed(t),o=a._custom,c=Wn(o);let h,l,d=a[e.axis],p=0,f=i?this.applyStack(e,a,i):d;f!==d&&(p=f-d,f=d),c&&(d=o.barStart,f=o.barEnd-o.barStart,0!==d&&H(d)!==H(o.barEnd)&&(p=0),p+=d);const g=u(n)||c?p:n;let m=e.getPixelForValue(g);if(h=this.chart.getDataVisibility(t)?e.getPixelForValue(p+f):m,l=h-m,Math.abs(l)<r&&(l=$n(l,e,s)*r,d===s&&(m-=l/2),h=m+l),m===e.getPixelForValue(s)){const t=H(l)*e.getLineWidthForValue(s)/2;m+=t,l-=t}return{size:l,base:m,head:h,center:h+l/2}}_calculateBarIndexPixels(t,e){const i=e.scale,n=this.options,r=n.skipNull,s=m(n.maxBarThickness,1/0);let a,o;if(e.grouped){const i=r?this._getStackCount(t):e.stackCount,c="flex"===n.barThickness?Un(t,e,n,i):Rn(t,e,n,i),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=c.start+c.chunk*h+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),o=Math.min(s,e.min*e.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,n=i.length;let r=0;for(;r<n;++r)null!==this.getParsed(r)[e.axis]&&i[r].draw(this._ctx)}}Jn.id="bar",Jn.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Jn.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Qn extends Pn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,n){const r=super.parsePrimitiveData(t,e,i,n);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+i).radius;return r}parseArrayData(t,e,i,n){const r=super.parseArrayData(t,e,i,n);for(let s=0;s<r.length;s++){const t=e[i+s];r[s]._custom=m(t[2],this.resolveDataElementOptions(s+i).radius)}return r}parseObjectData(t,e,i,n){const r=super.parseObjectData(t,e,i,n);for(let s=0;s<r.length;s++){const t=e[i+s];r[s]._custom=m(t&&t.r&&+t.r,this.resolveDataElementOptions(s+i).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:i,yScale:n}=e,r=this.getParsed(t),s=i.getLabelForValue(r.x),a=n.getLabelForValue(r.y),o=r._custom;return{label:e.label,value:"("+s+", "+a+(o?", "+o:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,n){const r="reset"===n,{iScale:s,vScale:a}=this._cachedMeta,o=this.resolveDataElementOptions(e,n),c=this.getSharedOptions(o),h=this.includeOptions(n,c),l=s.axis,u=a.axis;for(let d=e;d<e+i;d++){const e=t[d],i=!r&&this.getParsed(d),o={},c=o[l]=r?s.getPixelForDecimal(.5):s.getPixelForValue(i[l]),p=o[u]=r?a.getBasePixel():a.getPixelForValue(i[u]);o.skip=isNaN(c)||isNaN(p),h&&(o.options=this.resolveDataElementOptions(d,e.active?"active":n),r&&(o.options.radius=0)),this.updateElement(e,d,o,n)}this.updateSharedOptions(c,n,o)}resolveDataElementOptions(t,e){const i=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return"active"!==e&&(n.radius=0),n.radius+=m(i&&i._custom,r),n}}function Zn(t,e,i){let n=1,r=1,s=0,a=0;if(e<N){const o=t,c=o+e,h=Math.cos(o),l=Math.sin(o),u=Math.cos(c),d=Math.sin(c),p=(t,e,n)=>st(t,o,c,!0)?1:Math.max(e,e*i,n,n*i),f=(t,e,n)=>st(t,o,c,!0)?-1:Math.min(e,e*i,n,n*i),g=p(0,h,u),m=p(j,l,d),y=f(F,h,u),b=f(F+j,l,d);n=(g-y)/2,r=(m-b)/2,s=-(g+y)/2,a=-(m+b)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:a}}Qn.id="bubble",Qn.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Qn.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};class tr extends Pn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=i;else{let r,s,a=t=>+i[t];if(p(i[t])){const{key:t="value"}=this._parsing;a=e=>+C(i[e],t)}for(r=t,s=t+e;r<s;++r)n._parsed[r]=a(r)}}_getRotation(){return Q(this.options.rotation-90)}_getCircumference(){return Q(this.options.circumference)}_getRotationExtents(){let t=N,e=-N;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const n=this.chart.getDatasetMeta(i).controller,r=n._getRotation(),s=n._getCircumference();t=Math.min(t,r),e=Math.max(e,r+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,n=this._cachedMeta,r=n.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-s)/2,0),o=Math.min(y(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:l}=this._getRotationExtents(),{ratioX:u,ratioY:d,offsetX:p,offsetY:f}=Zn(l,h,o),g=(i.width-s)/u,m=(i.height-s)/d,_=Math.max(Math.min(g,m)/2,0),v=b(this.options.radius,_),x=Math.max(v*o,0),w=(v-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=f*v,n.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this.options,n=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===n._parsed[t]||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*r/N)}updateElements(t,e,i,n){const r="reset"===n,s=this.chart,a=s.chartArea,o=s.options,c=o.animation,h=(a.left+a.right)/2,l=(a.top+a.bottom)/2,u=r&&c.animateScale,d=u?0:this.innerRadius,p=u?0:this.outerRadius,f=this.resolveDataElementOptions(e,n),g=this.getSharedOptions(f),m=this.includeOptions(n,g);let y,b=this._getRotation();for(y=0;y<e;++y)b+=this._circumference(y,r);for(y=e;y<e+i;++y){const e=this._circumference(y,r),i=t[y],s={x:h+this.offsetX,y:l+this.offsetY,startAngle:b,endAngle:b+e,circumference:e,outerRadius:p,innerRadius:d};m&&(s.options=g||this.resolveDataElementOptions(y,i.active?"active":n)),b+=e,this.updateElement(i,y,s,n)}this.updateSharedOptions(g,n,f)}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,n=0;for(i=0;i<e.length;i++){const r=t._parsed[i];null===r||isNaN(r)||!this.chart.getDataVisibility(i)||e[i].hidden||(n+=Math.abs(r))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?N*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=Vi(e._parsed[t],i.options.locale);return{label:n[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const i=this.chart;let n,r,s,a,o;if(!t)for(n=0,r=i.data.datasets.length;n<r;++n)if(i.isDatasetVisible(n)){s=i.getDatasetMeta(n),t=s.data,a=s.controller;break}if(!t)return 0;for(n=0,r=t.length;n<r;++n)o=a.resolveDataElementOptions(n),"inner"!==o.borderAlign&&(e=Math.max(e,o.borderWidth||0,o.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,n=t.length;i<n;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(m(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}tr.id="doughnut",tr.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},tr.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},tr.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map((e,n)=>{const r=t.getDatasetMeta(0),s=r.controller.getStyle(n);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title(){return""},label(t){let e=t.label;const i=": "+t.formattedValue;return d(e)?(e=e.slice(),e[0]+=i):e+=i,e}}}}};class er extends Pn{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:n=[],_dataset:r}=e,s=this.chart._animationsDisabled;let{start:a,count:o}=ir(e,n,s);this._drawStart=a,this._drawCount=o,nr(e)&&(a=0,o=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=n;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!s,options:c},t),this.updateElements(n,a,o,t)}updateElements(t,e,i,n){const r="reset"===n,{iScale:s,vScale:a,_stacked:o,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(e,n),l=this.getSharedOptions(h),d=this.includeOptions(n,l),p=s.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,y=G(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||"none"===n;let _=e>0&&this.getParsed(e-1);for(let v=e;v<e+i;++v){const e=t[v],i=this.getParsed(v),h=b?e:{},g=u(i[f]),x=h[p]=s.getPixelForValue(i[p],v),w=h[f]=r||g?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,i,o):i[f],v);h.skip=isNaN(x)||isNaN(w)||g,h.stop=v>0&&i[p]-_[p]>y,m&&(h.parsed=i,h.raw=c.data[v]),d&&(h.options=l||this.resolveDataElementOptions(v,e.active?"active":n)),b||this.updateElement(e,v,h,n),_=i}this.updateSharedOptions(l,n,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),s=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function ir(t,e,i){const n=e.length;let r=0,s=n;if(t._sorted){const{iScale:a,_parsed:o}=t,c=a.axis,{min:h,max:l,minDefined:u,maxDefined:d}=a.getUserBounds();u&&(r=at(Math.min(Ne(o,a.axis,h).lo,i?n:Ne(e,c,a.getPixelForValue(h)).lo),0,n-1)),s=d?at(Math.max(Ne(o,a.axis,l).hi+1,i?0:Ne(e,c,a.getPixelForValue(l)).hi+1),r,n)-r:n-r}return{start:r,count:s}}function nr(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=r,!0;const s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,r),s}er.id="line",er.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},er.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class rr extends Pn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=Vi(e._parsed[t].r,i.options.locale);return{label:n[t]||"",value:r}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(n/2,0),s=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-s)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,n){const r="reset"===n,s=this.chart,a=this.getDataset(),o=s.options,c=o.animation,h=this._cachedMeta.rScale,l=h.xCenter,u=h.yCenter,d=h.getIndexAngle(0)-.5*F;let p,f=d;const g=360/this.countVisibleElements();for(p=0;p<e;++p)f+=this._computeAngle(p,n,g);for(p=e;p<e+i;p++){const e=t[p];let i=f,o=f+this._computeAngle(p,n,g),m=s.getDataVisibility(p)?h.getDistanceFromCenterForValue(a.data[p]):0;f=o,r&&(c.animateScale&&(m=0),c.animateRotate&&(i=o=d));const y={x:l,y:u,innerRadius:0,outerRadius:m,startAngle:i,endAngle:o,options:this.resolveDataElementOptions(p,e.active?"active":n)};this.updateElement(e,p,y,n)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let i=0;return e.data.forEach((e,n)=>{!isNaN(t.data[n])&&this.chart.getDataVisibility(n)&&i++}),i}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Q(this.resolveDataElementOptions(t,e).angle||i):0}}rr.id="polarArea",rr.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},rr.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map((e,n)=>{const r=t.getDatasetMeta(0),s=r.controller.getStyle(n);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title(){return""},label(t){return t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class sr extends tr{}sr.id="pie",sr.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class ar extends Pn{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}update(t){const e=this._cachedMeta,i=e.dataset,n=e.data||[],r=e.iScale.getLabels();if(i.points=n,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===n.length,options:e};this.updateElement(i,void 0,s,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,i,n){const r=this.getDataset(),s=this._cachedMeta.rScale,a="reset"===n;for(let o=e;o<e+i;o++){const e=t[o],i=this.resolveDataElementOptions(o,e.active?"active":n),c=s.getPointPositionForValue(o,r.data[o]),h=a?s.xCenter:c.x,l=a?s.yCenter:c.y,u={x:h,y:l,angle:c.angle,skip:isNaN(h)||isNaN(l),options:i};this.updateElement(e,o,u,n)}}}ar.id="radar",ar.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},ar.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class or extends er{}or.id="scatter",or.defaults={showLine:!1,fill:!1},or.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(t){return"("+t.label+", "+t.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var cr=Object.freeze({__proto__:null,BarController:Jn,BubbleController:Qn,DoughnutController:tr,LineController:er,PolarAreaController:rr,PieController:sr,RadarController:ar,ScatterController:or});function hr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class lr{constructor(t){this.options=t||{}}formats(){return hr()}parse(t,e){return hr()}format(t,e){return hr()}add(t,e,i){return hr()}diff(t,e,i){return hr()}startOf(t,e,i){return hr()}endOf(t,e){return hr()}}lr.override=function(t){Object.assign(lr.prototype,t)};var ur={_date:lr};function dr(t,e){return"native"in t?{x:t.x,y:t.y}:Mi(t,e)}function pr(t,e){const i=t.getSortedVisibleDatasetMetas();let n,r,s;for(let a=0,o=i.length;a<o;++a){({index:n,data:r}=i[a]);for(let t=0,i=r.length;t<i;++t)s=r[t],s.skip||e(s,n,t)}}function fr(t,e,i,n){const{controller:r,data:s,_sorted:a}=t,o=r._cachedMeta.iScale;if(o&&e===o.axis&&a&&s.length){const t=o._reversePixels?Re:Ne;if(!n)return t(s,e,i);if(r._sharedOptions){const n=s[0],r="function"===typeof n.getRange&&n.getRange(e);if(r){const n=t(s,e,i-r),a=t(s,e,i+r);return{lo:n.lo,hi:a.hi}}}}return{lo:0,hi:s.length-1}}function gr(t,e,i,n,r){const s=t.getSortedVisibleDatasetMetas(),a=i[e];for(let o=0,c=s.length;o<c;++o){const{index:t,data:i}=s[o],{lo:c,hi:h}=fr(s[o],e,a,r);for(let e=c;e<=h;++e){const r=i[e];r.skip||n(r,t,e)}}}function mr(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){const r=e?Math.abs(t.x-n.x):0,s=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}function yr(t,e,i,n){const r=[];if(!ge(e,t.chartArea,t._minPadding))return r;const s=function(t,i,s){t.inRange(e.x,e.y,n)&&r.push({element:t,datasetIndex:i,index:s})};return gr(t,i,e,s,!0),r}function br(t,e,i,n,r){const s=mr(i);let a=Number.POSITIVE_INFINITY,o=[];if(!ge(e,t.chartArea,t._minPadding))return o;const c=function(i,c,h){if(n&&!i.inRange(e.x,e.y,r))return;const l=i.getCenterPoint(r);if(!ge(l,t.chartArea,t._minPadding)&&!i.inRange(e.x,e.y,r))return;const u=s(e,l);u<a?(o=[{element:i,datasetIndex:c,index:h}],a=u):u===a&&o.push({element:i,datasetIndex:c,index:h})};return gr(t,i,e,c),o}function _r(t,e,i,n){const r=dr(e,t),s=[],a=i.axis,o="x"===a?"inXRange":"inYRange";let c=!1;return pr(t,(t,e,i)=>{t[o](r[a],n)&&s.push({element:t,datasetIndex:e,index:i}),t.inRange(r.x,r.y,n)&&(c=!0)}),i.intersect&&!c?[]:s}var vr={modes:{index(t,e,i,n){const r=dr(e,t),s=i.axis||"x",a=i.intersect?yr(t,r,s,n):br(t,r,s,!1,n),o=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,i=t.data[e];i&&!i.skip&&o.push({element:i,datasetIndex:t.index,index:e})}),o):[]},dataset(t,e,i,n){const r=dr(e,t),s=i.axis||"xy";let a=i.intersect?yr(t,r,s,n):br(t,r,s,!1,n);if(a.length>0){const e=a[0].datasetIndex,i=t.getDatasetMeta(e).data;a=[];for(let t=0;t<i.length;++t)a.push({element:i[t],datasetIndex:e,index:t})}return a},point(t,e,i,n){const r=dr(e,t),s=i.axis||"xy";return yr(t,r,s,n)},nearest(t,e,i,n){const r=dr(e,t),s=i.axis||"xy";return br(t,r,s,i.intersect,n)},x(t,e,i,n){return _r(t,e,{axis:"x",intersect:i.intersect},n)},y(t,e,i,n){return _r(t,e,{axis:"y",intersect:i.intersect},n)}}};const xr=["left","top","right","bottom"];function wr(t,e){return t.filter(t=>t.pos===e)}function Sr(t,e){return t.filter(t=>-1===xr.indexOf(t.pos)&&t.box.axis===e)}function Ir(t,e){return t.sort((t,i)=>{const n=e?i:t,r=e?t:i;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function Ar(t){const e=[];let i,n,r,s,a,o;for(i=0,n=(t||[]).length;i<n;++i)r=t[i],({position:s,options:{stack:a,stackWeight:o=1}}=r),e.push({index:i,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return e}function kr(t){const e={};for(const i of t){const{stack:t,pos:n,stackWeight:r}=i;if(!t||!xr.includes(n))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}function Tr(t,e){const i=kr(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let s,a,o;for(s=0,a=t.length;s<a;++s){o=t[s];const{fullSize:a}=o.box,c=i[o.stack],h=c&&o.stackWeight/c.weight;o.horizontal?(o.width=h?h*n:a&&e.availableWidth,o.height=r):(o.width=n,o.height=h?h*r:a&&e.availableHeight)}return i}function Mr(t){const e=Ar(t),i=Ir(e.filter(t=>t.box.fullSize),!0),n=Ir(wr(e,"left"),!0),r=Ir(wr(e,"right")),s=Ir(wr(e,"top"),!0),a=Ir(wr(e,"bottom")),o=Sr(e,"x"),c=Sr(e,"y");return{fullSize:i,leftAndTop:n.concat(s),rightAndBottom:r.concat(c).concat(a).concat(o),chartArea:wr(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:s.concat(a).concat(o)}}function Or(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function Er(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Cr(t,e,i,n){const{pos:r,box:s}=i,a=t.maxPadding;if(!p(r)){i.size&&(t[r]-=i.size);const e=n[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?s.height:s.width),i.size=e.size/e.count,t[r]+=i.size}s.getPadding&&Er(a,s.getPadding());const o=Math.max(0,e.outerWidth-Or(a,t,"left","right")),c=Math.max(0,e.outerHeight-Or(a,t,"top","bottom")),h=o!==t.w,l=c!==t.h;return t.w=o,t.h=c,i.horizontal?{same:h,other:l}:{same:l,other:h}}function Dr(t){const e=t.maxPadding;function i(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function Br(t,e){const i=e.maxPadding;function n(t){const n={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{n[t]=Math.max(e[t],i[t])}),n}return n(t?["left","right"]:["top","bottom"])}function Lr(t,e,i,n){const r=[];let s,a,o,c,h,l;for(s=0,a=t.length,h=0;s<a;++s){o=t[s],c=o.box,c.update(o.width||e.w,o.height||e.h,Br(o.horizontal,e));const{same:a,other:u}=Cr(e,i,o,n);h|=a&&r.length,l=l||u,c.fullSize||r.push(o)}return h&&Lr(r,e,i,n)||l}function Pr(t,e,i,n,r){t.top=i,t.left=e,t.right=e+n,t.bottom=i+r,t.width=n,t.height=r}function Fr(t,e,i,n){const r=i.padding;let{x:s,y:a}=e;for(const o of t){const t=o.box,c=n[o.stack]||{count:1,placed:0,weight:1},h=o.stackWeight/c.weight||1;if(o.horizontal){const n=e.w*h,s=c.size||t.height;B(c.start)&&(a=c.start),t.fullSize?Pr(t,r.left,a,i.outerWidth-r.right-r.left,s):Pr(t,e.left+c.placed,a,n,s),c.start=a,c.placed+=n,a=t.bottom}else{const n=e.h*h,a=c.size||t.width;B(c.start)&&(s=c.start),t.fullSize?Pr(t,s,r.top,a,i.outerHeight-r.bottom-r.top):Pr(t,s,e.top+c.placed,a,n),c.start=s,c.placed+=n,s=t.right}}e.x=s,e.y=a}ce.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Nr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const r=Ce(t.options.layout.padding),s=Math.max(e-r.width,0),a=Math.max(i-r.height,0),o=Mr(t.boxes),c=o.vertical,h=o.horizontal;v(t.boxes,t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()});const l=c.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:i,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/l,hBoxMaxHeight:a/2}),d=Object.assign({},r);Er(d,Ce(n));const p=Object.assign({maxPadding:d,w:s,h:a,x:r.left,y:r.top},r),f=Tr(c.concat(h),u);Lr(o.fullSize,p,u,f),Lr(c,p,u,f),Lr(h,p,u,f)&&Lr(c,p,u,f),Dr(p),Fr(o.leftAndTop,p,u,f),p.x+=p.w,p.y+=p.h,Fr(o.rightAndBottom,p,u,f),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},v(o.chartArea,e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Rr{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class Ur extends Rr{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Vr="$chartjs",jr={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zr=t=>null===t||""===t;function Wr(t,e){const i=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[Vr]={initial:{height:n,width:r,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",zr(r)){const e=Li(t,"width");void 0!==e&&(t.width=e)}if(zr(n))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Li(t,"height");void 0!==e&&(t.height=e)}return t}const $r=!!Bi&&{passive:!0};function Hr(t,e,i){t.addEventListener(e,i,$r)}function Yr(t,e,i){t.canvas.removeEventListener(e,i,$r)}function qr(t,e){const i=jr[t.type]||t.type,{x:n,y:r}=Mi(t,e);return{type:i,chart:e,native:t,x:void 0!==n?n:null,y:void 0!==r?r:null}}function Gr(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function Kr(t,e,i){const n=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const i of t)e=e||Gr(i.addedNodes,n),e=e&&!Gr(i.removedNodes,n);e&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}function Xr(t,e,i){const n=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const i of t)e=e||Gr(i.removedNodes,n),e=e&&!Gr(i.addedNodes,n);e&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}const Jr=new Map;let Qr=0;function Zr(){const t=window.devicePixelRatio;t!==Qr&&(Qr=t,Jr.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function ts(t,e){Jr.size||window.addEventListener("resize",Zr),Jr.set(t,e)}function es(t){Jr.delete(t),Jr.size||window.removeEventListener("resize",Zr)}function is(t,e,i){const n=t.canvas,s=n&&vi(n);if(!s)return;const a=r((t,e)=>{const n=s.clientWidth;i(t,e),n<s.clientWidth&&i()},window),o=new ResizeObserver(t=>{const e=t[0],i=e.contentRect.width,n=e.contentRect.height;0===i&&0===n||a(i,n)});return o.observe(s),ts(t,a),o}function ns(t,e,i){i&&i.disconnect(),"resize"===e&&es(t)}function rs(t,e,i){const n=t.canvas,s=r(e=>{null!==t.ctx&&i(qr(e,t))},t,t=>{const e=t[0];return[e,e.offsetX,e.offsetY]});return Hr(n,e,s),s}class ss extends Rr{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Wr(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Vr])return!1;const i=e[Vr].initial;["height","width"].forEach(t=>{const n=i[t];u(n)?e.removeAttribute(t):e.setAttribute(t,n)});const n=i.style||{};return Object.keys(n).forEach(t=>{e.style[t]=n[t]}),e.width=e.width,delete e[Vr],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),r={attach:Kr,detach:Xr,resize:is},s=r[e]||rs;n[e]=s(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;const r={attach:ns,detach:ns,resize:ns},s=r[e]||Yr;s(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return Ci(t,e,i,n)}isAttached(t){const e=vi(t);return!(!e||!e.isConnected)}}function as(t){return!_i()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Ur:ss}class os{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return G(this.x)&&G(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach(t=>{n[t]=i[t]&&i[t].active()?i[t]._to:this[t]}),n}}os.defaults={},os.defaultRoutes=void 0;const cs={values(t){return d(t)?t:""+t},numeric(t,e,i){if(0===t)return"0";const n=this.chart.options.locale;let r,s=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),s=hs(t,i)}const a=$(Math.abs(s)),o=Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),Vi(t,n,c)},logarithmic(t,e,i){if(0===t)return"0";const n=t/Math.pow(10,Math.floor($(t)));return 1===n||2===n||5===n?cs.numeric.call(this,t,e,i):""}};function hs(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var ls={formatters:cs};function us(t,e){const i=t.options.ticks,n=i.maxTicksLimit||ds(t),r=i.major.enabled?fs(e):[],s=r.length,a=r[0],o=r[s-1],c=[];if(s>n)return gs(e,c,r,s/n),c;const h=ps(r,e,n);if(s>0){let t,i;const n=s>1?Math.round((o-a)/(s-1)):null;for(ms(e,c,h,u(n)?0:a-n,a),t=0,i=s-1;t<i;t++)ms(e,c,h,r[t],r[t+1]);return ms(e,c,h,o,u(n)?e.length:o+n),c}return ms(e,c,h),c}function ds(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),r=t._maxLength/i;return Math.floor(Math.min(n,r))}function ps(t,e,i){const n=ys(t),r=e.length/i;if(!n)return Math.max(r,1);const s=q(n);for(let a=0,o=s.length-1;a<o;a++){const t=s[a];if(t>r)return t}return Math.max(r,1)}function fs(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}function gs(t,e,i,n){let r,s=0,a=i[0];for(n=Math.ceil(n),r=0;r<t.length;r++)r===a&&(e.push(t[r]),s++,a=i[s*n])}function ms(t,e,i,n,r){const s=m(n,0),a=Math.min(m(r,t.length),t.length);let o,c,h,l=0;i=Math.ceil(i),r&&(o=r-n,i=o/Math.floor(o/i)),h=s;while(h<0)l++,h=Math.round(s+l*i);for(c=Math.max(s,0);c<a;c++)c===h&&(e.push(t[c]),l++,h=Math.round(s+l*i))}function ys(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}ce.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ls.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),ce.route("scale.ticks","color","","color"),ce.route("scale.grid","color","","borderColor"),ce.route("scale.grid","borderColor","","borderColor"),ce.route("scale.title","color","","color"),ce.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),ce.describe("scales",{_fallback:"scale"}),ce.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const bs=t=>"left"===t?"right":"right"===t?"left":t,_s=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i;function vs(t,e){const i=[],n=t.length/e,r=t.length;let s=0;for(;s<r;s+=n)i.push(t[Math.floor(s)]);return i}function xs(t,e,i){const n=t.ticks.length,r=Math.min(e,n-1),s=t._startPixel,a=t._endPixel,o=1e-6;let c,h=t.getPixelForTick(r);if(!(i&&(c=1===n?Math.max(h-s,a-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(r-1))/2,h+=r<e?c:-c,h<s-o||h>a+o)))return h}function ws(t,e){v(t,t=>{const i=t.gc,n=i.length/2;let r;if(n>e){for(r=0;r<n;++r)delete t.data[i[r]];i.splice(0,n)}})}function Ss(t){return t.drawTicks?t.tickLength:0}function Is(t,e){if(!t.display)return 0;const i=De(t.font,e),n=Ce(t.padding),r=d(t.text)?t.text.length:1;return r*i.lineHeight+n.height}function As(t,e){return Pe(t,{scale:e,type:"scale"})}function ks(t,e,i){return Pe(t,{tick:i,index:e,type:"tick"})}function Ts(t,e,i){let n=a(t);return(i&&"right"!==e||!i&&"right"===e)&&(n=bs(n)),n}function Ms(t,e,i,n){const{top:r,left:s,bottom:a,right:c,chart:h}=t,{chartArea:l,scales:u}=h;let d,f,g,m=0;const y=a-r,b=c-s;if(t.isHorizontal()){if(f=o(n,s,c),p(i)){const t=Object.keys(i)[0],n=i[t];g=u[t].getPixelForValue(n)+y-e}else g="center"===i?(l.bottom+l.top)/2+y-e:_s(t,i,e);d=c-s}else{if(p(i)){const t=Object.keys(i)[0],n=i[t];f=u[t].getPixelForValue(n)-b+e}else f="center"===i?(l.left+l.right)/2-b+e:_s(t,i,e);g=o(n,a,r),m="left"===i?-j:j}return{titleX:f,titleY:g,maxWidth:d,rotation:m}}class Os extends os{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=g(t,Number.POSITIVE_INFINITY),e=g(e,Number.NEGATIVE_INFINITY),i=g(i,Number.POSITIVE_INFINITY),n=g(n,Number.NEGATIVE_INFINITY),{min:g(t,i),max:g(e,n),minDefined:f(t),maxDefined:f(e)}}getMinMax(t){let e,{min:i,max:n,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let o=0,c=a.length;o<c;++o)e=a[o].controller.getMinMax(this,t),r||(i=Math.min(i,e.min)),s||(n=Math.max(n,e.max));return i=s&&i>n?n:i,n=r&&i>n?i:n,{min:g(i,g(n,i)),max:g(n,g(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Le(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?vs(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=us(this,this.ticks),this._labelSizes=null),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_(this.options.afterUpdate,[this])}beforeSetDimensions(){_(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,r;for(i=0,n=t.length;i<n;i++)r=t[i],r.label=_(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){_(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=this.ticks.length,n=e.minRotation||0,r=e.maxRotation;let s,a,o,c=n;if(!this._isVisible()||!e.display||n>=r||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const h=this._getLabelSizes(),l=h.widest.width,u=h.highest.height,d=at(this.chart.width-l,0,this.maxWidth);s=t.offset?this.maxWidth/i:d/(i-1),l+6>s&&(s=d/(i-(t.offset?.5:1)),a=this.maxHeight-Ss(t.grid)-e.padding-Is(t.title,this.chart.options.font),o=Math.sqrt(l*l+u*u),c=Z(Math.min(Math.asin(at((h.highest.height+6)/s,-1,1)),Math.asin(at(a/o,-1,1))-Math.asin(at(u/o,-1,1)))),c=Math.max(n,Math.min(r,c))),this.labelRotation=c}afterCalculateLabelRotation(){_(this.options.afterCalculateLabelRotation,[this])}beforeFit(){_(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=Is(n,e.options.font);if(a?(t.width=this.maxWidth,t.height=Ss(r)+s):(t.height=this.maxHeight,t.width=Ss(r)+s),i.display&&this.ticks.length){const{first:e,last:n,widest:r,highest:s}=this._getLabelSizes(),o=2*i.padding,c=Q(this.labelRotation),h=Math.cos(c),l=Math.sin(c);if(a){const e=i.mirror?0:l*r.width+h*s.height;t.height=Math.min(this.maxHeight,t.height+e+o)}else{const e=i.mirror?0:h*r.width+l*s.height;t.width=Math.min(this.maxWidth,t.width+e+o)}this._calculatePadding(e,n,l,h)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:r,padding:s},position:a}=this.options,o=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let l=0,u=0;o?c?(l=n*t.width,u=i*e.height):(l=i*t.height,u=n*e.width):"start"===r?u=e.width:"end"===r?l=t.width:(l=t.width/2,u=e.width/2),this.paddingLeft=Math.max((l-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-h+s)*this.width/(this.width-h),0)}else{let i=e.height/2,n=t.height/2;"start"===r?(i=0,n=t.height):"end"===r&&(i=e.height,n=0),this.paddingTop=i+s,this.paddingBottom=n+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)u(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=vs(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:n}=this,r=[],s=[];let a,o,c,h,l,p,f,g,m,y,b,_=0,v=0;for(a=0;a<e;++a){if(h=t[a].label,l=this._resolveTickFontOptions(a),i.font=p=l.string,f=n[p]=n[p]||{data:{},gc:[]},g=l.lineHeight,m=y=0,u(h)||d(h)){if(d(h))for(o=0,c=h.length;o<c;++o)b=h[o],u(b)||d(b)||(m=le(i,f.data,f.gc,m,b),y+=g)}else m=le(i,f.data,f.gc,m,h),y=g;r.push(m),s.push(y),_=Math.max(m,_),v=Math.max(y,v)}ws(n,e);const x=r.indexOf(_),w=s.indexOf(v),S=t=>({width:r[t]||0,height:s[t]||0});return{first:S(0),last:S(e-1),widest:S(x),highest:S(w),widths:r,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return ot(this._alignToPixels?de(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=ks(this.getContext(),t,i))}return this.$context||(this.$context=As(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Q(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),r=this._getLabelSizes(),s=t.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*i>a*n?a/i:o/n:o*n<a*i?o/i:a/n}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:r,position:s}=n,a=r.offset,o=this.isHorizontal(),c=this.ticks,h=c.length+(a?1:0),l=Ss(r),u=[],d=r.setContext(this.getContext()),f=d.drawBorder?d.borderWidth:0,g=f/2,y=function(t){return de(i,t,f)};let b,_,v,x,w,S,I,A,k,T,M,O;if("top"===s)b=y(this.bottom),S=this.bottom-l,A=b-g,T=y(t.top)+g,O=t.bottom;else if("bottom"===s)b=y(this.top),T=t.top,O=y(t.bottom)-g,S=b+g,A=this.top+l;else if("left"===s)b=y(this.right),w=this.right-l,I=b-g,k=y(t.left)+g,M=t.right;else if("right"===s)b=y(this.left),k=t.left,M=y(t.right)-g,w=b+g,I=this.left+l;else if("x"===e){if("center"===s)b=y((t.top+t.bottom)/2+.5);else if(p(s)){const t=Object.keys(s)[0],e=s[t];b=y(this.chart.scales[t].getPixelForValue(e))}T=t.top,O=t.bottom,S=b+g,A=S+l}else if("y"===e){if("center"===s)b=y((t.left+t.right)/2);else if(p(s)){const t=Object.keys(s)[0],e=s[t];b=y(this.chart.scales[t].getPixelForValue(e))}w=b-g,I=w-l,k=t.left,M=t.right}const E=m(n.ticks.maxTicksLimit,h),C=Math.max(1,Math.ceil(h/E));for(_=0;_<h;_+=C){const t=r.setContext(this.getContext(_)),e=t.lineWidth,n=t.color,s=r.borderDash||[],c=t.borderDashOffset,h=t.tickWidth,l=t.tickColor,d=t.tickBorderDash||[],p=t.tickBorderDashOffset;v=xs(this,_,a),void 0!==v&&(x=de(i,v,e),o?w=I=k=M=x:S=A=T=O=x,u.push({tx1:w,ty1:S,tx2:I,ty2:A,x1:k,y1:T,x2:M,y2:O,width:e,color:n,borderDash:s,borderDashOffset:c,tickWidth:h,tickColor:l,tickBorderDash:d,tickBorderDashOffset:p}))}return this._ticksLength=h,this._borderValue=b,u}_computeLabelItems(t){const e=this.axis,i=this.options,{position:n,ticks:r}=i,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:c,padding:h,mirror:l}=r,u=Ss(i.grid),f=u+h,g=l?-h:f,m=-Q(this.labelRotation),y=[];let b,_,v,x,w,S,I,A,k,T,M,O,E="middle";if("top"===n)S=this.bottom-g,I=this._getXAxisLabelAlignment();else if("bottom"===n)S=this.top+g,I=this._getXAxisLabelAlignment();else if("left"===n){const t=this._getYAxisLabelAlignment(u);I=t.textAlign,w=t.x}else if("right"===n){const t=this._getYAxisLabelAlignment(u);I=t.textAlign,w=t.x}else if("x"===e){if("center"===n)S=(t.top+t.bottom)/2+f;else if(p(n)){const t=Object.keys(n)[0],e=n[t];S=this.chart.scales[t].getPixelForValue(e)+f}I=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===n)w=(t.left+t.right)/2-f;else if(p(n)){const t=Object.keys(n)[0],e=n[t];w=this.chart.scales[t].getPixelForValue(e)}I=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===o?E="top":"end"===o&&(E="bottom"));const C=this._getLabelSizes();for(b=0,_=a.length;b<_;++b){v=a[b],x=v.label;const t=r.setContext(this.getContext(b));A=this.getPixelForTick(b)+r.labelOffset,k=this._resolveTickFontOptions(b),T=k.lineHeight,M=d(x)?x.length:1;const e=M/2,i=t.color,o=t.textStrokeColor,h=t.textStrokeWidth;let u;if(s?(w=A,O="top"===n?"near"===c||0!==m?-M*T+T/2:"center"===c?-C.highest.height/2-e*T+T:-C.highest.height+T/2:"near"===c||0!==m?T/2:"center"===c?C.highest.height/2-e*T:C.highest.height-M*T,l&&(O*=-1)):(S=A,O=(1-M)*T/2),t.showLabelBackdrop){const e=Ce(t.backdropPadding),i=C.heights[b],n=C.widths[b];let r=S+O-e.top,s=w-e.left;switch(E){case"middle":r-=i/2;break;case"bottom":r-=i;break}switch(I){case"center":s-=n/2;break;case"right":s-=n;break}u={left:s,top:r,width:n+e.width,height:i+e.height,color:t.backdropColor}}y.push({rotation:m,label:x,font:k,color:i,strokeColor:o,strokeWidth:h,textOffset:O,textAlign:I,textBaseline:E,translation:[w,S],backdrop:u})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options,i=-Q(this.labelRotation);if(i)return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align&&(n="right"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:r}}=this.options,s=this._getLabelSizes(),a=t+r,o=s.widest.width;let c,h;return"left"===e?n?(h=this.right+r,"near"===i?c="left":"center"===i?(c="center",h+=o/2):(c="right",h+=o)):(h=this.right-a,"near"===i?c="right":"center"===i?(c="center",h-=o/2):(c="left",h=this.left)):"right"===e?n?(h=this.left+r,"near"===i?c="right":"center"===i?(c="center",h-=o/2):(c="left",h-=o)):(h=this.left+a,"near"===i?c="left":"center"===i?(c="center",h+=o/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:r,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,r,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks,n=i.findIndex(e=>e.value===t);if(n>=0){const t=e.setContext(this.getContext(n));return t.lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,s;const a=(t,e,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(r=0,s=n.length;r<s;++r){const t=n[r];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:i}}=this,n=i.setContext(this.getContext()),r=i.drawBorder?n.borderWidth:0;if(!r)return;const s=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let o,c,h,l;this.isHorizontal()?(o=de(t,this.left,r)-r/2,c=de(t,this.right,s)+s/2,h=l=a):(h=de(t,this.top,r)-r/2,l=de(t,this.bottom,s)+s/2,o=c=a),e.save(),e.lineWidth=n.borderWidth,e.strokeStyle=n.borderColor,e.beginPath(),e.moveTo(o,h),e.lineTo(c,l),e.stroke(),e.restore()}drawLabels(t){const e=this.options.ticks;if(!e.display)return;const i=this.ctx,n=this._computeLabelArea();n&&me(i,n);const r=this._labelItems||(this._labelItems=this._computeLabelItems(t));let s,a;for(s=0,a=r.length;s<a;++s){const t=r[s],e=t.font,n=t.label;t.backdrop&&(i.fillStyle=t.backdrop.color,i.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height));let a=t.textOffset;ve(i,n,0,a,e,t)}n&&ye(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const r=De(i.font),s=Ce(i.padding),a=i.align;let o=r.lineHeight/2;"bottom"===e||"center"===e||p(e)?(o+=s.bottom,d(i.text)&&(o+=r.lineHeight*(i.text.length-1))):o+=s.top;const{titleX:c,titleY:h,maxWidth:l,rotation:u}=Ms(this,o,e,a);ve(t,i.text,0,0,r,{color:i.color,maxWidth:l,rotation:u,textAlign:Ts(a,e,n),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=m(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Os.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let r,s;for(r=0,s=e.length;r<s;++r){const s=e[r];s[i]!==this.id||t&&s.type!==t||n.push(s)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return De(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Es{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;Bs(e)&&(i=this.register(e));const n=this.items,r=t.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,Cs(t,s,i),this.override&&ce.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in ce[n]&&(delete ce[n][i],this.override&&delete ne[i])}}function Cs(t,e,i){const n=A(Object.create(null),[i?ce.get(i):{},ce.get(e),t.defaults]);ce.set(e,n),t.defaultRoutes&&Ds(e,t.defaultRoutes),t.descriptors&&ce.describe(e,t.descriptors)}function Ds(t,e){Object.keys(e).forEach(i=>{const n=i.split("."),r=n.pop(),s=[t].concat(n).join("."),a=e[i].split("."),o=a.pop(),c=a.join(".");ce.route(s,r,c,o)})}function Bs(t){return"id"in t&&"defaults"in t}class Ls{constructor(){this.controllers=new Es(Pn,"datasets",!0),this.elements=new Es(os,"elements"),this.plugins=new Es(Object,"plugins"),this.scales=new Es(Os,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(e=>{const n=i||this._getRegistryForType(e);i||n.isForType(e)||n===this.plugins&&e.id?this._exec(t,n,e):v(e,e=>{const n=i||this._getRegistryForType(e);this._exec(t,n,e)})})}_exec(t,e,i){const n=D(t);_(i["before"+n],[],i),e[t](i),_(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var Ps=new Ls;class Fs{constructor(){this._init=[]}notify(t,e,i,n){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=n?this._descriptors(t).filter(n):this._descriptors(t),s=this._notify(r,t,e,i);return"destroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,i,n){n=n||{};for(const r of t){const t=r.plugin,s=t[i],a=[e,n,r.options];if(!1===_(s,a,t)&&n.cancelable)return!1}return!0}invalidate(){u(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=m(i.options&&i.options.plugins,{}),r=Ns(i);return!1!==n||e?Us(t,r,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function Ns(t){const e=[],i=Object.keys(Ps.plugins.items);for(let r=0;r<i.length;r++)e.push(Ps.getPlugin(i[r]));const n=t.plugins||[];for(let r=0;r<n.length;r++){const t=n[r];-1===e.indexOf(t)&&e.push(t)}return e}function Rs(t,e){return e||!1!==t?!0===t?{}:t:null}function Us(t,e,i,n){const r=[],s=t.getContext();for(let a=0;a<e.length;a++){const o=e[a],c=o.id,h=Rs(i[c],n);null!==h&&r.push({plugin:o,options:Vs(t.config,o,h,s)})}return r}function Vs(t,e,i,n){const r=t.pluginScopeKeys(e),s=t.getOptionScopes(i,r);return t.createResolver(s,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function js(t,e){const i=ce.datasets[t]||{},n=(e.datasets||{})[t]||{};return n.indexAxis||e.indexAxis||i.indexAxis||"x"}function zs(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}function Ws(t,e){return t===e?"_index_":"_value_"}function $s(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function Hs(t,e){return"x"===t||"y"===t?t:e.axis||$s(e.position)||t.charAt(0).toLowerCase()}function Ys(t,e){const i=ne[t.type]||{scales:{}},n=e.scales||{},r=js(t.type,e),s=Object.create(null),a=Object.create(null);return Object.keys(n).forEach(t=>{const e=n[t];if(!p(e))return console.error("Invalid scale configuration for scale: "+t);if(e._proxy)return console.warn("Ignoring resolver passed as options for scale: "+t);const o=Hs(t,e),c=Ws(o,r),h=i.scales||{};s[o]=s[o]||t,a[t]=k(Object.create(null),[{axis:o},e,h[o],h[c]])}),t.data.datasets.forEach(i=>{const r=i.type||t.type,o=i.indexAxis||js(r,e),c=ne[r]||{},h=c.scales||{};Object.keys(h).forEach(t=>{const e=zs(t,o),r=i[e+"AxisID"]||s[e]||e;a[r]=a[r]||Object.create(null),k(a[r],[{axis:e},n[r],h[t]])})}),Object.keys(a).forEach(t=>{const e=a[t];k(e,[ce.scales[e.type],ce.scale])}),a}function qs(t){const e=t.options||(t.options={});e.plugins=m(e.plugins,{}),e.scales=Ys(t,e)}function Gs(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Ks(t){return t=t||{},t.data=Gs(t.data),qs(t),t}const Xs=new Map,Js=new Set;function Qs(t,e){let i=Xs.get(t);return i||(i=e(),Xs.set(t,i),Js.add(i)),i}const Zs=(t,e,i)=>{const n=C(e,i);void 0!==n&&t.add(n)};class ta{constructor(t){this._config=Ks(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Gs(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qs(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Qs(t,()=>[["datasets."+t,""]])}datasetAnimationScopeKeys(t,e){return Qs(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,"transitions."+e],["datasets."+t,""]])}datasetElementScopeKeys(t,e){return Qs(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,"datasets."+t,"elements."+e,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Qs(`${i}-plugin-${e}`,()=>[["plugins."+e,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return n&&!e||(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:r}=this,s=this._cachedScopes(t,i),a=s.get(e);if(a)return a;const o=new Set;e.forEach(e=>{t&&(o.add(t),e.forEach(e=>Zs(o,t,e))),e.forEach(t=>Zs(o,n,t)),e.forEach(t=>Zs(o,ne[r]||{},t)),e.forEach(t=>Zs(o,ce,t)),e.forEach(t=>Zs(o,re,t))});const c=Array.from(o);return 0===c.length&&c.push(Object.create(null)),Js.has(e)&&s.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,ne[e]||{},ce.datasets[e]||{},{type:e},ce,re]}resolveNamedOptions(t,e,i,n=[""]){const r={$shared:!0},{resolver:s,subPrefixes:a}=ea(this._resolverCache,t,n);let o=s;if(na(s,e)){r.$shared=!1,i=L(i)?i():i;const e=this.createResolver(t,i,a);o=He(s,i,e)}for(const c of e)r[c]=o[c];return r}createResolver(t,e,i=[""],n){const{resolver:r}=ea(this._resolverCache,t,i);return p(e)?He(r,e,void 0,n):r}}function ea(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=i.join();let s=n.get(r);if(!s){const t=$e(e,i);s={resolver:t,subPrefixes:i.filter(t=>!t.toLowerCase().includes("hover"))},n.set(r,s)}return s}const ia=t=>p(t)&&Object.getOwnPropertyNames(t).reduce((e,i)=>e||L(t[i]),!1);function na(t,e){const{isScriptable:i,isIndexable:n}=Ye(t);for(const r of e){const e=i(r),s=n(r),a=(s||e)&&t[r];if(e&&(L(a)||ia(a))||s&&d(a))return!0}return!1}var ra="3.6.2";const sa=["top","bottom","left","right","chartArea"];function aa(t,e){return"top"===t||"bottom"===t||-1===sa.indexOf(t)&&"x"===e}function oa(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function ca(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),_(i&&i.onComplete,[t],e)}function ha(t){const e=t.chart,i=e.options.animation;_(i&&i.onProgress,[t],e)}function la(t){return _i()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ua={},da=t=>{const e=la(t);return Object.values(ua).filter(t=>t.canvas===e).pop()};function pa(t,e,i){const n=Object.keys(t);for(const r of n){const n=+r;if(n>=e){const s=t[r];delete t[r],(i>0||n>e)&&(t[n+i]=s)}}}class fa{constructor(t,e){const i=this.config=new ta(e),n=la(t),r=da(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||as(n)),this.platform.updateConfig(i);const o=this.platform.acquireContext(n,a.aspectRatio),c=o&&o.canvas,h=c&&c.height,u=c&&c.width;this.id=l(),this.ctx=o,this.canvas=c,this.width=u,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Fs,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=s(t=>this.update(t),a.resizeDelay||0),this._dataChanges=[],ua[this.id]=this,o&&c?(an.listen(this,"complete",ca),an.listen(this,"progress",ha),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:r}=this;return u(t)?e&&r?r:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Di(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return pe(this.canvas,this.ctx),this}stop(){return an.stop(this),this}resize(t,e){an.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,n=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(n,t,e,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Di(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),_(i.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){const t=this.options,e=t.scales||{};v(e,(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,n=Object.keys(i).reduce((t,e)=>(t[e]=!1,t),{});let r=[];e&&(r=r.concat(Object.keys(e).map(t=>{const i=e[t],n=Hs(t,i),r="r"===n,s="x"===n;return{options:i,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),v(r,e=>{const r=e.options,s=r.id,a=Hs(s,r),o=m(r.type,e.dtype);void 0!==r.position&&aa(r.position,a)===aa(e.dposition)||(r.position=e.dposition),n[s]=!0;let c=null;if(s in i&&i[s].type===o)c=i[s];else{const t=Ps.getScale(o);c=new t({id:s,type:o,ctx:this.ctx,chart:this}),i[c.id]=c}c.init(r,t)}),v(n,(t,e)=>{t||delete i[e]}),v(i,t=>{Nr.configure(this,t,t.options),Nr.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((t,e)=>t.index-e.index),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(oa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,i)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=e.length;i<n;i++){const n=e[i];let r=this.getDatasetMeta(i);const s=n.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=s,r.indexAxis=n.indexAxis||js(s,this.options),r.order=n.order||0,r.index=i,r.label=""+n.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const e=Ps.getController(s),{datasetElementType:n,dataElementType:a}=ce.datasets[s];Object.assign(e.prototype,{dataElementType:Ps.getElement(a),datasetElementType:n&&Ps.getElement(n)}),r.controller=new e(this,i),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){v(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let a=0,o=this.data.datasets.length;a<o;a++){const{controller:t}=this.getDatasetMeta(a),e=!n&&-1===r.indexOf(t);t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),n||v(r,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(oa("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}_updateScales(){v(this.scales,t=>{Nr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);P(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:r}of e){const e="_removeElements"===i?-r:r;pa(t,n,e)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),n=i(0);for(let r=1;r<e;r++)if(!P(n,i(r)))return;return Array.from(n).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Nr.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],v(this.boxes,t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,L(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(an.has(this)?this.attached&&!an.running(this)&&an.start(this):(this.draw(),ca({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,r;for(n=0,r=e.length;n<r;++n){const r=e[n];t&&!r.visible||i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,n=!i.disabled,r=this.chartArea,s={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(n&&me(e,{left:!1===i.left?0:r.left-i.left,right:!1===i.right?this.width:r.right+i.right,top:!1===i.top?0:r.top-i.top,bottom:!1===i.bottom?this.height:r.bottom+i.bottom}),t.controller.draw(),n&&ye(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}getElementsAtEventForMode(t,e,i,n){const r=vr.modes[e];return"function"===typeof r?r(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter(t=>t&&t._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Pe(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"===typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=i?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,n);B(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),s.update(r,{visible:i}),this.update(e=>e.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),an.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),pe(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ua[this.id]}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};v(this.options.events,t=>i(t,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(i,n)=>{t[i]&&(e.removeEventListener(this,i,n),delete t[i])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const a=()=>{n("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",s)};s=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():s()}unbindEvents(){v(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},v(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let r,s,a,o;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,o=t.length;a<o;++a){s=t[a];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}),n=!x(i,e);n&&(this._active=i,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const n=this.options.hover,r=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=r(e,t),a=i?t:r(t,e);s.length&&this.updateHoverStyle(s,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0},n=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const r=this._handleEvent(t,e);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(r||i.changed)&&this.render(),this}_handleEvent(t,e){const{_active:i=[],options:n}=this,r=n.hover,s=e;let a=[],o=!1,c=null;return"mouseout"!==t.type&&(a=this.getElementsAtEventForMode(t,r.mode,r,s),c="click"===t.type?this._lastEvent:t),this._lastEvent=null,ge(t,this.chartArea,this._minPadding)&&(_(n.onHover,[t,a,this],this),"mouseup"!==t.type&&"click"!==t.type&&"contextmenu"!==t.type||_(n.onClick,[t,a,this],this)),o=!x(a,i),(o||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=c,o}}const ga=()=>v(fa.instances,t=>t._plugins.invalidate()),ma=!0;function ya(t,e,i){const{startAngle:n,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:c}=e;let h=r/o;t.beginPath(),t.arc(s,a,o,n-h,i+h),c>r?(h=r/c,t.arc(s,a,c,i+h,n-h,!0)):t.arc(s,a,r,i+j,n-j),t.closePath(),t.clip()}function ba(t){return Me(t,["outerStart","outerEnd","innerStart","innerEnd"])}function _a(t,e,i,n){const r=ba(t.options.borderRadius),s=(i-e)/2,a=Math.min(s,n*e/2),o=t=>{const e=(i-Math.min(s,t))*n/2;return at(t,0,Math.min(s,e))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:at(r.innerStart,0,a),innerEnd:at(r.innerEnd,0,a)}}function va(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function xa(t,e,i,n,r){const{x:s,y:a,startAngle:o,pixelMargin:c,innerRadius:h}=e,l=Math.max(e.outerRadius+n+i-c,0),u=h>0?h+n+i+c:0;let d=0;const p=r-o;if(n){const t=h>0?h-n:0,e=l>0?l-n:0,i=(t+e)/2,r=0!==i?p*i/(i+n):p;d=(p-r)/2}const f=Math.max(.001,p*l-i/F)/l,g=(p-f)/2,m=o+g+d,y=r-g-d,{outerStart:b,outerEnd:_,innerStart:v,innerEnd:x}=_a(e,u,l,y-m),w=l-b,S=l-_,I=m+b/w,A=y-_/S,k=u+v,T=u+x,M=m+v/k,O=y-x/T;if(t.beginPath(),t.arc(s,a,l,I,A),_>0){const e=va(S,A,s,a);t.arc(e.x,e.y,_,A,y+j)}const E=va(T,y,s,a);if(t.lineTo(E.x,E.y),x>0){const e=va(T,O,s,a);t.arc(e.x,e.y,x,y+j,O+Math.PI)}if(t.arc(s,a,u,y-x/u,m+v/u,!0),v>0){const e=va(k,M,s,a);t.arc(e.x,e.y,v,M+Math.PI,m-j)}const C=va(w,m,s,a);if(t.lineTo(C.x,C.y),b>0){const e=va(w,I,s,a);t.arc(e.x,e.y,b,m-j,I)}t.closePath()}function wa(t,e,i,n){const{fullCircles:r,startAngle:s,circumference:a}=e;let o=e.endAngle;if(r){xa(t,e,i,n,s+N);for(let e=0;e<r;++e)t.fill();isNaN(a)||(o=s+a%N,a%N===0&&(o+=N))}return xa(t,e,i,n,o),t.fill(),o}function Sa(t,e,i){const{x:n,y:r,startAngle:s,pixelMargin:a,fullCircles:o}=e,c=Math.max(e.outerRadius-a,0),h=e.innerRadius+a;let l;for(i&&ya(t,e,s+N),t.beginPath(),t.arc(n,r,h,s+N,s,!0),l=0;l<o;++l)t.stroke();for(t.beginPath(),t.arc(n,r,c,s,s+N),l=0;l<o;++l)t.stroke()}function Ia(t,e,i,n,r){const{options:s}=e,a="inner"===s.borderAlign;s.borderWidth&&(a?(t.lineWidth=2*s.borderWidth,t.lineJoin="round"):(t.lineWidth=s.borderWidth,t.lineJoin="bevel"),e.fullCircles&&Sa(t,e,a),a&&ya(t,e,r),xa(t,e,i,n,r),t.stroke())}Object.defineProperties(fa,{defaults:{enumerable:ma,value:ce},instances:{enumerable:ma,value:ua},overrides:{enumerable:ma,value:ne},registry:{enumerable:ma,value:Ps},version:{enumerable:ma,value:ra},getChart:{enumerable:ma,value:da},register:{enumerable:ma,value:(...t)=>{Ps.add(...t),ga()}},unregister:{enumerable:ma,value:(...t)=>{Ps.remove(...t),ga()}}});class Aa extends os{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.getProps(["x","y"],i),{angle:r,distance:s}=et(n,{x:t,y:e}),{startAngle:a,endAngle:o,innerRadius:c,outerRadius:h,circumference:l}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=this.options.spacing/2,d=m(l,o-a),p=d>=N||st(r,a,o),f=ct(s,c+u,h+u);return p&&f}getCenterPoint(t){const{x:e,y:i,startAngle:n,endAngle:r,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:o,spacing:c}=this.options,h=(n+r)/2,l=(s+a+c+o)/2;return{x:e+Math.cos(h)*l,y:i+Math.sin(h)*l}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,n=(e.offset||0)/2,r=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>N?Math.floor(i/N):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let s=0;if(n){s=n/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*s,Math.sin(e)*s),this.circumference>=F&&(s=n)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const a=wa(t,this,s,r);Ia(t,this,s,r,a),t.restore()}}function ka(t,e,i=e){t.lineCap=m(i.borderCapStyle,e.borderCapStyle),t.setLineDash(m(i.borderDash,e.borderDash)),t.lineDashOffset=m(i.borderDashOffset,e.borderDashOffset),t.lineJoin=m(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=m(i.borderWidth,e.borderWidth),t.strokeStyle=m(i.borderColor,e.borderColor)}function Ta(t,e,i){t.lineTo(i.x,i.y)}function Ma(t){return t.stepped?be:t.tension||"monotone"===t.cubicInterpolationMode?_e:Ta}function Oa(t,e,i={}){const n=t.length,{start:r=0,end:s=n-1}=i,{start:a,end:o}=e,c=Math.max(r,a),h=Math.min(s,o),l=r<a&&s<a||r>o&&s>o;return{count:n,start:c,loop:e.loop,ilen:h<c&&!l?n+h-c:h-c}}function Ea(t,e,i,n){const{points:r,options:s}=e,{count:a,start:o,loop:c,ilen:h}=Oa(r,i,n),l=Ma(s);let u,d,p,{move:f=!0,reverse:g}=n||{};for(u=0;u<=h;++u)d=r[(o+(g?h-u:u))%a],d.skip||(f?(t.moveTo(d.x,d.y),f=!1):l(t,p,d,g,s.stepped),p=d);return c&&(d=r[(o+(g?h:0))%a],l(t,p,d,g,s.stepped)),!!c}function Ca(t,e,i,n){const r=e.points,{count:s,start:a,ilen:o}=Oa(r,i,n),{move:c=!0,reverse:h}=n||{};let l,u,d,p,f,g,m=0,y=0;const b=t=>(a+(h?o-t:t))%s,_=()=>{p!==f&&(t.lineTo(m,f),t.lineTo(m,p),t.lineTo(m,g))};for(c&&(u=r[b(0)],t.moveTo(u.x,u.y)),l=0;l<=o;++l){if(u=r[b(l)],u.skip)continue;const e=u.x,i=u.y,n=0|e;n===d?(i<p?p=i:i>f&&(f=i),m=(y*m+e)/++y):(_(),t.lineTo(e,i),d=n,y=0,p=f=i),g=i}_()}function Da(t){const e=t.options,i=e.borderDash&&e.borderDash.length,n=!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!i;return n?Ca:Ea}function Ba(t){return t.stepped?Fi:t.tension||"monotone"===t.cubicInterpolationMode?Ni:Pi}function La(t,e,i,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,i,n)&&r.closePath()),ka(t,e.options),t.stroke(r)}function Pa(t,e,i,n){const{segments:r,options:s}=e,a=Da(e);for(const o of r)ka(t,s,o.style),t.beginPath(),a(t,e,o,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}Aa.id="arc",Aa.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Aa.defaultRoutes={backgroundColor:"backgroundColor"};const Fa="function"===typeof Path2D;function Na(t,e,i,n){Fa&&!e.options.segment?La(t,e,i,n):Pa(t,e,i,n)}class Ra extends os{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;bi(this._points,i,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Zi(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,n=t[e],r=this.points,s=Xi(this,{property:e,start:n,end:n});if(!s.length)return;const a=[],o=Ba(i);let c,h;for(c=0,h=s.length;c<h;++c){const{start:h,end:l}=s[c],u=r[h],d=r[l];if(u===d){a.push(u);continue}const p=Math.abs((n-u[e])/(d[e]-u[e])),f=o(u,d,p,i.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,i){const n=Da(this);return n(t,this,e,i)}path(t,e,i){const n=this.segments,r=Da(this);let s=this._loop;e=e||0,i=i||this.points.length-e;for(const a of n)s&=r(t,this,a,{start:e,end:e+i-1});return!!s}draw(t,e,i,n){const r=this.options||{},s=this.points||[];s.length&&r.borderWidth&&(t.save(),Na(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ua(t,e,i,n){const r=t.options,{[i]:s}=t.getProps([i],n);return Math.abs(e-s)<r.radius+r.hitRadius}Ra.id="line",Ra.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Ra.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Ra.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class Va extends os{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.options,{x:r,y:s}=this.getProps(["x","y"],i);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return Ua(this,t,"x",e)}inYRange(t,e){return Ua(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return 2*(e+i)}draw(t,e){const i=this.options;this.skip||i.radius<.1||!ge(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,fe(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function ja(t,e){const{x:i,y:n,base:r,width:s,height:a}=t.getProps(["x","y","base","width","height"],e);let o,c,h,l,u;return t.horizontal?(u=a/2,o=Math.min(i,r),c=Math.max(i,r),h=n-u,l=n+u):(u=s/2,o=i-u,c=i+u,h=Math.min(n,r),l=Math.max(n,r)),{left:o,top:h,right:c,bottom:l}}function za(t,e,i,n){return t?0:at(e,i,n)}function Wa(t,e,i){const n=t.options.borderWidth,r=t.borderSkipped,s=Oe(n);return{t:za(r.top,s.top,0,i),r:za(r.right,s.right,0,e),b:za(r.bottom,s.bottom,0,i),l:za(r.left,s.left,0,e)}}function $a(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Ee(r),a=Math.min(e,i),o=t.borderSkipped,c=n||p(r);return{topLeft:za(!c||o.top||o.left,s.topLeft,0,a),topRight:za(!c||o.top||o.right,s.topRight,0,a),bottomLeft:za(!c||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:za(!c||o.bottom||o.right,s.bottomRight,0,a)}}function Ha(t){const e=ja(t),i=e.right-e.left,n=e.bottom-e.top,r=Wa(t,i/2,n/2),s=$a(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:i-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Ya(t,e,i,n){const r=null===e,s=null===i,a=r&&s,o=t&&!a&&ja(t,n);return o&&(r||ct(e,o.left,o.right))&&(s||ct(i,o.top,o.bottom))}function qa(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Ga(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ka(t,e,i={}){const n=t.x!==i.x?-e:0,r=t.y!==i.y?-e:0,s=(t.x+t.w!==i.x+i.w?e:0)-n,a=(t.y+t.h!==i.y+i.h?e:0)-r;return{x:t.x+n,y:t.y+r,w:t.w+s,h:t.h+a,radius:t.radius}}Va.id="point",Va.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Va.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Xa extends os{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:n}}=this,{inner:r,outer:s}=Ha(this),a=qa(s.radius)?Se:Ga;t.save(),s.w===r.w&&s.h===r.h||(t.beginPath(),a(t,Ka(s,e,r)),t.clip(),a(t,Ka(r,-e,s)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Ka(r,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,i){return Ya(this,t,e,i)}inXRange(t,e){return Ya(this,t,null,e)}inYRange(t,e){return Ya(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+n)/2:e,y:r?i:(i+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}Xa.id="bar",Xa.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Xa.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Ja=Object.freeze({__proto__:null,ArcElement:Aa,LineElement:Ra,PointElement:Va,BarElement:Xa});function Qa(t,e,i,n,r){const s=r.samples||n;if(s>=i)return t.slice(e,e+i);const a=[],o=(i-2)/(s-2);let c=0;const h=e+i-1;let l,u,d,p,f,g=e;for(a[c++]=t[g],l=0;l<s-2;l++){let n,r=0,s=0;const h=Math.floor((l+1)*o)+1+e,m=Math.min(Math.floor((l+2)*o)+1,i)+e,y=m-h;for(n=h;n<m;n++)r+=t[n].x,s+=t[n].y;r/=y,s/=y;const b=Math.floor(l*o)+1+e,_=Math.min(Math.floor((l+1)*o)+1,i)+e,{x:v,y:x}=t[g];for(d=p=-1,n=b;n<_;n++)p=.5*Math.abs((v-r)*(t[n].y-x)-(v-t[n].x)*(s-x)),p>d&&(d=p,u=t[n],f=n);a[c++]=u,g=f}return a[c++]=t[h],a}function Za(t,e,i,n){let r,s,a,o,c,h,l,d,p,f,g=0,m=0;const y=[],b=e+i-1,_=t[e].x,v=t[b].x,x=v-_;for(r=e;r<e+i;++r){s=t[r],a=(s.x-_)/x*n,o=s.y;const e=0|a;if(e===c)o<p?(p=o,h=r):o>f&&(f=o,l=r),g=(m*g+s.x)/++m;else{const i=r-1;if(!u(h)&&!u(l)){const e=Math.min(h,l),n=Math.max(h,l);e!==d&&e!==i&&y.push({...t[e],x:g}),n!==d&&n!==i&&y.push({...t[n],x:g})}r>0&&i!==d&&y.push(t[i]),y.push(s),c=e,m=0,p=f=o,h=l=d=r}}return y}function to(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function eo(t){t.data.datasets.forEach(t=>{to(t)})}function io(t,e){const i=e.length;let n,r=0;const{iScale:s}=t,{min:a,max:o,minDefined:c,maxDefined:h}=s.getUserBounds();return c&&(r=at(Ne(e,s.axis,a).lo,0,i-1)),n=h?at(Ne(e,s.axis,o).hi+1,r,i)-r:i-r,{start:r,count:n}}var no={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void eo(t);const n=t.width;t.data.datasets.forEach((e,r)=>{const{_data:s,indexAxis:a}=e,o=t.getDatasetMeta(r),c=s||e.data;if("y"===Be([a,t.options.indexAxis]))return;if("line"!==o.type)return;const h=t.scales[o.xAxisID];if("linear"!==h.type&&"time"!==h.type)return;if(t.options.parsing)return;let{start:l,count:d}=io(o,c);const p=i.threshold||4*n;if(d<=p)return void to(e);let f;switch(u(s)&&(e._data=c,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":f=Qa(c,l,d,n,i);break;case"min-max":f=Za(c,l,d,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=f})},destroy(t){eo(t)}};function ro(t,e){const i=t.getDatasetMeta(e),n=i&&t.isDatasetVisible(e);return n?i.dataset:null}function so(t){const e=t.options,i=e.fill;let n=m(i&&i.target,i);return void 0===n&&(n=!!e.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}function ao(t,e,i){const n=so(t);if(p(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return f(r)&&Math.floor(r)===r?("-"!==n[0]&&"+"!==n[0]||(r=e+r),!(r===e||r<0||r>=i)&&r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function oo(t){const{scale:e={},fill:i}=t;let n,r=null;return"start"===i?r=e.bottom:"end"===i?r=e.top:p(i)?r=e.getPixelForValue(i.value):e.getBasePixel&&(r=e.getBasePixel()),f(r)?(n=e.isHorizontal(),{x:n?r:null,y:n?null:r}):null}class co{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:r,radius:s}=this;return e=e||{start:0,end:N},t.arc(n,r,s,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,r=t.angle;return{x:e+Math.cos(r)*n,y:i+Math.sin(r)*n,angle:r}}}function ho(t){const{scale:e,fill:i}=t,n=e.options,r=e.getLabels().length,s=[],a=n.reverse?e.max:e.min,o=n.reverse?e.min:e.max;let c,h,l;if(l="start"===i?a:"end"===i?o:p(i)?i.value:e.getBaseValue(),n.grid.circular)return h=e.getPointPositionForValue(0,a),new co({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(l)});for(c=0;c<r;++c)s.push(e.getPointPositionForValue(c,l));return s}function lo(t){const e=t.scale||{};return e.getPointPositionForValue?ho(t):oo(t)}function uo(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function po(t,e){const{x:i=null,y:n=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:t,end:e})=>{e=uo(t,e,r);const a=r[t],o=r[e];null!==n?(s.push({x:a.x,y:n}),s.push({x:o.x,y:n})):null!==i&&(s.push({x:i,y:a.y}),s.push({x:i,y:o.y}))}),s}function fo(t){const{scale:e,index:i,line:n}=t,r=[],s=n.segments,a=n.points,o=go(e,i);o.push(_o({x:null,y:e.bottom},n));for(let c=0;c<s.length;c++){const t=s[c];for(let e=t.start;e<=t.end;e++)mo(r,a[e],o)}return new Ra({points:r,options:{}})}function go(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const t=n[r];if(t.index===e)break;t.hidden||i.unshift(t.dataset)}return i}function mo(t,e,i){const n=[];for(let r=0;r<i.length;r++){const s=i[r],{first:a,last:o,point:c}=yo(s,e,"x");if(!(!c||a&&o))if(a)n.unshift(c);else if(t.push(c),!o)break}t.push(...n)}function yo(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const r=n[i],s=t.segments,a=t.points;let o=!1,c=!1;for(let h=0;h<s.length;h++){const t=s[h],e=a[t.start][i],n=a[t.end][i];if(ct(r,e,n)){o=r===e,c=r===n;break}}return{first:o,last:c,point:n}}function bo(t){const{chart:e,fill:i,line:n}=t;if(f(i))return ro(e,i);if("stack"===i)return fo(t);if("shape"===i)return!0;const r=lo(t);return r instanceof co?r:_o(r,n)}function _o(t,e){let i=[],n=!1;return d(t)?(n=!0,i=t):i=po(t,e),i.length?new Ra({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function vo(t,e,i){const n=t[e];let r=n.fill;const s=[e];let a;if(!i)return r;while(!1!==r&&-1===s.indexOf(r)){if(!f(r))return r;if(a=t[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function xo(t,e,i){t.beginPath(),e.path(t),t.lineTo(e.last().x,i),t.lineTo(e.first().x,i),t.closePath(),t.clip()}function wo(t,e,i,n){if(n)return;let r=e[t],s=i[t];return"angle"===t&&(r=rt(r),s=rt(s)),{property:t,start:r,end:s}}function So(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function Io(t,e,i){const n=t.segments,r=t.points,s=e.points,a=[];for(const o of n){let{start:t,end:n}=o;n=uo(t,n,r);const c=wo(i,r[t],r[n],o.loop);if(!e.segments){a.push({source:o,target:c,start:r[t],end:r[n]});continue}const h=Xi(e,c);for(const e of h){const t=wo(i,s[e.start],s[e.end],e.loop),n=Ki(o,r,t);for(const r of n)a.push({source:r,target:e,start:{[i]:So(c,t,"start",Math.max)},end:{[i]:So(c,t,"end",Math.min)}})}}return a}function Ao(t,e,i){const{top:n,bottom:r}=e.chart.chartArea,{property:s,start:a,end:o}=i||{};"x"===s&&(t.beginPath(),t.rect(a,n,o-a,r-n),t.clip())}function ko(t,e,i,n){const r=e.interpolate(i,n);r&&t.lineTo(r.x,r.y)}function To(t,e){const{line:i,target:n,property:r,color:s,scale:a}=e,o=Io(i,n,r);for(const{source:c,target:h,start:l,end:u}of o){const{style:{backgroundColor:e=s}={}}=c,o=!0!==n;t.save(),t.fillStyle=e,Ao(t,a,o&&wo(r,l,u)),t.beginPath();const d=!!i.pathSegment(t,c);let p;if(o){d?t.closePath():ko(t,n,u,r);const e=!!n.pathSegment(t,h,{move:d,reverse:!0});p=d&&e,p||ko(t,n,l,r)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function Mo(t,e){const{line:i,target:n,above:r,below:s,area:a,scale:o}=e,c=i._loop?"angle":e.axis;t.save(),"x"===c&&s!==r&&(xo(t,n,a.top),To(t,{line:i,target:n,color:r,scale:o,property:c}),t.restore(),t.save(),xo(t,n,a.bottom)),To(t,{line:i,target:n,color:s,scale:o,property:c}),t.restore()}function Oo(t,e,i){const n=bo(e),{line:r,scale:s,axis:a}=e,o=r.options,c=o.fill,h=o.backgroundColor,{above:l=h,below:u=h}=c||{};n&&r.points.length&&(me(t,i),Mo(t,{line:r,target:n,above:l,below:u,area:i,scale:s,axis:a}),ye(t))}var Eo={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,r=[];let s,a,o,c;for(a=0;a<n;++a)s=t.getDatasetMeta(a),o=s.dataset,c=null,o&&o.options&&o instanceof Ra&&(c={visible:t.isDatasetVisible(a),index:a,fill:ao(o,a,n),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=c,r.push(c);for(a=0;a<n;++a)c=r[a],c&&!1!==c.fill&&(c.fill=vo(r,a,i.propagate))},beforeDraw(t,e,i){const n="beforeDraw"===i.drawTime,r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let a=r.length-1;a>=0;--a){const e=r[a].$filler;e&&(e.line.updateControlPoints(s,e.axis),n&&Oo(t.ctx,e,s))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const e=n[r].$filler;e&&Oo(t.ctx,e,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;n&&!1!==n.fill&&"beforeDatasetDraw"===i.drawTime&&Oo(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Co=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}},Do=(t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Bo extends os{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=_(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,i)=>t.sort(e,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,n=De(i.font),r=n.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Co(i,r);let c,h;e.font=n.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(s,r,a,o)+10):(h=this.maxHeight,c=this._fitCols(s,r,a,o)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],c=this.lineWidths=[0],h=n+a;let l=t;r.textAlign="left",r.textBaseline="middle";let u=-1,d=-h;return this.legendItems.forEach((t,p)=>{const f=i+e/2+r.measureText(t.text).width;(0===p||c[c.length-1]+f+2*a>s)&&(l+=h,c[c.length-(p>0?0:1)]=0,d+=h,u++),o[p]={left:0,top:d,row:u,width:f,height:n},c[c.length-1]+=f+a}),l}_fitCols(t,e,i,n){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],c=this.columnSizes=[],h=s-t;let l=a,u=0,d=0,p=0,f=0;return this.legendItems.forEach((t,s)=>{const g=i+e/2+r.measureText(t.text).width;s>0&&d+n+2*a>h&&(l+=u+a,c.push({width:u,height:d}),p+=u+a,f++,u=d=0),o[s]={left:p,top:d,col:f,width:g,height:n},u=Math.max(u,g),d+=n+a}),l+=u,c.push({width:u,height:d}),l}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:n},rtl:r}}=this,s=Wi(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=o(i,this.left+n,this.right-this.lineWidths[r]);for(const c of e)r!==c.row&&(r=c.row,a=o(i,this.left+n,this.right-this.lineWidths[r])),c.top+=this.top+t+n,c.left=s.leftForLtr(s.x(a),c.width),a+=c.width+n}else{let r=0,a=o(i,this.top+t+n,this.bottom-this.columnSizes[r].height);for(const c of e)c.col!==r&&(r=c.col,a=o(i,this.top+t+n,this.bottom-this.columnSizes[r].height)),c.top=a,c.left+=this.left+n,c.left=s.leftForLtr(s.x(c.left),c.width),a+=c.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;me(t,this),this._draw(),ye(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:n}=this,{align:r,labels:s}=t,a=ce.color,h=Wi(t.rtl,this.left,this.width),l=De(s.font),{color:u,padding:d}=s,p=l.size,f=p/2;let g;this.drawTitle(),n.textAlign=h.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:y,boxHeight:b,itemHeight:_}=Co(s,p),v=function(t,e,i){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;n.save();const r=m(i.lineWidth,1);if(n.fillStyle=m(i.fillStyle,a),n.lineCap=m(i.lineCap,"butt"),n.lineDashOffset=m(i.lineDashOffset,0),n.lineJoin=m(i.lineJoin,"miter"),n.lineWidth=r,n.strokeStyle=m(i.strokeStyle,a),n.setLineDash(m(i.lineDash,[])),s.usePointStyle){const s={radius:y*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:r},a=h.xPlus(t,y/2),o=e+f;fe(n,s,a,o)}else{const s=e+Math.max((p-b)/2,0),a=h.leftForLtr(t,y),o=Ee(i.borderRadius);n.beginPath(),Object.values(o).some(t=>0!==t)?Se(n,{x:a,y:s,w:y,h:b,radius:o}):n.rect(a,s,y,b),n.fill(),0!==r&&n.stroke()}n.restore()},x=function(t,e,i){ve(n,i.text,t,e+_/2,l,{strikethrough:i.hidden,textAlign:h.textAlign(i.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();g=w?{x:o(r,this.left+d,this.right-i[0]),y:this.top+d+S,line:0}:{x:this.left+d,y:o(r,this.top+S+d,this.bottom-e[0].height),line:0},$i(this.ctx,t.textDirection);const I=_+d;this.legendItems.forEach((a,l)=>{n.strokeStyle=a.fontColor||u,n.fillStyle=a.fontColor||u;const p=n.measureText(a.text).width,m=h.textAlign(a.textAlign||(a.textAlign=s.textAlign)),b=y+f+p;let _=g.x,A=g.y;h.setWidth(this.width),w?l>0&&_+b+d>this.right&&(A=g.y+=I,g.line++,_=g.x=o(r,this.left+d,this.right-i[g.line])):l>0&&A+I>this.bottom&&(_=g.x=_+e[g.line].width+d,g.line++,A=g.y=o(r,this.top+S+d,this.bottom-e[g.line].height));const k=h.x(_);v(k,A,a),_=c(m,_+y+f,w?_+b:this.right,t.rtl),x(h.x(_),A,a),w?g.x+=b+d:g.y+=I}),Hi(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=De(e.font),n=Ce(e.padding);if(!e.display)return;const r=Wi(t.rtl,this.left,this.width),s=this.ctx,c=e.position,h=i.size/2,l=n.top+h;let u,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+l,d=o(t.align,d,this.right-p);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);u=l+o(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const f=o(c,d,d+p);s.textAlign=r.textAlign(a(c)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=i.string,ve(s,e.text,f,u,i)}_computeTitleHeight(){const t=this.options.title,e=De(t.font),i=Ce(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,n,r;if(ct(t,this.left,this.right)&&ct(e,this.top,this.bottom))for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(n=r[i],ct(t,n.left,n.left+n.width)&&ct(e,n.top,n.top+n.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!Lo(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const n=this._hoveredItem,r=Do(n,i);n&&!r&&_(e.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!r&&_(e.onHover,[t,i,this],this)}else i&&_(e.onClick,[t,i,this],this)}}function Lo(t,e){return!("mousemove"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}var Po={id:"legend",_element:Bo,start(t,e,i){const n=t.legend=new Bo({ctx:t.ctx,options:i,chart:t});Nr.configure(t,n,i),Nr.addBox(t,n)},stop(t){Nr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;Nr.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,r=i.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:r,color:s}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const a=t.controller.getStyle(i?0:void 0),o=Ce(a.borderWidth);return{text:e[t.index].label,fillStyle:a.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(o.width+o.height)/4,strokeStyle:a.borderColor,pointStyle:n||a.pointStyle,rotation:a.rotation,textAlign:r||a.textAlign,borderRadius:0,datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Fo extends os{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const n=d(i.text)?i.text.length:1;this._padding=Ce(i.padding);const r=n*De(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:n,right:r,options:s}=this,a=s.align;let c,h,l,u=0;return this.isHorizontal()?(h=o(a,i,r),l=e+t,c=r-i):("left"===s.position?(h=i+t,l=o(a,n,e),u=-.5*F):(h=r-t,l=o(a,e,n),u=.5*F),c=n-e),{titleX:h,titleY:l,maxWidth:c,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=De(e.font),n=i.lineHeight,r=n/2+this._padding.top,{titleX:s,titleY:o,maxWidth:c,rotation:h}=this._drawArgs(r);ve(t,e.text,0,0,i,{color:e.color,maxWidth:c,rotation:h,textAlign:a(e.align),textBaseline:"middle",translation:[s,o]})}}function No(t,e){const i=new Fo({ctx:t.ctx,options:e,chart:t});Nr.configure(t,i,e),Nr.addBox(t,i),t.titleBlock=i}var Ro={id:"title",_element:Fo,start(t,e,i){No(t,i)},stop(t){const e=t.titleBlock;Nr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;Nr.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Uo=new WeakMap;var Vo={id:"subtitle",start(t,e,i){const n=new Fo({ctx:t.ctx,options:i,chart:t});Nr.configure(t,n,i),Nr.addBox(t,n),Uo.set(t,n)},stop(t){Nr.removeBox(t,Uo.get(t)),Uo.delete(t)},beforeUpdate(t,e,i){const n=Uo.get(t);Nr.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jo={average(t){if(!t.length)return!1;let e,i,n=0,r=0,s=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();n+=t.x,r+=t.y,++s}}return{x:n/s,y:r/s}},nearest(t,e){if(!t.length)return!1;let i,n,r,s=e.x,a=e.y,o=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){const n=t[i].element;if(n&&n.hasValue()){const t=n.getCenterPoint(),i=it(e,t);i<o&&(o=i,r=n)}}if(r){const t=r.tooltipPosition();s=t.x,a=t.y}return{x:s,y:a}}};function zo(t,e){return e&&(d(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wo(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function $o(t,e){const{element:i,datasetIndex:n,index:r}=e,s=t.getDatasetMeta(n).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:t,label:a,parsed:s.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:i}}function Ho(t,e){const i=t._chart.ctx,{body:n,footer:r,title:s}=t,{boxWidth:a,boxHeight:o}=e,c=De(e.bodyFont),h=De(e.titleFont),l=De(e.footerFont),u=s.length,d=r.length,p=n.length,f=Ce(e.padding);let g=f.height,m=0,y=n.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*h.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),y){const t=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;g+=p*t+(y-p)*c.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*l.lineHeight+(d-1)*e.footerSpacing);let b=0;const _=function(t){m=Math.max(m,i.measureText(t).width+b)};return i.save(),i.font=h.string,v(t.title,_),i.font=c.string,v(t.beforeBody.concat(t.afterBody),_),b=e.displayColors?a+2+e.boxPadding:0,v(n,t=>{v(t.before,_),v(t.lines,_),v(t.after,_)}),b=0,i.font=l.string,v(t.footer,_),i.restore(),m+=f.width,{width:m,height:g}}function Yo(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}function qo(t,e,i,n){const{x:r,width:s}=n,a=i.caretSize+i.caretPadding;return"left"===t&&r+s+a>e.width||("right"===t&&r-s-a<0||void 0)}function Go(t,e,i,n){const{x:r,width:s}=i,{width:a,chartArea:{left:o,right:c}}=t;let h="center";return"center"===n?h=r<=(o+c)/2?"left":"right":r<=s/2?h="left":r>=a-s/2&&(h="right"),qo(h,t,e,i)&&(h="center"),h}function Ko(t,e,i){const n=e.yAlign||Yo(t,i);return{xAlign:e.xAlign||Go(t,e,i,n),yAlign:n}}function Xo(t,e){let{x:i,width:n}=t;return"right"===e?i-=n:"center"===e&&(i-=n/2),i}function Jo(t,e,i){let{y:n,height:r}=t;return"top"===e?n+=i:n-="bottom"===e?r+i:r/2,n}function Qo(t,e,i,n){const{caretSize:r,caretPadding:s,cornerRadius:a}=t,{xAlign:o,yAlign:c}=i,h=r+s,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:p}=Ee(a);let f=Xo(e,o);const g=Jo(e,c,h);return"center"===c?"left"===o?f+=h:"right"===o&&(f-=h):"left"===o?f-=Math.max(l,d)+r:"right"===o&&(f+=Math.max(u,p)+r),{x:at(f,0,n.width-e.width),y:at(g,0,n.height-e.height)}}function Zo(t,e,i){const n=Ce(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-n.right:t.x+n.left}function tc(t){return zo([],Wo(t))}function ec(t,e,i){return Pe(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function ic(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}class nc extends os{constructor(t){super(),this.opacity=0,this._active=[],this._chart=t._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this._chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,r=new pn(this._chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=ec(this._chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,n=i.beforeTitle.apply(this,[t]),r=i.title.apply(this,[t]),s=i.afterTitle.apply(this,[t]);let a=[];return a=zo(a,Wo(n)),a=zo(a,Wo(r)),a=zo(a,Wo(s)),a}getBeforeBody(t,e){return tc(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:i}=e,n=[];return v(t,t=>{const e={before:[],lines:[],after:[]},r=ic(i,t);zo(e.before,Wo(r.beforeLabel.call(this,t))),zo(e.lines,r.label.call(this,t)),zo(e.after,Wo(r.afterLabel.call(this,t))),n.push(e)}),n}getAfterBody(t,e){return tc(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:i}=e,n=i.beforeFooter.apply(this,[t]),r=i.footer.apply(this,[t]),s=i.afterFooter.apply(this,[t]);let a=[];return a=zo(a,Wo(n)),a=zo(a,Wo(r)),a=zo(a,Wo(s)),a}_createItems(t){const e=this._active,i=this._chart.data,n=[],r=[],s=[];let a,o,c=[];for(a=0,o=e.length;a<o;++a)c.push($o(this._chart,e[a]));return t.filter&&(c=c.filter((e,n,r)=>t.filter(e,n,r,i))),t.itemSort&&(c=c.sort((e,n)=>t.itemSort(e,n,i))),v(c,e=>{const i=ic(t.callbacks,e);n.push(i.labelColor.call(this,e)),r.push(i.labelPointStyle.call(this,e)),s.push(i.labelTextColor.call(this,e))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=c,c}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active;let r,s=[];if(n.length){const t=jo[i.position].call(this,n,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);const e=this._size=Ho(this,i),a=Object.assign({},t,e),o=Ko(this._chart,i,a),c=Qo(i,a,o,this._chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:c.x,y:c.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this._chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const r=this.getCaretPosition(t,i,n);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:r}=this,{caretSize:s,cornerRadius:a}=i,{topLeft:o,topRight:c,bottomLeft:h,bottomRight:l}=Ee(a),{x:u,y:d}=t,{width:p,height:f}=e;let g,m,y,b,_,v;return"center"===r?(_=d+f/2,"left"===n?(g=u,m=g-s,b=_+s,v=_-s):(g=u+p,m=g+s,b=_-s,v=_+s),y=g):(m="left"===n?u+Math.max(o,h)+s:"right"===n?u+p-Math.max(c,l)-s:this.caretX,"top"===r?(b=d,_=b-s,g=m-s,y=m+s):(b=d+f,_=b+s,g=m+s,y=m-s),v=b),{x1:g,x2:m,x3:y,y1:b,y2:_,y3:v}}drawTitle(t,e,i){const n=this.title,r=n.length;let s,a,o;if(r){const c=Wi(i.rtl,this.x,this.width);for(t.x=Zo(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",s=De(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=s.string,o=0;o<r;++o)e.fillText(n[o],c.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+a,o+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,n,r){const s=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:o,boxWidth:c,boxPadding:h}=r,l=De(r.bodyFont),u=Zo(this,"left",r),d=n.x(u),p=o<l.lineHeight?(l.lineHeight-o)/2:0,f=e.y+p;if(r.usePointStyle){const e={radius:Math.min(c,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},i=n.leftForLtr(d,c)+c/2,h=f+o/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,fe(t,e,i,h),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,fe(t,e,i,h)}else{t.lineWidth=s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=n.leftForLtr(d,c-h),i=n.leftForLtr(n.xPlus(d,1),c-h-2),a=Ee(s.borderRadius);Object.values(a).some(t=>0!==t)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Se(t,{x:e,y:f,w:c,h:o,radius:a}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),Se(t,{x:i,y:f+1,w:c-2,h:o-2,radius:a}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,c,o),t.strokeRect(e,f,c,o),t.fillStyle=s.backgroundColor,t.fillRect(i,f+1,c-2,o-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:n}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:c,boxPadding:h}=i,l=De(i.bodyFont);let u=l.lineHeight,d=0;const p=Wi(i.rtl,this.x,this.width),f=function(i){e.fillText(i,p.x(t.x+d),t.y+u/2),t.y+=u+r},g=p.textAlign(s);let m,y,b,_,x,w,S;for(e.textAlign=s,e.textBaseline="middle",e.font=l.string,t.x=Zo(this,g,i),e.fillStyle=i.bodyColor,v(this.beforeBody,f),d=a&&"right"!==g?"center"===s?c/2+h:c+2+h:0,_=0,w=n.length;_<w;++_){for(m=n[_],y=this.labelTextColors[_],e.fillStyle=y,v(m.before,f),b=m.lines,a&&b.length&&(this._drawColorBox(e,t,_,p,i),u=Math.max(l.lineHeight,o)),x=0,S=b.length;x<S;++x)f(b[x]),u=l.lineHeight;v(m.after,f)}d=0,u=l.lineHeight,v(this.afterBody,f),t.y-=r}drawFooter(t,e,i){const n=this.footer,r=n.length;let s,a;if(r){const o=Wi(i.rtl,this.x,this.width);for(t.x=Zo(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=o.textAlign(i.footerAlign),e.textBaseline="middle",s=De(i.footerFont),e.fillStyle=i.footerColor,e.font=s.string,a=0;a<r;++a)e.fillText(n[a],o.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:r,yAlign:s}=this,{x:a,y:o}=t,{width:c,height:h}=i,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:p}=Ee(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(a+l,o),"top"===s&&this.drawCaret(t,e,i,n),e.lineTo(a+c-u,o),e.quadraticCurveTo(a+c,o,a+c,o+u),"center"===s&&"right"===r&&this.drawCaret(t,e,i,n),e.lineTo(a+c,o+h-p),e.quadraticCurveTo(a+c,o+h,a+c-p,o+h),"bottom"===s&&this.drawCaret(t,e,i,n),e.lineTo(a+d,o+h),e.quadraticCurveTo(a,o+h,a,o+h-d),"center"===s&&"left"===r&&this.drawCaret(t,e,i,n),e.lineTo(a,o+l),e.quadraticCurveTo(a,o,a+l,o),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this._chart,i=this.$animations,n=i&&i.x,r=i&&i.y;if(n||r){const i=jo[t.position].call(this,this._active,this._eventPosition);if(!i)return;const s=this._size=Ho(this,t),a=Object.assign({},i,this._size),o=Ko(e,t,a),c=Qo(t,a,o,e);n._to===c.x&&r._to===c.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,c))}}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const s=Ce(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,n,e),$i(t,e.textDirection),r.y+=s.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Hi(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,n=t.map(({datasetIndex:t,index:e})=>{const i=this._chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}),r=!x(i,n),s=this._positionChanged(n,e);(r||s)&&(this._active=n,this._eventPosition=e,this.update(!0))}handleEvent(t,e){const i=this.options,n=this._active||[];let r=!1,s=[];"mouseout"!==t.type&&(s=this._chart.getElementsAtEventForMode(t,i.mode,i,e),i.reverse&&s.reverse());const a=this._positionChanged(s,t);return r=e||!x(s,n)||a,r&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),r}_positionChanged(t,e){const{caretX:i,caretY:n,options:r}=this,s=jo[r.position].call(this,t,e);return!1!==s&&(i!==s.x||n!==s.y)}}nc.positioners=jo;var rc={id:"tooltip",_element:nc,positioners:jo,afterInit(t,e,i){i&&(t.tooltip=new nc({_chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip,i={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",i)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i))},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:h,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:h,beforeBody:h,beforeLabel:h,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return u(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex),i=e.controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex),i=e.controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:h,afterBody:h,beforeFooter:h,footer:h,afterFooter:h}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},sc=Object.freeze({__proto__:null,Decimation:no,Filler:Eo,Legend:Po,SubTitle:Vo,Title:Ro,Tooltip:rc});const ac=(t,e,i,n)=>("string"===typeof e?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function oc(t,e,i,n){const r=t.indexOf(e);if(-1===r)return ac(t,e,i,n);const s=t.lastIndexOf(e);return r!==s?i:r}const cc=(t,e)=>null===t?null:at(Math.round(t),0,e);class hc extends Os{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:n}of e)t[i]===n&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(u(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:oc(i,t,m(e,t),this._addedLabels),cc(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,n=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let s=t;s<=e;s++)n.push({value:s});return n}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function lc(t,e){const i=[],n=1e-14,{bounds:r,step:s,min:a,max:o,precision:c,count:h,maxTicks:l,maxDigits:d,includeBounds:p}=t,f=s||1,g=l-1,{min:m,max:y}=e,b=!u(a),_=!u(o),v=!u(h),x=(y-m)/(d+1);let w,S,I,A,k=Y((y-m)/g/f)*f;if(k<n&&!b&&!_)return[{value:m},{value:y}];A=Math.ceil(y/k)-Math.floor(m/k),A>g&&(k=Y(A*k/g/f)*f),u(c)||(w=Math.pow(10,c),k=Math.ceil(k*w)/w),"ticks"===r?(S=Math.floor(m/k)*k,I=Math.ceil(y/k)*k):(S=m,I=y),b&&_&&s&&X((o-a)/s,k/1e3)?(A=Math.round(Math.min((o-a)/k,l)),k=(o-a)/A,S=a,I=o):v?(S=b?a:S,I=_?o:I,A=h-1,k=(I-S)/A):(A=(I-S)/k,A=K(A,Math.round(A),k/1e3)?Math.round(A):Math.ceil(A));const T=Math.max(tt(k),tt(S));w=Math.pow(10,u(c)?T:c),S=Math.round(S*w)/w,I=Math.round(I*w)/w;let M=0;for(b&&(p&&S!==a?(i.push({value:a}),S<a&&M++,K(Math.round((S+M*k)*w)/w,a,uc(a,x,t))&&M++):S<a&&M++);M<A;++M)i.push({value:Math.round((S+M*k)*w)/w});return _&&p&&I!==o?i.length&&K(i[i.length-1].value,o,uc(o,x,t))?i[i.length-1].value=o:i.push({value:o}):_&&I!==o||i.push({value:I}),i}function uc(t,e,{horizontal:i,minRotation:n}){const r=Q(n),s=(i?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+t).length;return Math.min(e/s,a)}hc.id="category",hc.defaults={ticks:{callback:hc.prototype.getLabelForValue}};class dc extends Os{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return u(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:r}=this;const s=t=>n=e?n:t,a=t=>r=i?r:t;if(t){const t=H(n),e=H(r);t<0&&e<0?a(0):t>0&&e>0&&s(0)}if(n===r){let e=1;(r>=Number.MAX_SAFE_INTEGER||n<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*r)),a(r+e),t||s(n-e)}this.min=n,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:n}=t;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},r=this._range||this,s=lc(n,r);return"ticks"===t.bounds&&J(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Vi(t,this.chart.options.locale,this.options.ticks.format)}}class pc extends dc{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=f(t)?t:0,this.max=f(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Q(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function fc(t){const e=t/Math.pow(10,Math.floor($(t)));return 1===e}function gc(t,e){const i=Math.floor($(e.max)),n=Math.ceil(e.max/Math.pow(10,i)),r=[];let s=g(t.min,Math.pow(10,Math.floor($(e.min)))),a=Math.floor($(s)),o=Math.floor(s/Math.pow(10,a)),c=a<0?Math.pow(10,Math.abs(a)):1;do{r.push({value:s,major:fc(s)}),++o,10===o&&(o=1,++a,c=a>=0?1:c),s=Math.round(o*Math.pow(10,a)*c)/c}while(a<i||a===i&&o<n);const h=g(t.max,s);return r.push({value:h,major:fc(s)}),r}pc.id="linear",pc.defaults={ticks:{callback:ls.formatters.numeric}};class mc extends Os{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=dc.prototype.parse.apply(this,[t,e]);if(0!==i)return f(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=f(t)?Math.max(0,t):null,this.max=f(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,n=this.max;const r=e=>i=t?i:e,s=t=>n=e?n:t,a=(t,e)=>Math.pow(10,Math.floor($(t))+e);i===n&&(i<=0?(r(1),s(10)):(r(a(i,-1)),s(a(n,1)))),i<=0&&r(a(n,-1)),n<=0&&s(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&r(a(i,-1)),this.min=i,this.max=n}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=gc(e,this);return"ticks"===t.bounds&&J(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return void 0===t?"0":Vi(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=$(t),this._valueRange=$(this.max)-$(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:($(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function yc(t){const e=t.ticks;if(e.display&&t.display){const t=Ce(e.backdropPadding);return m(e.font&&e.font.size,ce.font.size)+t.height}return 0}function bc(t,e,i){return i=d(i)?i:[i],{w:ue(t,e.string,i),h:i.length*e.lineHeight}}function _c(t,e,i,n,r){return t===n||t===r?{start:e-i/2,end:e+i/2}:t<n||t>r?{start:e-i,end:e}:{start:e,end:e+i}}function vc(t){const e={l:0,r:t.width,t:0,b:t.height-t.paddingTop},i={},n=[],r=[],s=t.getLabels().length;for(let a=0;a<s;a++){const s=t.options.pointLabels.setContext(t.getPointLabelContext(a));r[a]=s.padding;const o=t.getPointPosition(a,t.drawingArea+r[a]),c=De(s.font),h=bc(t.ctx,c,t._pointLabels[a]);n[a]=h;const l=t.getIndexAngle(a),u=Z(l),d=_c(u,o.x,h.w,0,180),p=_c(u,o.y,h.h,90,270);d.start<e.l&&(e.l=d.start,i.l=l),d.end>e.r&&(e.r=d.end,i.r=l),p.start<e.t&&(e.t=p.start,i.t=l),p.end>e.b&&(e.b=p.end,i.b=l)}t._setReductions(t.drawingArea,e,i),t._pointLabelItems=xc(t,n,r)}function xc(t,e,i){const n=[],r=t.getLabels().length,s=t.options,a=yc(s),o=t.getDistanceFromCenterForValue(s.ticks.reverse?t.min:t.max);for(let c=0;c<r;c++){const r=0===c?a/2:0,s=t.getPointPosition(c,o+r+i[c]),h=Z(t.getIndexAngle(c)),l=e[c],u=Ic(s.y,l.h,h),d=wc(h),p=Sc(s.x,l.w,d);n.push({x:s.x,y:u,textAlign:d,left:p,top:u,right:p+l.w,bottom:u+l.h})}return n}function wc(t){return 0===t||180===t?"center":t<180?"left":"right"}function Sc(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function Ic(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}function Ac(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const e=n.setContext(t.getPointLabelContext(r)),s=De(e.font),{x:a,y:o,textAlign:c,left:h,top:l,right:d,bottom:p}=t._pointLabelItems[r],{backdropColor:f}=e;if(!u(f)){const t=Ce(e.backdropPadding);i.fillStyle=f,i.fillRect(h-t.left,l-t.top,d-h+t.width,p-l+t.height)}ve(i,t._pointLabels[r],a,o+s.lineHeight/2,s,{color:e.color,textAlign:c,textBaseline:"middle"})}}function kc(t,e,i,n){const{ctx:r}=t;if(i)r.arc(t.xCenter,t.yCenter,e,0,N);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let s=1;s<n;s++)i=t.getPointPosition(s,e),r.lineTo(i.x,i.y)}}function Tc(t,e,i,n){const r=t.ctx,s=e.circular,{color:a,lineWidth:o}=e;!s&&!n||!a||!o||i<0||(r.save(),r.strokeStyle=a,r.lineWidth=o,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),kc(t,i,s,n),r.closePath(),r.stroke(),r.restore())}function Mc(t){return G(t)?t:0}function Oc(t,e,i){return Pe(t,{label:i,index:e,type:"pointLabel"})}mc.id="logarithmic",mc.defaults={ticks:{callback:ls.formatters.logarithmic,major:{enabled:!0}}};class Ec extends dc{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=yc(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=f(t)&&!isNaN(t)?t:0,this.max=f(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/yc(this.options))}generateTickLabels(t){dc.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const i=_(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""})}fit(){const t=this.options;t.display&&t.pointLabels.display?vc(this):this.setCenterPoint(0,0,0,0)}_setReductions(t,e,i){let n=e.l/Math.sin(i.l),r=Math.max(e.r-this.width,0)/Math.sin(i.r),s=-e.t/Math.cos(i.t),a=-Math.max(e.b-(this.height-this.paddingTop),0)/Math.cos(i.b);n=Mc(n),r=Mc(r),s=Mc(s),a=Mc(a),this.drawingArea=Math.max(t/2,Math.min(Math.floor(t-(n+r)/2),Math.floor(t-(s+a)/2))),this.setCenterPoint(n,r,s,a)}setCenterPoint(t,e,i,n){const r=this.width-e-this.drawingArea,s=t+this.drawingArea,a=i+this.drawingArea,o=this.height-this.paddingTop-n-this.drawingArea;this.xCenter=Math.floor((s+r)/2+this.left),this.yCenter=Math.floor((a+o)/2+this.top+this.paddingTop)}getIndexAngle(t){const e=N/this.getLabels().length,i=this.options.startAngle||0;return rt(t*e+Q(i))}getDistanceFromCenterForValue(t){if(u(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(u(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return Oc(this.getContext(),t,i)}}getPointPosition(t,e){const i=this.getIndexAngle(t)-j;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),kc(this,this.getDistanceFromCenterForValue(this._endValue),e,this.getLabels().length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:n}=e,r=this.getLabels().length;let s,a,o;if(e.pointLabels.display&&Ac(this,r),n.display&&this.ticks.forEach((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);const i=n.setContext(this.getContext(e-1));Tc(this,i,a,r)}}),i.display){for(t.save(),s=this.getLabels().length-1;s>=0;s--){const n=i.setContext(this.getPointLabelContext(s)),{color:r,lineWidth:c}=n;c&&r&&(t.lineWidth=c,t.strokeStyle=r,t.setLineDash(n.borderDash),t.lineDashOffset=n.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),o=this.getPointPosition(s,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(o.x,o.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let r,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((n,a)=>{if(0===a&&!e.reverse)return;const o=i.setContext(this.getContext(a)),c=De(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){t.font=c.string,s=t.measureText(n.label).width,t.fillStyle=o.backdropColor;const e=Ce(o.backdropPadding);t.fillRect(-s/2-e.left,-r-c.size/2-e.top,s+e.width,c.size+e.height)}ve(t,n.label,0,-r,c,{color:o.color})}),t.restore()}drawTitle(){}}Ec.id="radialLinear",Ec.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ls.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5}},Ec.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Ec.descriptors={angleLines:{_fallback:"grid"}};const Cc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dc=Object.keys(Cc);function Bc(t,e){return t-e}function Lc(t,e){if(u(e))return null;const i=t._adapter,{parser:n,round:r,isoWeekday:s}=t._parseOpts;let a=e;return"function"===typeof n&&(a=n(a)),f(a)||(a="string"===typeof n?i.parse(a,n):i.parse(a)),null===a?null:(r&&(a="week"!==r||!G(s)&&!0!==s?i.startOf(a,r):i.startOf(a,"isoWeek",s)),+a)}function Pc(t,e,i,n){const r=Dc.length;for(let s=Dc.indexOf(t);s<r-1;++s){const t=Cc[Dc[s]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(r*t.size))<=n)return Dc[s]}return Dc[r-1]}function Fc(t,e,i,n,r){for(let s=Dc.length-1;s>=Dc.indexOf(i);s--){const i=Dc[s];if(Cc[i].common&&t._adapter.diff(r,n,i)>=e-1)return i}return Dc[i?Dc.indexOf(i):0]}function Nc(t){for(let e=Dc.indexOf(t)+1,i=Dc.length;e<i;++e)if(Cc[Dc[e]].common)return Dc[e]}function Rc(t,e,i){if(i){if(i.length){const{lo:n,hi:r}=Fe(i,e),s=i[n]>=e?i[n]:i[r];t[s]=!0}}else t[e]=!0}function Uc(t,e,i,n){const r=t._adapter,s=+r.startOf(e[0].value,n),a=e[e.length-1].value;let o,c;for(o=s;o<=a;o=+r.add(o,1,n))c=i[o],c>=0&&(e[c].major=!0);return e}function Vc(t,e,i){const n=[],r={},s=e.length;let a,o;for(a=0;a<s;++a)o=e[a],r[o]=a,n.push({value:o,major:!1});return 0!==s&&i?Uc(t,n,r,i):n}class jc extends Os{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const i=t.time||(t.time={}),n=this._adapter=new ur._date(t.adapters.date);k(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Lc(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:n,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function o(t){s||isNaN(t.min)||(n=Math.min(n,t.min)),a||isNaN(t.max)||(r=Math.max(r,t.max))}s&&a||(o(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||o(this.getMinMax(!1))),n=f(n)&&!isNaN(n)?n:+e.startOf(Date.now(),i),r=f(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,n="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,s=this.max,a=Ue(n,r,s);return this._unit=e.unit||(i.autoSkip?Pc(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):Fc(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?Nc(this._unit):void 0,this.initOffsets(n),t.reverse&&a.reverse(),Vc(this,a,this._majorUnit)}initOffsets(t){let e,i,n=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),n=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),r=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;n=at(n,0,s),r=at(r,0,s),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,e=this.min,i=this.max,n=this.options,r=n.time,s=r.unit||Pc(r.minUnit,e,i,this._getLabelCapacity(e)),a=m(r.stepSize,1),o="week"===s&&r.isoWeekday,c=G(o)||!0===o,h={};let l,u,d=e;if(c&&(d=+t.startOf(d,"isoWeek",o)),d=+t.startOf(d,c?"day":s),t.diff(i,e,s)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+s);const p="data"===n.ticks.source&&this.getDataTimestamps();for(l=d,u=0;l<i;l=+t.add(l,a,s),u++)Rc(h,l,p);return l!==i&&"ticks"!==n.bounds&&1!==u||Rc(h,l,p),Object.keys(h).sort((t,e)=>t-e).map(t=>+t)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}_tickFormatFunction(t,e,i,n){const r=this.options,s=r.time.displayFormats,a=this._unit,o=this._majorUnit,c=a&&s[a],h=o&&s[o],l=i[e],u=o&&h&&l&&l.major,d=this._adapter.format(t,n||(u?h:c)),p=r.ticks.callback;return p?_(p,[d,e,i],this):d}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,n=Q(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(n),s=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*s,h:i*s+a*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,n=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,Vc(this,[t],this._majorUnit),n),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,e=n.length;t<e;++t)i=i.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const n=this.getLabels();for(e=0,i=n.length;e<i;++e)t.push(Lc(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return We(t.sort(Bc))}}function zc(t,e,i){let n,r,s,a,o=0,c=t.length-1;i?(e>=t[o].pos&&e<=t[c].pos&&({lo:o,hi:c}=Ne(t,"pos",e)),({pos:n,time:s}=t[o]),({pos:r,time:a}=t[c])):(e>=t[o].time&&e<=t[c].time&&({lo:o,hi:c}=Ne(t,"time",e)),({time:n,pos:s}=t[o]),({time:r,pos:a}=t[c]));const h=r-n;return h?s+(a-s)*(e-n)/h:s}jc.id="time",jc.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Wc extends jc{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=zc(e,this.min),this._tableRange=zc(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],r=[];let s,a,o,c,h;for(s=0,a=t.length;s<a;++s)c=t[s],c>=e&&c<=i&&n.push(c);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(s=0,a=n.length;s<a;++s)h=n[s+1],o=n[s-1],c=n[s],Math.round((h+o)/2)!==c&&r.push({time:c,pos:s/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(zc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return zc(this._table,i*this._tableRange+this._minPos,!0)}}Wc.id="timeseries",Wc.defaults=jc.defaults;var $c=Object.freeze({__proto__:null,CategoryScale:hc,LinearScale:pc,LogarithmicScale:mc,RadialLinearScale:Ec,TimeScale:jc,TimeSeriesScale:Wc});const Hc=[cr,Ja,sc,$c];fa.register(...Hc);e["a"]=fa},d998:function(t,e,i){var n=i("342f");t.exports=/MSIE|Trident/.test(n)},e3db:function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},f673:function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return s})),i.d(e,"d",(function(){return a})),i.d(e,"b",(function(){return o}));var n=i("6bfb");const r=Object.freeze({done:!0,value:void 0});class s{constructor(t){this._json=t}get schema(){return this._json["schema"]}get batches(){return this._json["batches"]||[]}get dictionaries(){return this._json["dictionaries"]||[]}}class a{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class o extends a{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}async cancel(t){await this.return(t)}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;while(t.length>0)t.shift().resolve(r);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return n["a"].toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return n["a"].toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}async throw(t){return await this.abort(t),r}async return(t){return await this.close(),r}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((t,e)=>{this.resolvers.push({resolve:t,reject:e})}):Promise.resolve(r)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error(this+" is closed")}}}}]);
//# sourceMappingURL=MapView~about.f528df17.js.map